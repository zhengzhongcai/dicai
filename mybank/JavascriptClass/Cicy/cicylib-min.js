function fGo(){}if(window.__debug===undefined)var __debug=false;
(function(){function a(u,w,y){for(var m=0,p=y.length;m<p;m++){var v=y[m];if(F.isArray(v))arguments.callee(u,w,v);else typeof v==="function"?F.extend(u,v(w)):F.extend(u,v)}}var b=window.document,g=navigator.userAgent.toLowerCase(),f=0,d=window.String,h,k=b.compatMode==="CSS1Compat",n=g.indexOf("opera")>-1,l=!n&&g.indexOf("msie")>-1;if(l)var o=g.indexOf("msie 7")>-1,q=g.indexOf("msie 6")>-1;else if(!n){var t=/webkit|khtml/.test(g);!t&&g.indexOf("chrome");var x=!t&&g.indexOf("gecko")>-1}g=l&&!k;var B=
/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,A=Array.prototype.slice;if(q)try{b.execCommand("BackgroundImageCache",false,true)}catch(E){}var F={version:"2010.5",$:function(u,w){var y=typeof u==="string"||u instanceof d;if(y&&!w)return b.getElementById(u);if(!y)return u;if(w.id==u)return w;w=w.firstChild;for(y=[];w;){if(w.id==u)return w;w.firstChild&&y.push(w);w=w.nextSibling;if(!w)if(w=y.pop())w=w.firstChild}return null},each:function(u,w){var y;if(u.length===h)for(y in u){if(w.call(u[y],y,u[y])===
false)return true}else{var m=u.length;for(y=0;y<m;y++)if(w.call(u[y],y,u[y])===false)return true}},eachH:function(u,w,y){u=u;for(var m;u;){m=y.call(u);if(m!==h)return m;u=u[w]}},extend:function(u,w){u||(u={});if(w)for(var y in w)u[y]=w[y];return u},extendIf:function(u,w){u||(u={});if(w)for(var y in w)if(u[y]===h)u[y]=w[y];return u},create:function(){var u=function(){this.initialize.apply(this,arguments)};if(arguments.length===0)return u;var w=u.prototype,y,m,p=this.$A(arguments);if(typeof p[0]===
"string"){m=p[0];y=p[1];p.shift()}else y=p[0];p.shift();if(y)y=y.prototype;else if(__debug)w.toString=function(){return(this.id?this.id:"")+(this.title?"$"+this.title:"")+"@"+this.type};if(y){function v(){}v.prototype=y;u.prototype=w=new v;w.superclass=y;u.superclass=y}if(m){w.type=m;if(m.indexOf(".")>0)this.attr(window,m,u);else window[m]=u}u.constructors=p;a(w,y,p);return w.constructor=u},ajaxRequest:function(){try{if(window.XMLHttpRequest)return new XMLHttpRequest;else if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(u){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(w){return null}}}catch(y){__debug&&
console.log("createXMLHttpRequest",y);return false}},attr:function(u,w,y){if(typeof w==="string")w=w.split(".");for(var m,p=0,v=w.length-1;p<v;p++){m=u;u=u[w[p]];if(typeof u==="undefined"||u===null)m[w[p]]=u={}}if(y===h)return u[w[p]];u[w[p]]=y},queryString:function(u){if(!u)return"";var w=[];for(var y in u){var m=u[y];y=encodeURIComponent(y);var p=typeof m;if(p==="undefined")w.push(y,"=&");else if(p!="function"&&p!="object")w.push(y,"=",encodeURIComponent(m),"&");else if(this.isArray(m))if(m.length){p=
0;for(var v=m.length;p<v;p++)w.push(y,"=",encodeURIComponent(m[p]===h?"":m[p]),"&")}else w.push(y,"=&")}w.pop();return w.join("")},formQuery:function(u){var w="",y="";u=F.$(u);for(var m=u.elements,p=m.length,v=0;v<p;v++){y=m[v];if(y.tagName==="INPUT")if(y.type==="radio"||y.type==="checkbox")if(!y.checked)continue;if(u=y.name||y.id){if(w!="")w+="&";w+=encodeURIComponent(y.name||y.id)+"="+encodeURIComponent(y.value)}}return w},validate:function(){var u=F.$A(arguments),w=null;if(!F.isArray(u[0])){w=
F.$(u[0]);u.remove(0)}var y=F.isArray(y)?{}:u.pop(),m=y.queryString,p=m?"":{};F.each(u,function(v,z){v=z[0].tagName?z[0]:w?w[z[0]]:F.$(z[0]);var D=v.value,J=z[1],G=typeof z[2]==="function"?z[3]:z[2];if(!G||typeof G!="object")G=y;if(!G.ignoreNull&&(D==""||D==null)){G.callback?G.callback(J,v,w):F.alert(J,v,w);G.nofocus||v.focus();return p=false}if(typeof z[2]==="function"){var I=z[2](D,v,w),K=I!==false;if(typeof I==="string"){J=I;K=false}if(!K){G.callback?G.callback(J,v,w):F.alert(J,v,w);G.nofocus||
v.focus();return p=false}}if(m&&!w)p+=p==""?(typeof v.name==="undefined"||v.name===""?v.id:v.name)+"="+D:"&"+z[0]+"="+D;else w||(p[z[0]]=D)});if(p!==false&&w&&m)p=F.formQuery(w);return p},uniqueID:function(){return f++},templ:function(u,w,y,m){return w.replace(/\{([\w_$]+)\}/g,function(p,v){var z=u[v];if(z===h||z===null){if(y===h)return"";switch(y){case 0:return"";case 1:return v;default:return p}}return m?encodeURIComponent(z):z})},isFunction:function(u){return u instanceof Function||typeof u===
"function"},isString:function(u){return u instanceof d||typeof u==="string"},isArray:function(u){return u instanceof Array},isDate:function(u){return u instanceof Date},alert:function(u){alert(u)},tip:function(u){alert(u)},delAttr:function(u,w){var y=u[w];y!==h&&delete u[w];return y},addClass:function(u,w){var y=u.className.replace(w,"").trim();y+=" "+w;u.className=y},addClassIf:function(u,w){if(!this.hasClass(u,w)){var y=u.className.replace(w,"").trim();y+=" "+w;u.className=y}},delClass:function(u,
w){u.className=u.className.replace(w,"").trim()},hasClass:function(u,w){return w&&(" "+u.className+" ").indexOf(" "+w+" ")!=-1},switchClass:function(u,w,y){F.delClass(u,w);F.addClass(u,y)},setClass:function(u,w){u.className=w},display:function(u,w,y){if(w===h)return F.$(u).style.display!="none";y=y!==h?y:"block";F.$(u).style.display=w?y:"none"},disable:function(u,w){if(w===h)return F.$(u).disabled;F.$(u).disabled=w},insertAfter:function(u,w){var y=w.nextSibling;y==null?w.parentNode.insertBefore(u,
w):w.parentNode.insertBefore(u,y);return u},isNumber:function(u){return u instanceof Number||typeof u=="number"},isMail:function(u){return B.test(u)},dateFormat:function(u,w){if(!w)return u.toLocaleString();var y=w.charAt(2);w=w.split(y);for(var m="",p=0,v=w.length;p<v;p++){switch(w[p]){case "mm":var z=u.getMonth()+1;if(z<10)z="0"+z;m+=z;break;case "yy":m+=u.getFullYear();break;case "dd":z=u.getDate();if(z<10)z="0"+z;m+=z;break}if(p!=v-1)m+=y}return m},dateParse:function(u,w){if(!w)return new Date(u);
var y=[0,0,0],m=w.charAt(2);w=w.split(m);u=u.split(m);for(var p=0,v=w.length;p<v;p++)if(w[p]=="mm")y[0]=u[p];else if(w[p]=="dd")y[1]=u[p];else y[2]=u[p];return new Date(y.join(m))},addDate:function(u,w,y){var m=null;switch(u){case "year":m=new Date(parseInt(w.getFullYear())+1,w.getMonth(),w.getDate());break;case "month":m=new Date(w.getFullYear(),w.getMonth()+y,w.getDate());break;case "day":m=new Date(w.getFullYear(),w.getMonth(),w.getDate()+y);break}return m},$C:function(u,w){if(typeof u==="string")return(w||
b).createElement(u);var y=u.tagName;delete u.tagName;w=this.extend((w||b).createElement(y),u);u.tagName=y;return w},$N:function(u){return b.getElementsByName(u)},$T:function(u,w){return(w||b).getElementsByTagName(u)},tagUp:function(u,w){for(;u&&u.tagName!==w;)if((u=u.parentNode)&&u.tagName==="BODY")return null;return u},getObjectLinkedValues:function(u,w,y){var m=[];y=!!y;var p;if(u.hasOwnProperty(w)){p=u[w];if(!y||p)m.push(u[w])}if(u.constructor.prototype.hasOwnProperty(w)){p=u.constructor.prototype[w];
if(!y||p)m.push(p)}for(u=u.superclass;u;){if(u.hasOwnProperty(w)){p=u[w];if(!y||p)m.push(u[w])}u=u.superclass}return m},loadResource:function(u,w,y,m){var p=F.delAttr(u,"src"),v=F.delAttr(u,"href"),z=this.$C(u,m);if(w||y)if(z.readyState)z.onreadystatechange=function(){if(z.readyState=="loaded"||z.readyState=="complete"){z.onreadystatechange=null;y&&setTimeout(function(){z.parentNode.removeChild(z)},1);w&&w.call(z)}};else z.onload=function(){y&&setTimeout(function(){z.parentNode.removeChild(z)},1);
w&&w.call(z)};if(p)z.src=p;if(v)z.href=v;this.$T("head")[0].appendChild(z);return z},loadScript:function(u,w,y){u=this.loadResource({tagName:"script",src:u,type:"text/javascript"},w,true);if(y)u.id=y;return u},loadCSS:function(u,w,y){u=this.loadResource({tagName:"link",rel:"stylesheet",href:u,type:"text/css"},w);if(y)u.id=y;return u},loadStyle:function(u,w){var y=this._styleEl;if(!y){y=this._styleEl=this.$C({tagName:"style",type:"text/css"});this.$T("head")[0].appendChild(y)}y.styleSheet&&(y.styleSheet.cssText+=
u)||y.appendChild((w||b).createTextNode(u));return y},noCache:function(){return"&noCacheReq="+(new Date).getTime()},$A:function(u){return A.call(u)},frameDoc:function(u){return u.contentWindow?u.contentWindow.document:u.contentDocument},frameWin:function(u){return u.contentWindow},getDocumentHeight:function(){return Math.max(!this.strict?b.body.scrollHeight:b.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!this.strict?b.body.scrollWidth:b.documentElement.scrollWidth,
this.getViewportWidth())},getViewportHeight:function(){return l?k?b.documentElement.clientHeight:b.body.clientHeight:self.innerHeight},getViewportWidth:function(){return l?k?b.documentElement.clientWidth:b.body.clientWidth:self.innerWidth},getViewport:function(){return{width:this.getViewportWidth(),height:this.getViewportHeight()}},ie:l,ie7:o,ie6:q,strict:k,safari:t,gecko:x,opera:n,borderBox:g};window.CC&&F.extend(F,window.CC);window.CC=F;if(!F.Util)F.Util={};F.util={};return F})();
(function(){var a=Array.prototype.slice;CC.extendIf(String.prototype,function(){var b=new RegExp("<script[^>]*>([\\S\\s]*?)<\/script>","img"),g=/<script[^>]*>([\S\s]*?)<\/script>/im,f=new RegExp("<style[^>]*>([\\S\\s]*?)</style>","img"),d=/<style[^>]*>([\S\s]*?)<\/style>/im,h=new RegExp("(?:^\\s*)|(?:\\s*$)","g");return{trim:function(){return this.replace(h,"")},escape:function(){return escape(this)},unescape:function(){return unescape(this)},checkSpecialChar:function(){if(this.search(/[%\'\"\/\\]/)!=
-1)return false;return true},truncate:function(k,n){k=k||30;n=n===undefined?"...":n;return this.length>k?this.slice(0,k-n.length)+n:this},stripScript:function(k){if(!k)return this.replace(b,"");return this.replace(b,function(n){k(n);return""})},stripStyle:function(k){if(!k)return this.replace(f,"");return this.replace(f,function(n){k(n);return""})},innerScript:function(){this.match(g);return RegExp.$1},innerStyle:function(){this.match(d);return RegExp.$1},execScript:function(){return this.replace(b,
function(k){k.match(g);window.execScript?execScript(RegExp.$1):window.eval(RegExp.$1);return""})},execStyle:function(){return this.replace(f,function(k){k.match(d);CC.loadStyle(RegExp.$1);return""})},camelize:function(){var k=this.split("-"),n=k.length;if(n==1)return k[0];for(var l=this.charAt(0)=="-"?k[0].charAt(0).toUpperCase()+k[0].substring(1):k[0],o=1;o<n;o++)l+=k[o].charAt(0).toUpperCase()+k[o].substring(1);return l}}}());CC.extendIf(Function.prototype,{bind:function(){var b=this,g=a.call(arguments,
1),f=arguments[0];return function(){return b.apply(f,g)}},bindAsListener:function(b){var g=this;return function(f){return g.call(b,f||window.event)}},bindRaw:function(b){var g=this;return function(){return g.apply(b,arguments)}},timeout:function(b,g){if(g)return setInterval(this,b||0);return setTimeout(this,b||0)}});CC.extendIf(Array.prototype,{remove:function(b){if(typeof b==="number"){if(b<0||b>=this.length)throw"Index Of Bounds:"+this.length+","+b;this.splice(b,1);return this.length}if(this.length>
0&&this[this.length-1]===b)this.pop();else{b=this.indexOf(b);b!=-1&&this.splice(b,1)}return this.length},indexOf:function(b){for(var g=0,f=this.length;g<f;g++)if(this[g]===b)return g;return-1},insert:function(b,g){return this.splice(b,0,g)},include:function(b){return this.indexOf(b)!=-1},clear:function(){this.splice(0,this.length)},clone:function(){for(var b=[],g=this.length-1;g>=0;g--)b[g]=this[g];return b}})})();
(function(){var a=window.CC;a.Cache={MAX_ITEM_SIZE:5,register:function(b,g,f){if(this[b])this[b][1]=g;else this[b]=[null,g];f!==undefined&&this.sizeFor(b,f)},get:function(b){b=this[b];if(b===undefined)return null;var g=b[1];b=b[0];if(b===null)return g();if(b.length>1)return b.pop();if(g)return g();return null},put:function(b,g){var f=this[b];if(f){(b=f[0])||(f[0]=b=[this.MAX_ITEM_SIZE]);b.length-1>=b[0]||b.push(g)}else this[b]=[[this.MAX_ITEM_SIZE,g]]},remove:function(b){this[b]&&delete this[b]},
sizeFor:function(b,g){var f=this[b];f||(this[b]=f=[[]]);f[0]||(f[0]=[]);f[0][0]=g}};a.Cache.register("div",function(){return a.$C("DIV")})})();
(function(){var a={},b={};CC.util.TypeConverter={reg:function(g,f){a[g]=f},get:function(g){var f=a[g];if(!f){f=this.create.apply(this,arguments);if(!f)throw"\u672a\u8bc6\u522b\u7684\u6570\u636e\u7c7b\u578b:"+g;a[g]=f}return f},getComparator:function(g){var f=b[g];if(!f){var d=this.get(g);f=b[g]=d?function(h,k){h=d(h);k=d(k);if(h>k)return 1;if(h<k)return-1;return 0}:function(h,k){if(h>k)return 1;if(h<k)return-1;return 0}}return f},create:function(g){var f=/[\$,%]/g,d;switch(g){case "":case undefined:d=
function(h){return h===null||h===undefined?h:h.toString()};break;case "string":d=function(h){return h===undefined||h===null?"":h.toString()};break;case "int":d=function(h){return h!==undefined&&h!==null&&h!==""?parseInt(h.toString().replace(f,""),10):""};break;case "float":d=function(h){return h!==undefined&&h!==null&&h!==""?parseFloat(h.toString().replace(f,""),10):""};break;case "bool":d=function(h){return h===true||h==="true"||h==1};break;case "date":d=function(h,k){if(!h)return"";if(CC.isDate(h))return h;
if(k){if(k==="timestamp")return new Date(h*1E3);if(k==="time")return new Date(parseInt(h,10));return Date.parseDate(h,k)}return(h=Date.parse(h))?new Date(h):null};break}return d}}})();
(function(){var a={"1c":["width","95%"],"2c":["width","45%"],"3c":["width","30%"],"4c":["width","20%"],"5c":["width","10%"],c:function(d,h){d.view.style.width=h+"%"},w:function(d,h){d.view.style.width=h},h:function(d,h){d.view.style.height=h},d:function(d,h){d.view.style.display=h},db:["display","block"],dib:["display","inline-block"],dh:["display","hidden"],np:["padding","0px"],nb:["border","0px"],fl:["float","left"],fr:["float","right"],cb:["clear","both"],tl:["textAlign","left"],tr:["textAlign",
"right"],tc:["textAlign","center"],p:function(d,h){d.view.style.padding=h},pl:function(d,h){d.view.style.paddingLeft=h},pr:function(d,h){d.view.style.paddingRight=h},pt:function(d,h){d.view.style.paddingTop=h},pb:function(d,h){d.view.style.paddingBottom=h},bd:function(d,h){d.view.style.border=h},bdl:function(d,h){d.view.style.borderLeft=h},bdr:function(d,h){d.view.style.borderRight=h},bdt:function(d,h){d.view.style.borderTop=h},bdb:function(d,h){d.view.style.borderBottom=h},z:function(d,h){d.view.style.zIndex=
h},lnl:["borderLeft","1px solid #CCC"],lnt:["borderTop","1px solid #CCC"],lnb:["borderBottom","1px solid #CCC"],lnr:["borderRight","1px solid #CCC"],lnx:["border","1px solid #CCC"],m:function(d,h){d.view.style.margin=h},ml:function(d,h){d.view.style.marginLeft=h},mr:function(d,h){d.view.style.marginRight=h},mt:function(d,h){d.view.style.marginTop=h},mb:function(d,h){d.view.style.marginBottom=h},pa:["position","absolute"],pr:["position","relative"],b:function(d,h){d.view.style.bottom=h},l:function(d,
h){d.view.style.left=h},r:function(d,h){d.view.style.right=h},t:function(d,h){d.view.style.top=h},of:function(d,h){d.view.style.overflow=h},oh:["overflow","hidden"],oa:["overflow","auto"],v:function(d,h){h=h.split("=");d.view.style[h[0]]=h[1]}},b=/\s+/,g=CC.borderBox,f;CC.util.CssParser=function(){};CC.extendIf(CC.util.CssParser.prototype,{def:function(d,h){var k=this.rules;if(!k)k=this.rules={};if(typeof d==="object")for(var n in d)k[n]=d[n];else k[d]=h;return this},parse:function(d,h){var k,n;h=
h.split(b);var l,o,q=this.rules,t,x;l=0;for(o=h.length;l<o;l++){n=h[l];t=n.indexOf(":");if(t>0){x=n.substring(t+1);x=x.replace(/,/g," ");n=n.substr(0,t)}else x=false;if(n.charAt(0)==="^"){n=n.substring(1);if(n.charAt(0)==="$"){if(!g)continue;n=n.substring(1)}n=q&&q[n]||a[n]||n;k||(k=[]);k.push(n);k.push(x)}else if(n.charAt(0)==="$"){if(g){n=n.substring(1);(n=q&&q[n]||a[n])&&this.applyRule(d,n,x)}}else{n=q&&q[n]||a[n]||n;this.applyRule(d,n,x)}}if(k&&k.length>0&&d.children){l=0;h=d.children;for(o=h.length;l<
o;l++){s=h[l];d=0;for(q=k.length;d<q;d+=2)this.applyRule(s,k[d],k[d+1])}}},applyRule:function(d,h,k){if(CC.isArray(h))d.setStyle(h[0],k||h[1]);else if(typeof h==="object")for(var n in h)d.setStyle(n,h[n]);else if(typeof h==="string")if(h.charAt(0)!=="."){if(h.indexOf(" ")<0)throw"CC.util.CssParser: Unsupported instruction '"+h+"'";this.parse(d,h)}else d.addClass(h.substring(1));else typeof h==="function"&&h(d,k,this)}});CC.util.CssParser.getParser=function(){f||(f=new CC.util.CssParser);return f}})();
(function(){var a=CC.Eventable=function(b){b&&CC.extend(this,b);CC.extend(this,a.prototype)};a.prototype={fire:function(b){__debug&&console.log("\u53d1\u9001:%s,%o,\u6e90:%o",b,arguments,this);if(this.events){var g=this.events[b];if(g){var f=CC.$A(arguments),d=f.length,h,k,n,l;f.shift();g._evtLocked=true;k=0;for(n=g.length;k<n;k++){l=g[k];if(!l.removed){if(l.args)f[d]=l.args;h=l.ds?l.cb.apply(l.ds,f):l.cb.apply(this,f);if(h===false)break}}g._evtLocked=false}}if(this.subscribers){k=0;for(n=this.subscribers.length;k<
n;k++){g=this.subscribers[k];g.fireSubscribe.apply(g,arguments)}}return h},on:function(b,g,f,d){if(!b||!g){__debug&&console.trace();throw"eid or callback can not be null";}if(!this.events)this.events={};var h=this.events[b];h||(h=this.events[b]=[]);h[h.length]={cb:g,ds:f,args:d};return this},un:function(b,g){if(!this.events)return this;if(g===undefined){delete this.events[b];return this}var f=this.events[b];if(f){if(f._evtLocked)f=this.events[b]=f.slice(0);for(b=0;b<f.length;b++){var d=f[b];if(d.cb==
g){f.remove(b);d.removed=true;break}}}return this},fireOnce:function(b){var g=this.fire.apply(this,arguments);this.un(b);return g},to:function(b){if(!this.subscribers)this.subscribers=[];if(!(this.subscribers.indexOf(b)>0)){this.subscribers.push(b);return this}}};a.prototype.fireSubscribe=a.prototype.fire})();
(function(){var a=CC.Event={},b=window.document,g=CC.opera,f=CC.chrome,d=CC.ie;new CC.Eventable;CC.extend(a,{BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,readyList:[],contentReady:false,noUp:function(h){a.stopPropagation(h||window.event);return false},noDef:function(h){a.preventDefault(h||window.event)},element:function(h){return h.srcElement||h.target},pageX:function(h){if(h.pageX==null&&h.clientX!=null){var k=b.documentElement,n=b.body;return h.clientX+(k&&k.scrollLeft||
n&&n.scrollLeft||0)-(k.clientLeft||0)}return h.pageX},pageY:function(h){if(h.pageY==null&&h.clientY!=null){var k=b.documentElement,n=b.body;return h.clientY+(k&&k.scrollTop||n&&n.scrollTop||0)-(k.clientTop||0)}return h.pageY},pageXY:function(h){if(h.pageX==null&&h.clientX!=null){var k=b.documentElement,n=b.body;return[h.clientX+(k&&k.scrollLeft||n&&n.scrollLeft||0)-(k.clientLeft||0),h.clientY+(k&&k.scrollTop||n&&n.scrollTop||0)-(k.clientTop||0)]}return[h.pageX,h.pageY]},which:function(h){if(!h.which&&
(h.charCode||h.charCode===0?h.charCode:h.keyCode))return h.charCode||h.keyCode},isLeftClick:function(h){return h.which&&h.which===1||h.button&&h.button===1},isEnterKey:function(h){return h.keyCode===13},isEscKey:function(h){return h.keyCode===27},getWheel:function(h){if(h.wheelDelta){delta=h.wheelDelta/120;if(g)delta=-delta}else if(h.detail)delta=-h.detail/3;return delta},stop:function(h){h.preventDefault&&h.preventDefault();h.stopPropagation&&h.stopPropagation();if(CC.ie){h.returnValue=false;h.cancelBubble=
true}},preventDefault:function(h){h.preventDefault&&h.preventDefault();h.returnValue=false},stopPropagation:function(h){h.stopPropagation&&h.stopPropagation();h.cancelBubble=true},toggle:function(h,k,n,l,o,q,t){h=CC.$(h);k=CC.$(k);var x=CC.display(k),B=x?l:n;o=x?o:q;CC.delClass(h,x?n:l);CC.addClass(h,B);CC.display(k,!x);if(t)h.innerHTML=o;h.title=o},observers:false,_observeAndCache:function(h,k,n,l){if(!this.observers)this.observers=[];if(h.addEventListener){this.observers.push([h,k,n,l]);h.addEventListener(k,
n,l)}else if(h.attachEvent){this.observers.push([h,k,n,l]);h.attachEvent("on"+k,n)}},unloadCache:function(){if(this.observers){for(var h=0;h<this.observers.length;h++){this.un.apply(this,this.observers[h]);this.observers[h][0]=null}this.observers=false}},on:function(h,k,n,l){l=l||false;if(k=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||h.attachEvent))k="keydown";this._observeAndCache(h,k,n,l);return this},un:function(h,k,n,l){h=CC.$(h);l=l||false;if(k=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||
h.detachEvent))k="keydown";if(h.removeEventListener)h.removeEventListener(k,n,l);else h.detachEvent&&h.detachEvent("on"+k,n);return this},setDragable:function(h,k,n,l,o,q){if(n){k||(k=h);var t=function(B){var A=B||window.event;if(a.isLeftClick(A)){if(!k.__ondraged){o&&o(A,k);k.__ondraged=true}if(l)if(!l(A,k))return false;B=A.clientX;A=A.clientY;var E=B-k._x,F=A-k._y;k._x=B;k._y=A;k.style.left=k.offsetLeft+E;k.style.top=k.offsetTop+F}else x(A)},x=function(B){if(k.__ondraged){if(q)q(B||window.event,
k);k.__ondraged=false}a.un(b,"mousemove",t);a.un(b,"mouseup",arguments.callee);a.un(b,"selectstart",a.noUp)};h.onmousedown=function(B){if(!k.unmoveable){B=B||window.event;var A=B.clientY;k._x=B.clientX;k._y=A;a.on(b,"mousemove",t);a.on(b,"selectstart",a.noUp);a.on(b,"mouseup",x)}}}else h.onmousedown=h.onmouseup=null},ready:function(h){this.readyList.push(h)},_onContentLoad:function(){if(!a.contentReady){a.contentReady=true;a.defUIReady&&a.defUIReady();for(var h=0;h<a.readyList.length;h++)a.readyList[h].call(window)}}});
CC.ready=function(){a.ready.apply(a,arguments)};b.addEventListener&&!g&&!f&&b.addEventListener("DOMContentLoaded",a._onContentLoad,false);d&&window==top&&function(){if(!a.contentReady){try{b.documentElement.doScroll("left")}catch(h){setTimeout(arguments.callee,0);return}a._onContentLoad()}}();g&&b.addEventListener("DOMContentLoaded",function(){if(!a.contentReady){for(var h=0;h<b.styleSheets.length;h++)if(b.styleSheets[h].disabled){setTimeout(arguments.callee,0);return}a._onContentLoad()}},false);
a.on(window,"load",a._onContentLoad)})();if(!window.console)window.console={};if(!window.tester)window.tester=window.fireunit||{};CC.extendIf(console,{debug:fGo,info:fGo,trace:fGo,log:fGo,warn:fGo,error:fGo,assert:function(a,b){if(a!==b){this.trace();throw"Assertion failed @"+a+" !== "+b;}},dir:fGo,count:fGo,group:fGo,groupEnd:fGo,time:fGo,timeEnd:fGo});
CC.extendIf(tester,{ok:function(a,b){if(typeof a==="function")a=a();if(typeof b==="function")b=b();if(a!=b){alert("assert failed in testing "+a+"=="+b);console.group("\u65ad\u8a00\u5931\u8d25:",a,b);console.error(a,b);console.trace();console.groupEnd()}},testDone:fGo});
CC.create("CC.util.JSONPConnector",null,{initialize:function(a){this.cfg=a},abort:function(){this.cleaned||this._clean()},setRequestHeader:fGo,getResponseHeader:fGo,open:function(a,b){if(b)this.url=b},send:function(a){var b=this.cfg||{},g=this.url||b.url,f=g.indexOf("?")>=0,d=b.win||window,h="jsonp_"+(+new Date+CC.uniqueID()),k=b.win?CC.frameDoc(d):document,n=k.createElement("script"),l=b.jsonp||"jsonp";k=k.getElementsByTagName("head")[0];var o=this;g+=f?"&"+l+"="+h:"?"+l+"="+h;a&&(g+=typeof a===
"string"?a:CC.queryString(a));n.type="text/javascript";b.charset&&(n.charset=b.charset);b.deffer&&(n.deffer=b.deffer);n.src=g;d[h]=function(){o._clean()};this._win=d;this._script=n;this._fn=h;this.cleaned=false;d[h]=function(){if(!o.cleaned){o._clean();o._fireState(4,200,arguments)}};n.onreadystatechange=n.onload=function(){var q=this.readyState;if(!o.cleaned&&(!q||q==="loaded"||q==="complete")){o._clean();o._fireState(4,-1)}};k.appendChild(n)},_clean:function(){if(!this.cleaned){try{this._win[this._fn]=
null;try{delete this._win[this._fn]}catch(a){}delete this._win;delete this._fn;this._script.onreadystatechange=null;this._script.parentNode.removeChild(this._script);delete this._script;delete this.cfg}catch(b){}this.cleaned=true}},_fireState:function(a,b,g){this.readyState=a;if(b!==undefined)this.status=b;this.onreadystatechange.apply(this,g)}});
(function(){var a=window.CC,b=a.Ajax=a.create();b.connect=function(g){g=new b(g);g.connect();return g};b.prototype={method:"GET",url:null,asynchronous:true,timeout:false,disabledComp:undefined,contentType:"application/x-www-form-urlencoded",msg:"\u6570\u636e\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019...",cache:true,success:function(g){g.invokeHtml()},displayPanel:null,initialize:function(g){a.extend(this,g);this.method=this.method.toUpperCase()},setOption:function(g){a.extend(this,g)},setMsg:fGo,_onTimeout:function(){if(!(this.xmlReq.readyState>=
4)){__debug&&console.log("ajax request timeout for "+this.url);this.abort();this._fire("timeout",this);this._close()}},closed:false,_close:function(){if(!this.closed){this.timeout&&clearTimeout(this._tid);if(this.onfinal)this.caller?this.onfinal.call(this.caller,this):this.onfinal.call(this,this);this._fire("final",this);this.disabledComp&&a.disable(this.disabledComp,false);this.json!==undefined&&delete this.json;this.xmlDoc!==undefined&&delete this.xmlDoc;this.text!==undefined&&delete this.text;
this.params=this.xmlReq=this.disabledComp=null;this.busy=0;this.closed=true}},abort:function(){if(this.xmlReq!==null){this.xmlReq.abort();this.aborted=true;this._close()}},_req:function(){if(!this.xmlReq)this.xmlReq=this.method==="JSONP"?new a.util.JSONPConnector(this):a.ajaxRequest()},_setHeaders:function(){this._req();if(this.method==="POST")this.xmlReq.setRequestHeader("Content-type",this.contentType+(this.encoding?"; charset="+this.encoding:""));var g=this.xmlReq;this.headers&&a.each(this.headers,
function(f,d){g.setRequestHeader(f,d)})},open:function(){this._req();this.busy=1;this._fire("open",this);if(this.timeout)this._tid=setTimeout(this._onTimeout.bind(this),this.timeout);this.disabledComp&&a.disable(this.disabledComp,true);var g=this.params,f=this.cache,d=this.url;if(g||f){var h=d.indexOf("?")>0;if(f)d=h?d+"&__uid="+ +new Date:d+"?__uid="+ +new Date;if(g){if(!h&&!f)d+="?";d=d+"&"+(typeof g==="string"?g:a.queryString(g))}}this.xmlReq.open(this.method,d,this.asynchronous)},send:function(g){this._fire("send",
this);this._setHeaders();this.xmlReq.onreadystatechange=this._onReadyStateChange.bindRaw(this);this.setMsg(this.msg);if(!g)g=this.data;if(g){if(typeof g==="object")g=a.queryString(g);this.xmlReq.send(g)}else this.xmlReq.send()},connect:function(g){if(this.busy)try{this.abort()}catch(f){__debug&&console.log(f)}this.open();this.send(g)},setRequestHeader:function(g,f){this._req();try{this.xmlReq.setRequestHeader(g,f)}catch(d){this._close();__debug&&console.log(d)}},getResponseHeader:function(g){return this.xmlReq.getResponseHeader(g)},
_fire:function(g){this.status=g;if(this.statuschange)this.statuschange.call(this.caller||this,g,this);b.fire("statuschange",g,this);this.fire("statuschange",g,this);if(b.fire.apply(b,arguments)!==false)if(this.fire.apply(this,arguments)!==false)return;return false},_onReadyStateChange:function(){var g=this.xmlReq;if(g.readyState===4)if(!this.aborted)if(this._fire("load",this)!==false){var f=this.success,d=this.failure;try{if(g.status==200){this.loaded=true;if(this._fire("success",this)===false)return false;
if(f)this.method==="JSONP"?f.apply(this.caller||this,arguments):f.call(this.caller||this,this)}else{g.status==0&&__debug&&console.error("\u62d2\u7edd\u8bbf\u95ee,\u786e\u8ba4\u662f\u5426\u8de8\u57df,",this.url);if(this._fire("failure",this)===false)return false;if(d)d.call(this.caller||this,this)}}catch(h){__debug&&console.error(h);this._close();throw h;}this._close()}},getText:function(){if(this.text)return this.text;this._fire("text",this.text=this.xmlReq.responseText,this);return this.text},getXmlDoc:function(){if(this.xmlDoc)return this.xmlDoc;
this._fire("xmlDoc",this.xmlDoc=this.xmlReq.responseXML.documentElement,this);return this.xmlDoc},getJson:function(){if(this.json)return this.json;var g;try{this.json=g=eval("("+this.getText()+");")}catch(f){__debug&&console.log("Internal server error : a request responsed with wrong json format:\n"+f+"\n"+this.getText());throw f;}this._fire("json",g,this);return this.json},invokeScript:function(){return eval(this.getText())},invokeHtml:function(){var g=[],f=[],d=this.getText().stripScript(function(h){g[g.length]=
h});f=[];d=d.stripStyle(function(h){f[f.length]=h.innerStyle()});f.join("").execStyle();if(this.displayPanel)a.$(this.displayPanel).innerHTML=d;g.join("").execScript();d=g=f=null}};a.Eventable.call(b.prototype);a.Eventable.call(b)})();
(function(a){var b=a.Eventable,g={},f=a.Cache,d=a.Event,h=1001,k=a.Base=function(m){if(m!==E)this.view=a.$(m)};k.find=k.byId=function(m){for(var p in g)if(g[p].id===m)return g[p];return null};k.findByCid=k.byCid=function(m){return g[m]};k.byDom=function(m,p,v){var z=p&&typeof p==="function",D;for(D=z&&v?v.view||v:p&&p.view||l;m&&m!==D;){if(m.cicyId)if((v=k.byCid(m.cicyId))&&!v.delegated)if(p)if(z){if(p(v))return v}else{if(v.pCt===p)return v}else return v;m=m.parentNode}return null};var n=a.Tpl;if(!n)n=
a.Tpl={};a.extend(n,{BLANK_IMG:window.BLANK_IMG||"http://bgjs.googlecode.com/svn/trunk/cicy/default/s.gif",$:function(m,p,v,z){var D=f.get(m);if(!D){p||(p=m);D=this[p];if(typeof D=="undefined")return null;p=f.get("div");p.innerHTML=v?v(D,z):D;D=p.removeChild(p.firstChild);f.put("div",p);f.put(m,D)}return D.cloneNode(true)},$$:function(m){return a.$$(this.$(m))},remove:function(m){f.remove(m);delete this[m]},forNode:function(m,p,v){if(p)m=a.templ(p,m,v);p=f.get("div");p.innerHTML=m;m=p.removeChild(p.firstChild);
f.put("div",p);return m},def:function(m,p){if(arguments.length>=3){p=a.$A(arguments);p.shift();p=p.join("")}this[m]=p;return this}});d.on(window,"unload",function(){var m=[];try{for(var p in g)m[m.length]=g[p];p=0;for(var v=m.length;p<v;p++)m[p].cacheId&&m[p].destroy()}catch(z){__debug&&console.log(z)}finally{g=null}});var l=window.document,o=l.defaultView,q={},t=/(-[a-z])/gi,x=function(m,p){return p.charAt(1).toUpperCase()},B=["vid","hid","hid","hid"],A=["vvi","dbl","dbi",""],E,F=window.Math,u=window.parseInt,
w=a.util.CssParser.getParser(),y={context:function(m){m.contexted&&this.release(m);var p=this.q;if(!p)this.q=p=[];p.length||d.on(l,"mousedown",this._getDocEvtHandler());p[p.length]=m;this._setCompEvtHandler(m,true);m.contexted=true;m.fire("contexted",true)},release:function(m,p){__debug&&console.assert(m.contexted,true);m.contexted=false;if(m.onContextRelease(p)!==false&&m.fire("contexted",false,p)!==false){this._setCompEvtHandler(m,false);this.q.remove(m);this.q.length||d.un(l,"mousedown",this._getDocEvtHandler())}else m.contexted=
true},releaseAll:function(m){var p=this.q;if(p){var v=p.length;if(m)var z=d.element(m);for(v=v-1;v>=0;v--)if(!z||!p[v].ancestorOf(z))this.release(p[v],m)}},_setCompEvtHandler:function(m,p){p?m.domEvent("mousedown",this._compEvtHandler):m.unEvent("mousedown",this._compEvtHandler)},_getDocEvtHandler:function(){var m=this.docEvtHd;if(!m)m=this.docEvtHd=this._docHandler.bindRaw(this);return m},_releaseFollower:function(m,p){var v=this.q;if(v){var z=v.length-1;if(z!==-1&&v[z]!==m)for(;z>=0;z--){if(v[z]===
m)break;this.release(v[z],p)}}},_compEvtHandler:function(m){y._releaseFollower(this,m);m&&d.stopPropagation(m)},_docHandler:function(m){this.releaseAll(m)}};a.extend(k.prototype,{type:"CC.Base",view:false,height:false,width:false,left:false,top:false,minW:0,minH:0,maxH:F.MAX,maxW:F.MAX,clickDisabled:false,pCt:false,eventable:false,initialize:function(m){m&&a.extend(this,m);this.eventable&&b.call(this);this.initComponent();this.autoRender&&this.render()},createView:function(){if(this.view){if(typeof this.view===
"string")this.view=a.$(this.view)}else{if(this.hasOwnProperty("template")||this.constructor.prototype.hasOwnProperty("template")||this.superclass&&this.superclass.hasOwnProperty("template")){this.view=this.template.charAt(0)==="<"?n.forNode(this.template,this):n.$(this.template);delete this.template}else this.view=n.$(this.type);if(!this.view)this.view=this.createView0(this.superclass)}if(!this.view)this.view=a.$C("DIV")},createView0:function(m){if(!m)return null;var p;if(p=m.hasOwnProperty("template")?
n.$(m.template):n.$(m.type))return p;return arguments.callee(m.superclass)},cacheId:E,__flied:E,strHtml:false,innerCS:false,cs:false,id:E,title:E,titleNode:false,hoverCS:false,icon:false,css:false,unselectable:false,disabled:false,tip:false,qtip:false,shadow:false,initComponent:function(){if(this.__flied===E){var m=this.cacheId="c"+a.uniqueID();g[m]=this;this.createView()}if(this.strHtml){this.html(this.strHtml);delete this.strHtml}this.innerCS&&this.addClass(this.innerCS);this.cs&&this.addClass(this.cs);
if(this.id&&!this.view.id)this.view.id=this.id;if(this.id===E)this.id="comp"+a.uniqueID();this.view.cicyId=m;if(this.title)if(this.titleNode){if(!this.titleNode.tagName)this.titleNode=this.dom(this.titleNode)}else this.titleNode=this.dom("_tle");this.icon&&this.setIcon(this.icon);this.clickCS&&this.bindClickStyle(this.clickCS);this.hoverCS&&this.bindHoverStyle(this.hoverCS);this.css&&this.cset(this.css);this.unselectable&&this.noselect();this.title&&this.setTitle(this.title);this.top!==false&&this.setTop(this.top);
this.left!==false&&this.setLeft(this.left);if(this.disabled){this.disabled=1;this.disable(true)}if(this.tip)this.setTip(this.tip===true?this.title:this.tip);this.qtip&&a.Util.qtip&&a.Util.qtip(this);if(this.shadow)this.shadow=a.ui.instance(this.shadow===true?"shadow":this.shadow)},__delegations:false,delegated:false,follow:function(m){var p=this.__delegations;if(!p)p=this.__delegations=[];m.delegated=true;p.push(m);if(!m.pCt)m.pCt=this;this.rendered&&!m.rendered&&m.render();return this},observes:false,
destroy:function(){if(this.shadow){this.shadow.destroy();this.shadow=false}this.contexted&&y.release(this);this.pCt&&!this.delegated?this.pCt.remove(this):this.del();if(this.cacheId!==E){delete g[this.cacheId];var m=this.observes,p,v,z;if(m){var D;p=0;for(v=m.length;p<v;p++){z=m[p];D=z[3]||this.view;if(D.removeEventListener)D.removeEventListener(z[0],z[2],true);else D.detachEvent&&D.detachEvent("on"+z[0],z[2])}this.observes=null}if(m=this.__delegations){p=0;for(v=m.length;p<v;++p){m[p].pCt=null;m[p].cacheId&&
m[p].destroy()}this.__delegations=null}this.view.cicyId=null;delete this.view;delete this.cacheId}},hidden:E,showTo:false,onRender:function(){if(this.hidden){this.hidden=E;this.display(false)}this.width!==false&&this.setWidth(this.width,true);this.height!==false&&this.setHeight(this.height,true);var m=this.showTo;if(m){m=a.$(m);delete this.showTo}if(m){if(m.view)m=m.view;m.appendChild(this.view)}if(m=this.__delegations)for(var p=0,v=m.length;p<v;p++)m[p].rendered||m[p].render();if(this.shadow){if(!this.getZ()){m=
this.shadow;delete this.shadow;this.trackZIndex();this.shadow=m}this.shadow.attach(this)}},rendered:false,render:function(){if(this.rendered||this.fireOnce("render")===false)return false;this.rendered=true;this.onRender();this.fireOnce("rendered");if(!this.hidden&&this.shadow){var m=this.shadow;(function(){m.reanchor().display(true)}).timeout(0)}},fire:fGo,fireOnce:fGo,un:fGo,on:function(){b.call(this)},hide:function(){return this.display(false)},show:function(){return this.display(true)},fly:function(m){m=
this.dom(m);this.__flied!==E&&this.__flied>0&&this.unfly();if(m)return a.fly(m);return null},unfly:function(){if(this.__flied!==E){this.view=null;this.blockMode=this.displayMode=1;this.width=this.top=this.left=this.height=false;this.__flied-=1;this.__flied===0&&f.put("flycomp",this)}},addClass:function(m){var p=this.view,v=p.className.replace(m,"").trim();v+=" "+m;p.className=v;return this},checkClass:function(m,p){if(m){var v=this.hasClass(m);if(p)v||this.addClass(m);else v&&this.delClass(m)}return this},
addClassIf:function(m){if(this.hasClass(m))return this;var p=this.view,v=p.className.replace(m,"").trim();v+=" "+m;p.className=v;return this},delClass:function(m){var p=this.view;p.className=p.className.replace(m,"").trim();return this},hasClass:function(m){return m&&(" "+this.view.className+" ").indexOf(" "+m+" ")!=-1},switchClass:function(m,p){this.delClass(m);this.addClass(p);return this},setClass:function(m){this.view.className=m;return this},trackZIndex:function(){if(this.zIndex!=h){h+=2;this.setZ(h)}return this},
setZ:function(m){this.fastStyleSet("zIndex",m);this.shadow&&this.shadow.setZ(m-1);this.zIndex=m;return this},$T:function(m){return this.view.getElementsByTagName(m)},dom:function(m){return a.$(m,this.view)},noUp:function(m,p){return this.domEvent(m||"click",d.noUp,true,null,p)},clear:a.ie?function(){for(var m=f.get("div"),p=this.view;p.firstChild;)m.appendChild(p.firstChild);m.innerHTML="";f.put("div",m);return this}:function(){for(var m=this.view;m.firstChild;)m.removeChild(m.firstChild);return this},
del:function(){this.view.parentNode&&this.view.parentNode.removeChild(this.view)},disabledCS:"g-disabled",displayMode:1,blockMode:1,display:function(m){if(m===E)return!this.hasClass(B[this.displayMode]);if(this.hidden!==!m){this.hidden=!m;m?this.onShow():this.onHide()}return this},onShow:function(){this.delClass(B[this.displayMode]);if(!this.displayMode||this.blockMode!==2)this.addClassIf(A[this.displayMode]);if(this.shadow){var m=this.shadow;(function(){m.reanchor().display(true)}).timeout(0)}},
onHide:function(){if(!this.hasClass(B[this.displayMode])){if(!this.displayMode||this.blockMode!==2)this.hasClass(A[this.displayMode])&&this.delClass(A[this.displayMode]);this.addClass(B[this.displayMode])}this.shadow&&this.shadow.display(false);this.contexted&&this.setContexted(false)},setBlockMode:function(m){this.blockMode=m;return this},setDisplayMode:function(m){this.displayMode=m;if(m===0)this.blockMode=0;return this},disable:function(m){if(arguments.length===0)return this.disabled;m=!!m;if(this.disabled!==
m){var p=this.disableNode||this.view;this.disabled=this.dom(p).disabled=m;this.disabledCS&&this.checkClass(this.disabledCS,m);m&&this.hoverCS&&this.hasClass(this.hoverCS)&&this.delClass(this.hoverCS);if(m&&p.tabIndex>=0){this._tmpTabIdx=p.tabIndex||0;p.tabIndex=-1}else if(this._tmpTabIdx){p.tabIndex=this._tmpTabIdx;delete this._tmpTabIdx}}return this},append:function(m){this.view.appendChild(m.view||m);return this},html:function(m,p,v){if(p){var z=[],D=[];m=m.stripScript(function(J){z[z.length]=J});
D=[];m=m.stripStyle(function(J){D[D.length]=J.innerStyle()});D.join("").execStyle();this.view.innerHTML=m;z.join("").execScript();v&&v.call(this);m=z=D=null;return this}(this.ct||this.view).innerHTML=m;return this},appendHtml:function(m,p){if(p)m="<"+p+">"+m+"</"+p+">";(this.ct||this.view).appendChild(a.Tpl.forNode(m));return this},appendText:function(m){(this.ct||this.view).appendChild(l.createTextNode(m));return this},appendTo:function(m){m.type?m.append(this.view):a.$(m).appendChild(this.view);
return this},insertAfter:function(m){var p=a.fly(m);m=p.view;var v=this.view,z=v.nextSibling;z?v.parentNode.insertBefore(m,z):v.parentNode.appendChild(m);p.unfly();return this},insertBefore:function(m){m=m.view||m;this.view.parentNode.insertBefore(m,this.view);return this},getZ:function(){return this.fastStyle("zIndex")|0},style:function(m,p){if(p===E)return this.getStyle(m);return this.setStyle(m,p)},getOpacity:function(){return this.getStyle("opacity")},setOpacity:function(m){this.view.style.opacity=
m==1?"":m<1.0E-5?0:m;return this},setStyle:function(m,p){if(m==="opacity")this.setOpacity(p);else{var v=this.view.style;v[m==="float"||m==="cssFloat"?v.styleFloat===E?"cssFloat":"styleFloat":m.camelize()]=p}return this},getStyle:function(){return o&&o.getComputedStyle?function(m){var p=this.view,v;if(m=="float")m="cssFloat";if(v=p.style[m])return v;if(p=o.getComputedStyle(p,"")){if(!(v=q[m]))v=q[m]=m.replace(t,x);return p[v]}return null}:function(m){var p=this.view,v;if(m=="opacity"){if(typeof p.style.filter==
"string")if(v=p.style.filter.match(/alpha\(opacity=(.*)\)/i)){v=parseFloat(v[1]);if(!isNaN(v))return v?v/100:0}return 1}else if(m=="float")m="styleFloat";if(!(v=q[m]))v=q[m]=m.replace(t,x);if(m=p.style[v])return m;if(p=p.currentStyle)return p[v];return null}}(),fastStyleSet:function(m,p){this.view.style[m]=p;return this},fastStyle:function(){return o&&o.getComputedStyle?function(m){var p=this.view,v;if(v=p.style[m])return v;if(p=o.getComputedStyle(p,""))return p[m];return null}:function(m){var p=
this.view,v;if(v=p.style[m])return v;if(p=p.currentStyle)return p[m];return null}}(),setIcon:function(m){var p=this.fly(this.iconNode||"_ico");this.iconCS&&this.addClassIf(this.iconCS);if(p){typeof m==="string"?p.addClass(m):p.display(m);p.unfly()}return this},setTip:function(m){if(this.view&&!this.qtip)this.view.title=m;this.tip=m;return this},getTitle:function(){return this.title},brush:false,setTitle:function(m){this.title=m;if(this.titleNode){if(!this.titleNode.tagName)this.titleNode=this.dom(this.titleNode)}else this.titleNode=
this.dom("_tle");if(this.titleNode)this.titleNode.innerHTML=this.brush?this.brush(m):m;if(this.tip&&this.view&&!this.qtip)this.view.title=m;if(this.qtip===true)this.qtip=m;return this},setWidth:function(m){this.setSize(m,false);return this},getWidth:function(m){if(m&&this.width!==false)return this.width;return this.getSize().width},setHeight:function(m){this.setSize(false,m);return this},getHeight:function(m){if(m&&this.height!==false)return this.height;return this.getSize().height},getOuterW:function(m){var p=
this.outerW;if(!m||p===E)this.outerW=p=(u(this.fastStyle("borderLeftWidth"),10)||0)+(u(this.fastStyle("borderRightWidth"),10)||0)+(u(this.fastStyle("paddingLeft"),10)||0)+(u(this.fastStyle("paddingRight"),10)||0);return p},getOuterH:function(m){var p=this.outerH;if(!m||p===E)this.outerH=p=(u(this.fastStyle("borderTopWidth"),10)||0)+(u(this.fastStyle("borderBottomWidth"),10)||0)+(u(this.fastStyle("paddingTop"),10)||0)+(u(this.fastStyle("paddingBottom"),10)||0);return p},getContentSize:function(m){var p=
this.getSize(m);return[p.width-this.getOuterW(m),p.height-this.getOuterH(m)]},setSize:function(m,p){if(m.width!==E){p=m.width;if(p!==false){if(p<this.minW)p=this.minW;if(p>this.maxW)p=this.maxW;this.fastStyleSet("width",a.borderBox?p+"px":F.max(p-this.getOuterW(),0)+"px");this.width=p}p=m.height;if(p!==false){if(p<this.minH)p=this.minH;if(p>this.maxH)p=this.maxH;if(p<0)m.height=p=0;this.fastStyleSet("height",a.borderBox?p+"px":F.max(p-this.getOuterH(),0)+"px");this.height=p}return this}if(m!==false){if(m<
this.minW)m=this.minW;if(m>this.maxW)m=this.maxW;this.fastStyleSet("width",a.borderBox?m+"px":F.max(m-this.getOuterW(),0)+"px");this.width=m}if(p!==false){if(p<this.minH)p=this.minH;if(p>this.maxH)p=this.maxH;this.fastStyleSet("height",a.borderBox?p+"px":F.max(p-this.getOuterH(),0)+"px");this.height=p}return this},setXY:function(m,p){if(a.isArray(m))if(m[0]!==false||m[1]!==false){if(m[0]!==false){this.fastStyleSet("left",m[0]+"px");this.left=m[0]}if(m[1]!==false){this.fastStyleSet("top",m[1]+"px");
this.top=m[1]}return this}if(m!==false||p!==false){if(m!==false){this.fastStyleSet("left",m+"px");this.left=m}if(p!==false){this.fastStyleSet("top",p+"px");this.top=p}}return this},setTop:function(m){this.setXY(false,m);return this},getTop:function(m){if(m&&this.top!==false)return this.top;return this.top=u(this.fastStyle("top"),10)||this.view.offsetTop},setLeft:function(m){this.setXY(m,false);return this},getLeft:function(m){if(m&&this.left!==false)return this.left;return this.left=u(this.fastStyle("left"),
10)||this.view.offsetLeft},xy:function(m){return[this.getLeft(m),this.getTop(m)]},absoluteXY:function(){var m,p,v;p=l.body||l.documentElement;v=this.view;if(v==p||!this.display())return[0,0];if(v.getBoundingClientRect){p=v.getBoundingClientRect();m=a.fly(l);v=m.getScroll();m.unfly();return[p.left+v.left,p.top+v.top]}var z=0,D=0;m=v;for(var J=this.fastStyle("position")=="absolute",G=a.fly(v);m;){z+=m.offsetLeft;D+=m.offsetTop;G.view=m;if(!J&&G.fastStyle("position")=="absolute")J=true;if(a.gecko){var I=
u(G.fastStyle("borderTopWidth"),10)||0,K=u(G.fastStyle("borderLeftWidth"),10)||0;z+=K;D+=I;if(m!=v&&G.fastStyle("overflow")!="visible"){z+=K;D+=I}}m=m.offsetParent}if(a.safari&&J){z-=p.offsetLeft;D-=p.offsetTop}if(a.gecko&&!J){G.view=p;z+=u(G.fastStyle("borderLeftWidth"),10)||0;D+=u(G.fastStyle("borderTopWidth"),10)||0}for(m=v.parentNode;m&&m!=p;){G.view=m;if(!a.opera||m.tagName!="TR"&&G.fastStyle("display")!="inline"){z-=m.scrollLeft;D-=m.scrollTop}m=m.parentNode}G.unfly();return[z,D]},absoluteX:function(){return this.absoluteXY()[0]},
absoluteY:function(){return this.absoluteXY()[1]},getSize:function(m){if(m&&this.width!==false&&this.height!==false)return{width:this.width,height:this.height};var p=this.view;m=F.max(p.offsetWidth,p.clientWidth);if(!m){m=u(this.fastStyle("width"),10)||0;a.borderBox||(m+=this.getOuterW())}p=F.max(p.offsetHeight,p.clientHeight);if(!p){p=u(this.fastStyle("height"),10)||0;a.borderBox||(p+=this.getOuterH())}return{width:m,height:p}},setBounds:function(m,p,v,z){this.setXY(m,p);return this.setSize(v,z)},
anchorPos:function(m,p,v,z,D,J){if(m.view){var G=m.absoluteXY(),I=m.getSize(true);m=[G[0],G[1],I.width,I.height]}I=this.getSize(true);G=I.width;I=I.height;var K=m[0],M=m[1],C=m[2];m=m[3];var H;H=p.charAt(0)==="l"?K-G:K+C;p=p.charAt(1)==="t"?M-I:M+m;if(v)if(v.charAt(0)==="h")H=v.charAt(1)==="l"?H-G:H+G;else p=v.charAt(1)==="u"?p-I:p+I;if(z){H+=z[0];p+=z[1]}if(D){z=a.getViewport();v=z.height;z=z.width;if(H<0){H=0;if(M+m>p&&M<p+I)p=M-I}if(H+G>z)H=M+m>p&&M<p+I?K-G:z-G;if(p<0&&M+m+I<=v)p=K+C>H&&K<H+G?
M+m:0;if(p+I>v&&M-I>=0)p=K+C>H&&K<H+G?M-I:v-I}G=[H,p];J&&this.setXY(G);return G},cset:function(m){w.parse(this,m);return this},clip:function(){var m=this.view;if(m._overflow)return this;this._overflow=m.style.overflow||"auto";if(this._overflow!=="hidden")m.style.overflow="hidden";return this},unclip:function(){if(!this._overflow)return this;this.view.style.overflow=this._overflow=="auto"?"":this._overflow;this._overflow=null;return this},copyViewport:function(m){m=a.$$(m);m.setXY(this.xy());m.setSize(this.getSize());
return this},focus:function(m){if(this.disabled)return this;var p=this.focusNode?this.dom(this.focusNode):this.view;if(m)(function(){try{p.focus()}catch(z){}}).timeout(m);else try{p.focus()}catch(v){}return this},cssText:function(m){if(m)if(typeof m=="string")for(var p=/\s?([a-z\-]*)\:\s?([^;]*);?/gi,v;(v=p.exec(m))!=null;)this.setStyle(v[1],v[2]);else if(typeof m=="object")for(p in m)this.setStyle(p,m[p]);else typeof m=="function"&&this.cssText(m.call());return this},noselect:function(){var m=this,
p=typeof this.unselectable,v=false;if(p!="undefined"&&p!="boolean"){v=true;m=this.fly(this.unselectable)}m.view.unselectable="on";m.noUp("selectstart");m.addClass("noselect");v&&m.unfly();return this},autoHeight:function(m,p){var v=this.getHeight();this.clip();this.view.style.height=1;setTimeout(function(){var z=u(this.view.scrollHeight,10);if(m)this.setHeight(v);else{this.setHeight(z);this.unclip();p&&p()}}.bind(this),0);return this},getScroll:function(){var m=this.view,p=l;if(m==p||m==p.body){if(a.ie&&
a.strict){m=p.documentElement.scrollLeft||p.body.scrollLeft||0;p=p.documentElement.scrollTop||p.body.scrollTop||0}else{m=window.pageXOffset||p.body.scrollLeft||0;p=window.pageYOffset||p.body.scrollTop||0}return{left:m,top:p}}else return{left:m.scrollLeft,top:m.scrollTop}},ancestorOf:function(m,p){m=m.view||m;var v=this.view;if(v.contains&&!a.safari)return v.contains(m);else if(v.compareDocumentPosition)return!!(v.compareDocumentPosition(m)&16);if(p===E)p=65535;m=m.parentNode;for(var z=l.body;m!=z&&
p>0&&m!==null;){if(m==v)return true;m=m.parentNode;p--}return false},domEvent:function(m,p,v,z,D,J){if(m=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||this.view.attachEvent))m="keydown";if(!this.observes)this.observes=[];var G=z||this;if(m==="mousedown"){var I=this;z=function(K){K=K||window.event;I.contexted||y.releaseAll(K);if(G.disabled){d.stop(K);return false}v&&d.stop(K);return p.call(G,K)}}else z=function(K){K=K||window.event;if(G.disabled){d.stop(K);return false}v&&
d.stop(K);return p.call(G,K)};if(D){D=this.dom(D);if(!D)return this;this.observes.push([m,p,z,D,J])}else{D=this.view;this.observes.push([m,p,z])}if(D.addEventListener)D.addEventListener(m,z,J);else D.attachEvent&&D.attachEvent("on"+m,z);return this},wheelEvent:function(m,p,v,z,D){a.ie||a.opera?this.domEvent("mousewheel",m,p,v,z,D):this.domEvent("DOMMouseScroll",m,p,v,z,D)},unEvent:function(m,p,v){if(m=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||this.view.attachEvent))m=
"keydown";var z=this.observes;if(z){v=v!==E?v.tagName?v:this.dom(v):this.view;for(var D=0,J=z.length;D<J;D++){var G=z[D];if(G[0]==m&&G[1]==p&&(G[3]==v||G[3]===E)){if(v.removeEventListener)v.removeEventListener(m,G[2],G[4]);else v.detachEvent&&v.detachEvent("on"+m,G[2]);z.remove(D);return this}}}},bindEnter:function(m,p,v,z){return this.domEvent("keydown",function(D){if(d.isEnterKey(D)){p&&d.stop(D);m.call(this,D)}},false,v,z)},bindAlternateStyle:function(m,p,v,z,D,J,G,I,K){var M=m+"Node",C=m+"Target";
I=I||this[M];var H=K||this[C];if(I){I=this.dom(I);delete this[M]}else I=this.view;if(H){H=this.dom(H);delete this[C]}else H=this.view;K=this;if(H==this.view){D=D||K[m+"Callback"];J=J||K[p+"Callback"]}this.domEvent(m,function(L){var N=false;if(D)N=D.call(this,L);N!==true&&a.addClass(H,v)},z,G,I);this.domEvent(p,function(L){var N=false;if(J)N=J.call(this,L);N!==true&&a.delClass(H,v)},z,G,I);return this},bindHoverStyle:function(m,p,v,z,D,J,G){return this.bindAlternateStyle("mouseover","mouseout",m||
this.hoverCS,p,v||this.onMouseHover,z||this.onMouseOff,D||this,J,G)},bindFocusStyle:function(m,p,v,z,D,J,G){return this.bindAlternateStyle("focus","blur",m,p,v||this.onfocusHover,z||this.onfocusOff,D||this,J,G)},bindClickStyle:function(m,p,v,z,D,J,G){this.bindAlternateStyle("mousedown","mouseup",m,p,v,z,D,J,G);this.domEvent("mouseout",function(){this.docked||this.delClass(m)});return this},contexted:false,setContexted:function(m){if(this.contexted!==m)m?y.context(this):y.release(this);return this},
onContextRelease:function(){this.hide()},$$:function(m){(m=a.$$(m,this.view))&&this.follow(m);return m},attr:function(m,p,v){if(m=this.dom(m))return m=a.attr(m,p,v)},setCloseable:function(m){this.closeable=m;var p=this.fly(this.closeNode||"_cls");p&&p.display(m).unfly();return this},offsetsTo:function(m){var p=this.absoluteXY();m=a.fly(m);var v=m.absoluteXY();m.unfly();return[p[0]-v[0],p[1]-v[1]]},scrollIntoView:function(m,p){var v=m?m.view||m:a.$body.view,z=this.getHiddenAreaOffsetVeti(v);if(z!==
false)v.scrollTop=z;if(p){z=this.getHiddenAreaOffsetHori(m);if(z!==false)v.scrollLeft=z}return this},scrollChildIntoView:function(m,p){this.fly(m).scrollIntoView(this.view,p).unfly();return this},getHiddenAreaOffsetVeti:function(m){var p=m.view||m,v=this.view,z=this.offsetsTo(p);m=u(p.scrollTop,10);z=z[1]+m;v=v.offsetHeight;var D=z+v;p=p.clientHeight;var J=m+p;if(v>p||z<m)return z;else if(D>J){D-=p;if(m!=D)return D}return false},getHiddenAreaOffsetHori:function(m){var p=m.view||m,v=this.view;m=u(p.scrollLeft,
10);var z=this.offsetsTo(p)[0]+m;v=v.offsetWidth;p=p.clientWidth;var D=z+v,J=m+p;if(v>p||z<m)return z;else if(D>J){D-=p;if(D!=m)return D}return false}});k.create=function(m,p){if(typeof m==="string")p=new k[m](p);else{p=new k;p.initialize(m)}return p};k.applyOption=function(m,p){m=a.fly(m);m.initialize(p);m.render();m.unfly()};a.$$=function(m,p){if(!m||m.view)return m;var v="c"+a.uniqueID();if(!p){if(m=a.$(m)){m=new k(m);m.cacheId=v;g[v]=m}return m}if(m=p&&p.view?a.$(m,p.view):a.$(m,p)){m=new k(m);
m.cacheId=v;g[v]=m}return m};f.register("flycomp",function(){var m=new k;m.__flied=0;return m});a.fly=function(m){if(m)if(typeof m=="string")m=a.$(m);else if(m.view){if(m.__flied!==E)m.__flied+=1;return m}if(!m){console.trace();throw"Node not found.";}var p=f.get("flycomp");p.view=m;return p};if(a.ie){k.prototype.getOpacity=function(){var m=this.view;if(m.filters[0])return parseFloat(m.filters[0].Opacity/100);if(value=(this.getStyle(m,"filter")||"").match(/alpha\(opacity=(.*)\)/))if(value[1])return parseFloat(value[1])/
100;return 1};k.prototype.setOpacity=function(m){var p=this.view.style;p.zoom=1;p.filter=(p.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(m==1?"":" alpha(opacity="+m*100+")");return this}}a.ui={ctypes:{},def:function(m,p){this.ctypes[m]=p;return this},getCls:function(m){return this.ctypes[m]},instance:function(m,p){if(typeof m==="string")return new this.ctypes[m](p);if(!m)return k.create();if(m.cacheId)return m;p=m.ctype;if(!p)return k.create(m);return new this.ctypes[p](m)}};a.ui.def("base",function(m){return k.create(m)});
d.defUIReady=function(){a.$body=a.$$(l.body);if(l.body.lang!=="zh")l.body.lang="zh"}})(CC);
CC.util.BrushFactory={floatBrush:function(a,b){var g=Math.pow(10,a);switch(b){case "%":g*=100;var f=g/100;return function(d){return Math.round(d*g)/f+"%"};default:return function(d){return Math.round(d*g)/g}}},date:function(a){a||(a="yy/mm/dd");return function(b){return CC.dateFormat(b,a)}},get:function(a){if(!this.cache)this.cache={};var b=this.cache[a];if(!b)switch(a){case ".xx":b=CC.util.BrushFactory.floatBrush(2);this.reg(a,b);break;case ".xx%":b=CC.util.BrushFactory.floatBrush(2,"%");this.reg(a,
b);break}return b},reg:function(a,b){if(!this.cache)this.cache={};this.cache[a]=b}};CC.util.d2d={};CC.util.d2d.Point=function(a,b){this.x=a||0;this.y=b||0};CC.util.d2d.Rect=function(a,b,g,f){if(arguments.length===4){this.l=a||0;this.t=b||0;this.w=g||0;this.h=f||0}else{this.l=a[0];this.t=a[1];this.w=a[2];this.h=a[3]}this.valid=true};
CC.extend(CC.util.d2d.Rect.prototype,{valid:true,l:0,t:0,w:0,h:0,isEnter:function(a){if(this.valid){var b=a.x;a=a.y;return(b=b>=this.l&&b<=this.l+this.w&&a>=this.t&&a<=this.t+this.h)?this:false}return false},qdAt:function(a,b){a=Math.floor(a-this.l-this.w/2);b=Math.floor(b-this.t-this.h/2);if(a>0)return b>0?1:b<0?4:5;else if(a<0)return b>0?2:b<0?3:7;else{if(b>0)return 6;else if(b<0)return 8;return 0}},update:fGo,toString:function(){return this.valueOf()+""},valueOf:function(){return[this.l,this.t,
this.w,this.h]}});
CC.create("CC.util.d2d.RectZoom",CC.util.d2d.Rect,function(a){var b=window.Math,g=b.max,f=b.min;return{pZoom:null,initialize:function(d){this.valid=true;d&&CC.extend(this,d);d=CC.delAttr(this,"rects");this.rects=[];if(d)for(var h=0,k=d.length;h<k;h++)this.add(d[h])},prepare:fGo,getRects:function(){return this.rects},add:function(d,h){d.pZoom&&d.pZoom.remove(d);this.rects.push(d);h&&this.update();d.pZoom=this;return this},remove:function(d,h){delete d.pZoom;this.rects.remove(d);h&&this.update();return this},
contains:function(d){for(var h=false,k,n=0,l=this.rects,o=l.length;n<o;n++){k=l[n];if(k===d){h=this;break}if(k.contains)if(h=k.contains(d))break}return h},isEnter:function(d){if(this.valid&&a.isEnter.call(this,d)){var h,k=this.rects,n=k.length,l;for(h=0;h<n;h++)if(l=k[h].isEnter(d))return l}return false},union:function(){var d,h=this.rects,k=h.length,n,l=[],o=[],q=[],t=[];if(k===0)l=o=q=t=0;else{for(d=0;d<k;d++){n=h[d];l.push(n.t);o.push(n.t+n.h);q.push(n.l);t.push(n.l+n.w)}q=f.apply(b,q);t=g.apply(b,
t);l=f.apply(b,l);o=g.apply(b,o)}this.l=q;this.t=l;this.w=t-q;this.h=o-l},update:function(){this.clear();this.prepare();var d,h=this.rects,k=h.length;for(d=0;d<k;d++)h[d].update();this.union()},clear:fGo}});
CC.create("CC.util.d2d.ComponentRect",CC.util.d2d.Rect,{z:-1,initialize:function(a,b){this.comp=a;this.valid=true;a.ownRect=this;b&&this.update()},update:function(){if(this.hidden){this.l=this.t=this.w=this.h=0;this.z=-1}else{var a=this.comp,b=a.getSize(),g=a.absoluteXY();this.z=a.getZ();this.l=g[0];this.t=g[1];this.w=b.width;this.h=b.height}},destroy:function(){delete this.comp.ownRect;this.comp=null}});
CC.create("CC.util.AsynchronizeQueue",null,{openEvt:"open",finalEvt:"final",initialize:function(a){this.waitQueue=[];this.requestQueue=[];a&&CC.extend(this,a);this.connectorKeys={};this.connectors={};this.max=0},join:function(a){this.waitQueue.push(a);a.on(this.openEvt,this.getConnectorBinder(this.openEvt));this.max++;var b=CC.uniqueID().toString();this.connectorKeys[a]=b;this.connectors[b]=a;if(this.onincrease)this.onincrease.call(this.caller?this.caller:this,a,this);return b},out:function(a){if(this.waitQueue.indexOf(a)>=
0){this.waitQueue.remove(a);a.un(this.openEvt,this.getConnectorBinder(this.openEvt));this.onOut(a)}else if(this.requestQueue.indexOf(a)>=0){this.requestQueue.remove(a);a.un(this.finalEvt,this.getConnectorBinder(this.finalEvt));this.onOut(a)}},getConnector:function(a){return this.connectors[a]},isConnectorBusy:function(a){return(a=this.getConnector(a))&&a.busy},isConnectorLoaded:function(a){return(a=this.getConnector(a))&&a.loaded},onOut:function(a){delete this.connectors[CC.delAttr(a,this.connectorKeys)];
if(this.ondecrease)this.ondecrease.call(this.caller?this.caller:this,a,this);if(this.waitQueue.length==0&&this.requestQueue.length==0&&this.onempty){this.onempty.call(this.caller?this.caller:this,this);this.max=0}},getConnectorBinder:function(a){var b=this.connectorBinders;if(!b)b=this.connectorBinders={};var g=b[a];if(!g){switch(a){case this.finalEvt:g=this.onConnectorFinal.bindAsListener(this);break;case this.openEvt:g=this.onConnectorOpen.bindAsListener(this);break}if(g)b[a]=g}return g},onConnectorFinal:function(a){if(this.onfinal)this.onfinal.call(this.caller?
this.caller:this,a,this);this.out(a)},onConnectorOpen:function(a){this.waitQueue.remove(a);this.requestQueue.push(a);if(this.requestQueue.length===1)if(this.onfirstopen)this.onfirstopen.call(this.caller?this.caller:this,a,this);if(this.onopen)this.onopen.call(this.caller?this.caller:this,a,this);a.on(this.finalEvt,this.getConnectorBinder(this.finalEvt))}});
CC.create("CC.util.Tracker",null,{max:20,initialize:function(a){this.area=[];a&&CC.extend(this,a)},track:function(a){var b=this.area;b.indexOf(a)!==-1&&b.remove(a);b.push(a);b.length>this.max&&b.pop();__debug&&console.log("\u8bb0\u5f55:",a)},isValid:fGo,validCaller:null,pop:function(){for(var a=this.validCaller||this,b=this.area,g=b.length-1;g>=0;g--){__debug&&console.log("\u62b9\u9664:",this.isValid.call(a,b[g]),b[g]);if(this.isValid.call(a,b[g]))return b[g];b.pop()}},remove:function(a){this.area.remove(a)},
size:function(){return this.area.length}});
(function(){var a=window.CC,b=a.Base,g=b.prototype,f=a.ui,d=a.Event;a.layout={};a.layout.def=function(l,o){this[l]=o;return this};a.create("CC.ui.Item",b,{});a.ui.def("item",a.ui.Item);a.create("CC.layout.Layout",null,{ct:false,items:false,layoutOnChange:false,deffer:false,initialize:function(l){l&&a.extend(this,l);(l=a.delAttr(this,"ct"))&&this.attach(l)},beforeAdd:fGo,itemCS:false,add:function(l,o){l.cacheId||(l=this.ct.instanceItem(l));var q=l.lyInf;if(q)o&&a.extend(q,o);else l.lyInf=q=o||{};this.beforeAdd(l,
q);this.itemCS&&l.addClassIf(this.itemCS);this.ct.add(l);if(this.isUp()){this.layoutOnChange?this.doLayout():this.layoutChild(l);l.rendered||l.render()}return this},isUp:function(){return!this.invalidate&&this.ct.rendered},display:function(l,o){l.display(o);this.layoutOnChange&&this.doLayout()},doLayout:function(){if(this.isUp())if(this.ct.hidden){__debug&&console.log(this,"\u5bb9\u5668\u5904\u4e8e\u9690\u85cf\u72b6\u6001,\u672a\u7acb\u5373\u5e03\u5c40..");this.defferArgs=arguments}else if(this.deffer!==
false){var l=a.$A(arguments),o=this;(function(){o.ct&&o.onLayout.apply(o,l)}).timeout(this.deffer)}else this.onLayout.apply(this,arguments)},cfgFrom:function(l){return l.lyInf||{}},insert:function(){this.layoutOnChange&&this.doLayout.bind(this).timeout(0)},layoutChild:fGo,remove:function(){this.layoutOnChange&&this.doLayout.bind(this).timeout(0)},fromArray:function(l){var o=this.ct,q=o.itemCls,t,x=o.itemCfg||false;if(typeof q==="string")q=f.ctypes[q];var B=this.invalidate;this.invalidate=true;for(var A=
0,E=l.length;A<E;A++){t=l[A];if(!t.cacheId){if(!t.ctype&&x)t=a.extendIf(t,x);t=o.instanceItem(t,q,true)}this.add(t)}this.invalidate=B;this.isUp()&&this.doLayout()},ctCS:false,wrCS:false,attach:function(l){this.ct=l;if(l.deffer!==undefined)this.deffer=l.deffer;this.ctCS&&l.addClass(this.ctCS);this.wrCS&&l.wrapper.addClass(this.wrCS);if(this.items){this.fromArray(this.items);delete this.items}if(l.items){this.fromArray(l.items);delete l.items}return this},detach:function(){if(this.ct)this.wrapper=this.ct=
null;return this},onLayout:function(){for(var l=0,o,q=this.ct.children,t=q.length;l<t;l++){o=q[l];this.layoutChild(o);o.rendered||o.render()}}});var h=a.layout.Layout.prototype,k=a.create(a.layout.Layout,{doLayout:function(){h.doLayout.call(this);if(this.rendered)this.doLayout=fGo}});a.layout.def("default",k);a.create("CC.ui.ContainerBase",b,{children:null,eventable:true,ct:null,minH:0,minW:0,maxH:65535,maxW:65535,itemCls:a.ui.Item,autoRender:false,items:false,array:false,initialize:function(){g.initialize.apply(this,
arguments);if(this.array){this.fromArray(this.array);delete this.array}},keyEvent:undefined,useContainerMonitor:false,cancelClickBubble:false,clickEvent:false,selectionProvider:false,connectionProvider:false,initComponent:function(){g.initComponent.call(this);this.keyEvent&&this.bindKeyInstaller();this.useContainerMonitor&&this.clickEvent&&this.bindClickInstaller();this.children=[];this.createLayout();this.selectionProvider&&this.getSelectionProvider();this.connectionProvider&&this.getConnectionProvider()},
layout:"default",lyCfg:false,createLayout:function(){if(typeof this.layout==="string"){var l=this.lyCfg||{};l.ct=this;this.layout=new a.layout[this.layout](l);this.lyCfg&&delete this.lyCfg}else this.layout.attach(this)},ct:false,createView:function(){g.createView.call(this);if(this.ct){if(typeof this.ct==="string")this.ct=this.dom(this.ct)}else this.ct=this.view;if(!this.ct)this.ct=this.view;this.wrapper=this.ct==this.view?this:this.$$(this.ct)},destroyed:false,destroy:function(){this.destroyed=true;
this.destroyChildren();var l=this.bndActs,o;if(l)for(;l.length>0;){o=l[0];this.unEvent(o[0],o[2],o[3]);l.remove(0)}this.layout.detach();this.wrapper=this.ct=null;g.destroy.call(this)},onRender:function(){g.onRender.call(this);this.layout.doLayout()},_addNode:function(l,o){o===undefined?this.ct.appendChild(l):this.ct.insertBefore(this.ct.childNodes[o],l)},_removeNode:function(l){l.parentNode.removeChild(l)},add:function(l){l.cacheId||(l=this.instanceItem(l));if(this.fire("beforeadd",l)!==false&&this.beforeAdd(l)!==
false){this.onAdd.apply(this,arguments);this.afterAdd(l);this.fire("add",l)}return this},__click:false,onAdd:function(l){this.children.push(l);if(l.pCt){if(l.pCt!==this){l.pCt.remove(l);l.pCt=this}}else l.pCt=this;this._addNode(l.view);!this.useContainerMonitor&&this.clickEvent&&this.installItemInnerClickEvent(l,true)},installItemInnerClickEvent:function(l,o){if(o){__debug&&console.assert(l.__ctClickData,undefined);o=this.clickEvent===true?"mousedown":this.clickEvent;var q=this.clickEventNode?l.dom(this.clickEventNode):
l.view;l.domEvent(o,this.clickEventTrigger,this.cancelClickBubble,null,q);l.__ctClickData=q===this.view?o:[o,q]}else{o=l.__ctClickData;a.isArray(o)?l.undomEvent(o[0],this.clickEventTrigger,this.cancelClickBubble,null,o[1]):l.undomEvent(o,this.clickEventTrigger,this.cancelClickBubble,null);delete l.__clickProxy}},beforeAdd:fGo,afterAdd:fGo,ctClickTrigger:function(l,o){!l.disabled&&!l.clickDisabled&&this.fire("itemclick",l,o)},clickEventTrigger:function(l){var o=this.pCt;this.clickDisabled||o.fire("itemclick",
this,l)},remove:function(l){l=this.$(l);if(l.delegated){this.__delegations.remove(l);l.view.parentNode&&l.view.parentNode.removeChild(l.view)}else if(this.fire("beforeremove",l)!==false&&this.beforeRemove(l)!==false){this.onRemove(l);this.fire("remove",l)}return this},beforeRemove:fGo,onRemove:function(l){l.__clickProxy&&this.installItemInnerClickEvent(l,false);l.pCt=null;this.children.remove(l);this._removeNode(l.view)},removeAll:function(){var l,o=this.children;for(this.invalidate();o.length>0;){l=
o[0];this.remove(l)}this.validate()},destroyChildren:function(){var l=this.children;this.invalidate();for(var o=l.length-1;o>=0;o--)l[o].destroy();this.destroyed||this.validate()},$:function(l){if(l===null||l===undefined||l===false)return null;if(l.tagName)return b.byDom(l,this);if(typeof l==="number")return this.children[l];if(l.view)return l;for(var o=this.children,q=0,t=o.length;q<t;q++)if(o[q].id==l)return o[q];return null},getChildFromEvent:function(l){return this.$(d.element(l))},onShow:function(){g.onShow.call(this);
var l=this.layout;if(l.defferArgs){__debug&&console.log(this,"\u5bb9\u5c40\u663e\u793a\u65f6\u5e03\u5c40..",l.defferArgs);l.doLayout.apply(l,l.defferArgs);l.defferArgs=false;if(this.shadow)(function(){this.shadow.reanchor().display(true)}).bind(this).timeout(l.deffer||0)}},indexOf:function(l){l=this.$(l);return!l?-1:this.children.indexOf(l)},size:function(){return this.children.length},contains:function(l){l.cacheId||(l=this.$(l));return l.pCt===this},insertBefore:function(l,o){o!==undefined?this.insert(this.indexOf(o),
l):g.insertBefore.call(this,l)},_insertBefore:function(l,o){this.ct.insertBefore(l,o)},insert:function(l,o){if(o.pCt===this){this.indexOf(o)<l&&l--;this.children.remove(o);this.onInsert(l,o)}else if(this.fire("beforeadd",o)!==false&&this.beforeAdd(o)!==false){if(o.pCt&&o.rendered){o.pCt.remove(o);o.pCt=this}this.onInsert(l,o);this.fire("add",o)}return this},onInsert:function(l,o){this.children.insert(l,o);(l=this.children[l+1])?this._insertBefore(o.view,l.view):this._addNode(o.view)},clear:function(){for(var l=
this.children,o=0,q=l.length;o<q;o++)this.remove(l[0]);return this},swap:function(l,o){var q=this.children,t=this.indexOf(l),x=this.indexOf(o);l=q[t];o=q[x];q[t]=o;q[x]=l;l=l.view;o=o.view;if(l.swapNode)l.swapNode(o);else{q=o.parentNode;t=o.nextSibling;if(t==l)q.insertBefore(l,o);else if(o==l.nextSibling)q.insertBefore(o,l);else{l.parentNode.replaceChild(o,l);q.insertBefore(l,t)}}return this},sort:function(l){var o=this.children;l===undefined?o.sort():o.sort(l);l=document.createDocumentFragment();
for(var q=0,t=o.length;q<t;q++)l.appendChild(o[q].view);this.ct.appendChild(l);return this},reverse:function(){var l=this.children;l.reverse();for(var o=document.createDocumentFragment(),q=0,t=l.length;q<t;q++)o.appendChild(l[q].view);this.ct.appendChild(o);return this},filter:function(l,o){o=o||window;a.each(this.children,function(){this.display(l.call(o,this))});return this},each:function(l,o){var q,t,x,B=this.children;q=0;for(x=B.length;q<x;q++){t=B[q];if(l.call(o||t,t,q)===false)return t}},parentOf:function(l,
o){if(!l)return false;if(l.pCt==this)return true;var q=this;return a.eachH(l,o||"pCt",function(){if(this==q)return 1})==true},fromArray:function(l,o){o=o||this.itemCls;if(typeof o==="string")o=a.ui.ctypes[o];for(var q,t=this.itemCfg||false,x=0,B=l.length;x<B;x++){q=l[x];if(!q.cacheId){if(!q.ctype&&t)q=a.extendIf(q,t);q=this.instanceItem(q,o,true)}this.add(q)}return this},instanceItem:function(l,o,q){if(!o){o=this.itemCls;if(typeof o==="string")o=a.ui.ctypes[o]}l||(l={});if(!l.cacheId){if(!q&&this.itemCfg)l=
a.extendIf(l,this.itemCfg);l.pCt=this;l=l.ctype?f.instance(l):new (o||a.ui.Item)(l);if(l.array&&l.children){l.fromArray(l.array);delete l.array}}return l},bndActs:false,itemAction:function(l,o,q,t,x,B){t=t||this;var A=function(E){var F=E.target||E.srcElement;if((B===undefined||F.tagName===B)&&F!==this.view)if(F=this.$(F))return F.disabled?false:o.call(t,F,E)};if(!this.bndActs)this.bndActs=[];this.bndActs.push([l,o,A,x]);this.domEvent(l,A,q,null,x);x=A=null;return this},unItemAction:function(l,o,q){for(var t=
this.bndActs,x=0,B=t.length;x<B;x++){var A=t[x];if(A[0]===l&&A[1]===o&&A[3]===q){q!==undefined&&(q.tagName||this.dom(q));this.unEvent(l,A[2],A[3]);t.remove(x);return this}}return this},bindKeyInstaller:function(){if(this.keyEvent===undefined)this.keyEvent=true;var l=this.keyEvent===true?"keydown":this.keyEvent,o=this.keyEventNode=this.keyEventNode?this.dom(this.keyEventNode):this.ct;if(o.tabIndex===-1){o.tabIndex=0;o.hideFocus="on"}this.domEvent(l,this._onKeyPress,this.cancelKeyBubble,null,o);return this},
bindClickInstaller:function(){this.itemAction(this.clickEvent===true?"mousedown":this.clickEvent,this.ctClickTrigger,this.cancelClickBubble)},_onKeyPress:function(l){!this.disabled&&this.fire("keydown",l)!==false&&this.onKeyPressing(l)},onKeyPressing:fGo,focus:function(l){if(this.disabled)return this;var o=this.keyEventNode||this.ct;if(l!==undefined)(function(){try{o.focus()}catch(t){}}).timeout(0);else try{o.focus()}catch(q){}return this},validate:function(){this.layout.invalidate=false;this.layout.doLayout();
return this},invalidate:function(){this.layout.invalidate=true;return this},doLayout:function(){!this.layout.invalidate&&this.rendered&&this.layout.doLayout.apply(this.layout,arguments);return this},autoHeight:function(){var l=this.ct;this.setSize(this.getWidth(true)+l.scrollWidth-l.clientWidth,this.getHeight(true)+l.scrollHeight-l.clientHeight);return this},center:function(l){var o,q=l?l.view?l.view:l:this.pCt?this.pCt.view:this.view.parentNode;if(!q)q=document.body;if(q==document.body||q==document.documentElement){o=
a.getViewport();l=[0,0]}else{q=a.fly(q);o=q.getSize();l=q.absoluteXY();q.unfly()}q=(o.height-this.height)/2|0;this.setXY(Math.max(l[0]+((o.width-this.width)/2|0),0),Math.max(l[1]+q-q/2|0,0));return this},byId:function(l,o,q){var t=[],x=null,B=this.children,A=this.children[0],E=0;o||(o="id");if(q)x=[];for(;A;){if(A[o]===l){if(!q)return A;x[x.length]=A}A.children&&A.children.length>0&&t.push(A);A=B[++E];if(!A)if(A=t.pop()){B=A.children;E=0;A=B[0]}}return x},eachH:function(l){var o=this.children,q,t=
0,x=0,B=[];for(q=o[0];q;){q.children&&B.push(q);t++;if(l.call(q,x,t)===false)break;q=o[++x];if(!q)if(q=B.pop()){x=0;o=q.children;q=o[0]}}},scrollor:false,getScrollor:function(){if(this.scrollor)return this.scrollor;for(var l=a.strict?document.documentElement:document.body,o=this.ct,q=a.fly(o);o&&o!==l;){q.view=o;if(q.fastStyle("overflow")!=="visible"){q.unfly();return o}o=o.parentNode}q.unfly();return o?o:this.ct}});k=a.ui.ContainerBase;var n=k.prototype;n.find=n.byId;f.def("ct",k);a.Tpl.def("CC.ui.Panel",
'<div class="g-panel"></div>');a.create("CC.ui.Panel",k,function(l){return{ct:"_wrap",deffer:false,syncWrapper:true,insets:false,initComponent:function(){var o=false,q=false,t=false,x=false;if(this.width!==false){o=this.width;this.width=false}if(this.height!==false){q=this.height;this.height=false}if(this.left!==false){t=this.left;this.left=false}if(this.top!==false){x=this.top;this.top=false}if(this.insets){var B=this.insets;B[4]=B[0]+B[2];B[5]=B[1]+B[3]}l.initComponent.call(this);if(this.insets){B=
this.insets;this.wrapper.setXY(B[3],B[0])}if(o!==false||q!==false)this.setSize(o,q);if(t!==false||x!==false)this.setXY(t,x)},getWrapperInsets:function(){var o=this.insets;if(!o){o=this.wrapper;this.insets=o=[parseInt(o.fastStyle("top"),10)||0,parseInt(o.fastStyle("right"),10)||0,parseInt(o.fastStyle("bottom"),10)||0,parseInt(o.fastStyle("left"),10)||0];o[4]=o[0]+o[2];o[5]=o[1]+o[3]}return o},getClientSize:function(o,q){var t;if(this.wrapper.view!==this.view&&this.syncWrapper){t=this.getWrapperInsets();
o=o===false?o:Math.max(o-t[5],0);q=q===false?q:Math.max(q-t[4],0)}else{o=o===false?o:Math.max(o-this.getOuterW(),0);q=q===false?q:Math.max(q-this.getOuterH(),0)}return[o,q]},onSetSize:function(o,q){var t=this.getClientSize(o,q),x=this.wrapper;x!==this&&this.syncWrapper&&x.setSize(t[0],t[1]);this.fire("resized",t[0],t[1],o,q);this.doLayout(t[0],t[1],o,q)},setSize:function(o,q,t){var x=this.width,B=this.height;if(!t){x=x===false?o:x===o?false:o;B=B===false?q:B===q?false:q}if(x!==false||B!==false){l.setSize.call(this,
x,B);if(x!==false)x=this.width;if(B!==false)B=this.height;this.onSetSize(x,B)}return this},setXY:function(o,q){if(a.isArray(o)){q=o[1];o=o[0]}var t=0,x=0;if(o!==this.left&&o!==false||q!==this.top&&q!==false){if(o!==this.left&&o!==false){this.fastStyleSet("left",o+"px");t=o-this.left;this.left=o}else o=false;if(q!==this.top&&q!==false){this.fastStyleSet("top",q+"px");x=q-this.top;this.top=q}else q=false;if(o!==false||q!==false)this.fire("reposed",o,q,t,x)}return this}}});f.def("panel",a.ui.Panel)})();
(function(){function a(C){C=C||window.E;l.stop(C);return false}function b(){if(w){if(x.ownRect)if(w.contains(x.ownRect)){G=x.ownRect.valid;x.ownRect.valid=false}w.update()}}function g(C){x=this;__debug&&console.group("\u62d6\u653e"+this);__debug&&console.log("beforedrag");if((!this.beforedrag||this.beforedrag(C)!==false)&&this.fire("beforedrag",C)!==false){p||(p=this);if(p!==this&&p.beforedrag)if(p.beforedrag(C)===false){p=x=false;return}F=x.absoluteXY();B=A=l.pageXY(C);l.stop(C);if(!z){z=true;v||
(v=this);if(!v.movesb)v.movesb=false;if(!p.drag)p.drag=false;l.on(q,"mouseup",k).on(q,"mousemove",h).on(q,"selectstart",a)}b();if(__debug&&w)console.log("\u5f53\u524dzoom:",this.dragZoom||w)}else x=false}function f(){var C=E;C[0]=A[0]-B[0];C[1]=A[1]-B[1];if(J){var H=J;if(C[0]<H[1])C[0]=H[1];else if(C[0]>H[0])C[0]=H[0];if(C[1]<H[3])C[1]=H[3];else if(C[1]>H[2])C[1]=H[2]}}function d(){if((m=w.isEnter(y))&&m.comp!==x){if(t!==m.comp){if(t!==null){if(__debug)console.log("\u79bb\u5f00:",t.title||t);v.sbout&&
v.sbout(t,x,I)}t=m.comp;if(t.disabled)t=null;else{if(__debug)console.log("\u8fdb\u5165:",t.title||t);v.sbover&&v.sbover(t,x,I)}}t&&v.sbmove&&v.sbmove(t,I)}else if(t!==null){if(__debug)console.log("\u79bb\u5f00:",t.title||t);v.sbout&&v.sbout(t,x,I);t=null}}function h(C){if(u!==-1){I=C||o.E;A=l.pageXY(C);y.x=A[0];y.y=A[1];f();if(!u){__debug&&console.log("dragstart       mouse x,y is ",A,"dxy:",E);if(p.dragstart)if(p.dragstart(C,x)===false){u=-1;return}u=true}if((p.drag===false||p.drag(C)!==false)&&
w)d();l.stop(C)}}function k(C){if(x){C=C||o.E;if(z){l.un(q,"mouseup",arguments.callee).un(q,"mousemove",h).un(q,"selectstart",a);if(u&&u!==-1){__debug&&console.log("dragend         mouse delta x,y is ",E,",mouse event:",C);if(t!==null){v.sbdrop&&v.sbdrop(t,x,C);if(__debug)console.log(x.toString(),"\u4e22\u5728",t.title||t,"\u4e0a\u9762")}p.dragend&&p.dragend(C,x)}t=null;if(w){w.clear();D=false;w=null}m=null;u=z=false}__debug&&console.log("afterdrag");p.afterdrag&&p.afterdrag(C);x.fire("afterdrag",
C);if(G!==undefined){x.ownRect.valid=G;G=undefined}x=null;v=p=J=false;I=null;__debug&&console.groupEnd()}}var n=window.CC;n.util.dd={};var l=n.Event,o=window,q=o.document,t=null,x=null,B,A,E=[0,0],F,u=false,w,y=new n.util.d2d.Point,m,p,v=false,z=false,D=false,J=false,G=undefined,I,K=n.util.dd.Mgr={zmCache:{root:new n.util.d2d.RectZoom},installDrag:function(C,H,L,N,O){if(H){C.draggable=true;if(O)(O=C.dom(O)||O)&&C.domEvent("mousedown",function(Q){var P=l.element(Q);if(P===O||P.id===O)K.startDrag(this,
Q)},false,null,L);else C.domEvent("mousedown",g,false,null,L);if(N)C.beforedrag=function(){p=v=N}}else{C.draggable=false;C.unEvent("mousedown",g,L||C.dragNode)}},startDrag:function(C,H){g.call(C,H)},setSource:function(C){x=C;return this},setDragHandler:function(C){v=C;return this},setDropHandler:function(C){p=C;return this},setHandler:function(C){v=p=C;return this},setZoom:function(C,H){(w=C)&&H&&w.update();return this},setBounds:function(C){J=C;return this},getBounds:function(){return J},getZoom:function(){return w},
getIMXY:function(){return B},getIEXY:function(){return F},getDXY:function(){return E},getXY:function(){return A},getSource:function(){return x},getTarget:function(){return t},update:function(){w&&w.update();return this},isDragging:function(){return u},resizeHelper:{resizeCS:"g-resize-ghost",maskerCS:"g-resize-mask",applyResize:function(C,H){this.resizing=C;this.applyLayer(C);this.applyMasker(C,H)},applyLayer:function(C){var H=this.layer;if(!H)H=this.layer=n.Base.create({view:n.$C("DIV"),autoRender:true,
cs:this.resizeCS,hidden:true});C?H.appendTo(q.body):H.del();H.display(C);return this},applyMasker:function(C,H){var L=this.masker;if(!L)L=this.masker=n.Base.create({view:n.$C("DIV"),autoRender:true,cs:this.maskerCS,hidden:true,unselectable:true});C&&n.ie&&L.setSize(n.getViewport());C?L.appendTo(q.body):L.del();L.display(C);H!==undefined&&L.fastStyleSet("cursor",H);return this}}};n.extendIf(n.Base.prototype,{beforedrag:false,dragstart:false,dragend:false,afterdrag:false,drag:false,sbover:false,sbout:false,
sbdrop:false,sbmove:false});n.create("CC.util.d2d.ContainerDragZoom",n.util.d2d.RectZoom,{filter:false,getViewportEl:function(){return this.ct.getScrollor()},prepare:function(){var C=this.getViewportEl(),H=C.clientHeight,L=C.scrollTop,N=K.getSource(),O=this;__debug&&console.group("\u5bb9\u5668"+this.ct.id+"\u62d6\u653e\u57df:",this);var Q=this;this.ct.each(function(P,S){if(this!==N)if(!O.filter||O.filter(this)){P=this.view;var R=P.offsetTop;if(R+P.offsetHeight-L>0)if(R-L-H<0){Q.add(new n.util.d2d.ComponentRect(this));
__debug&&console.log("CC.util.d2d.ContainerDragZoom:\u52a0\u5165\u77e9\u57df:",S)}else return false}});__debug&&console.groupEnd()},clear:function(){this.rects.clear()},addComp:function(C){if(n.isArray(C))for(var H=0,L=C.length;H<L;H++)this.addComp(C[H]);else this.add(new n.util.d2d.ComponentRect(C))}});n.ui.def("ctzoom",n.util.d2d.ContainerDragZoom);var M=n.ui.ContainerBase.prototype;n.create("CC.util.dd.Indicator",n.ui.ContainerBase,{hidden:true,template:n.ie?'<table class="g-float-tip g-clear g-openhand"><tr><td><table class="tipbdy"><tr><td id="_tle" class="important_txt"></td></tr><tr><td id="_msg" class="important_subtxt"></td></tr></table></td></tr></table>':
'<div class="g-float-tip g-clear g-openhand"><div class="tipbdy"><div id="_tle" class="important_txt"></div><div id="_msg" class="important_subtxt"></div></div></div>',shadow:{ctype:"shadow",inpactY:-1,inpactH:5},setMsg:function(C,H){if(C!==false){if(!this.msgNode)this.msgNode=this.dom("_msg");this.msgNode.innerHTML=C}if(H!==undefined){if(!this.titleNode)this.titleNode=this.dom("_tle");this.titleNode.innerHTML=H}this.shadow&&this.shadow.resize()},prepare:function(C,H){if(C===undefined)C=15;if(H===
undefined)H=-10;this.rendered||this.render();var L=K.getIMXY();C+=L[0];H+=L[1];this.initX=C;this.initY=H;this.setXY(C,H);this.show();K.resizeHelper.applyMasker(true);K.resizeHelper.masker.addClass("g-openhand");this.appendTo(document.body)},setXY:function(){M.setXY.apply(this,arguments);this.shadow&&this.shadow.repos();return this},reanchor:function(){this.setXY(this.initX+E[0],this.initY+E[1])},end:function(){K.resizeHelper.applyMasker(false);K.resizeHelper.masker.delClass("g-openhand");this.hide().del()}});
n.ui.def("ddindicator",n.util.dd.Indicator);K.getIndicator=function(C){var H=this.indicator;if(!H)H=this.indicator=n.ui.instance(n.extend({ctype:"ddindicator"},C));return H}})();
(function(){var a=CC.util.dd.Mgr,b=a.resizeHelper,g;CC.create("CC.util.dd.Portable",null,{dragNode:"_drag",floatingCS:"g-portal-float",srcPlaceholdCS:"g-portal-srchold",ctPlaceholdCS:"g-portal-ct-hold",indicatorCS:"g-portal-indicator",ieOfpCs:"g-portal-ie-ofp",miniCtHolderH:100,initialize:function(f){f&&CC.extend(this,f)},bind:function(f){return a.installDrag(f,true,this.getDragNode(f),this)},getDragNode:function(f){return f.dragNode||this.dragNode},createZoom:fGo,dragstart:function(f,d){g=undefined;
a.setZoom(this.createZoom(d),true);b.applyMasker(true);this.freeSource(d,true);d.insertBefore(this.getSrcPlacehold());__debug&&console.log("portal zoom tree:",a.getZoom())},drag:function(){var f=a.getDXY(),d=this._initOff;a.getSource().setXY(f[0]+d[0],f[1]+d[1])},sbmove:function(f){var d=f.ownRect,h=a.getXY();d=d.qdAt(h[0],h[1]);if(f.placeholdCt||d===3||d===4||d===8){if(!g){g=true;this._wayFor(f,true)}}else if(g===undefined||g){g=false;this._wayFor(f,false)}},sbout:function(){g=undefined},dragend:function(f,
d){this.getIndicator().del();this._currHold&&this._applyHold(d,this._currHold,g);b.applyMasker(false,"");this.getSrcPlacehold().del();this.freeSource(d,false);this.destroyCtPlaceholds();delete this._currHold},getSrcPlacehold:function(){return this.placehold||(this.placehold=this.createPlacehold(this.srcPlaceholdCS))},getIndicator:function(){return this.indicator||(this.indicator=this.createPlacehold(this.indicatorCS))},createPlaceholdForCt:function(f){var d=this.createPlacehold();d.placeholdCt=f;
d.setHeight(Math.max(this.miniCtHolderH,f.getHeight()-this.getSrcPlacehold(this.ctPlaceholdCS).getHeight()));d.appendTo(f.ct);if(!this.emptyCtHolds)this.emptyCtHolds=[];this.emptyCtHolds.push(d);return d},destroyCtPlaceholds:function(){if(this.emptyCtHolds){for(var f=0,d=this.emptyCtHolds,h=d.length;f<h;f++){delete d[f].placeholdCt;d[f].destroy();d[f]=null}delete this.emptyCtHolds}},createPlacehold:function(f){return CC.ui.instance({ctype:"base",cs:f})},freeSource:function(f,d){if(d){var h=f.view,
k=h.offsetParent,n=this._initOff=f.offsetsTo(k);if(CC.ie){k=CC.fly(k);var l=k.fastStyle("position");if(l!=="relative"||l!=="absolute"){this._ofPnt=k.view;k.addClass(this.ieOfpCs).unfly()}}f.fastStyleSet("left",n[0]+"px").fastStyleSet("top",n[1]+"px").fastStyleSet("width",h.offsetWidth+"px").fastStyleSet("position","absolute")}else{f.fastStyleSet("left","").fastStyleSet("top","").fastStyleSet("position","").fastStyleSet("width","");if(CC.ie&&this._ofPnt){CC.fly(this._ofPnt).delClass(this.ieOfpCs).unfly();
delete this._ofPnt}}f.checkClass(this.floatingCS,d)},_applyHold:function(f,d,h){if(d.placeholdCt){d.placeholdCt.add(f);d.hide()}else{var k=d.pCt;d=k.indexOf(d);h?k.insert(d,f):k.insert(d+1,f)}},_wayFor:function(f,d){var h=this.getIndicator();d?f.insertBefore(h):f.insertAfter(h);if(this._currHold!==f)this._currHold=f}})})();
(function(){var a=CC.ui.ContainerBase.prototype;CC.create("CC.util.ProviderBase",null,{initialize:function(b){this.inited=true;b&&CC.extend(this,b)},setTarget:function(b){this.t=b},each:function(){this.t.each.apply(this.t,arguments)}});CC.util.ProviderFactory={create:function(b,g,f){var d=b+"Provider",h=b.toLowerCase()+"Provider",k="CC.util."+d;CC.create(k,g||CC.util.ProviderBase,f);a["get"+d]=function(n,l){l=this[h];if(!l||l===true||!l.inited){var o=CC.getObjectLinkedValues(this,h,true);n&&o.insert(0,
n);n={};l=false;for(var q=0,t=o.length;q<t;q++){var x=o[q];if(x===true&&!l)l=CC.attr(window,k);if(typeof x==="string"&&n.ctype===undefined)n.ctype=x;else if(typeof x==="function"&&!l)l=x;else CC.extendIf(n,x)}if(!l&&!n.ctype)l=l=CC.attr(window,k);l=this[h]=l?new l(n):CC.ui.instance(n);l.setTarget(this)}return l}}}})();
CC.util.ProviderFactory.create("Connection",null,{indicatorDisabled:false,subscribe:false,reader:false,ajaxCfg:false,setTarget:function(){CC.util.ProviderBase.prototype.setTarget.apply(this,arguments);this.initConnection()},initConnection:function(){this.createSyncQueue();this.ajaxCfg&&this.ajaxCfg.url&&this.connect()},createSyncQueue:function(){this.syncQueue=new CC.util.AsynchronizeQueue({caller:this,onempty:this.onConnectorsFinish,onfirstopen:this.onConnectorFirstOpen})},defaultLoadSuccess:function(a){if(this.t.fire("connection:defdataload",
a,this)!==false){var b=this.loadType;b==="html"?this.defaultDataProcessor(b,a.getText()):this.defaultDataProcessor(b,a.getJson())}},loadType:"json",defaultDataProcessor:function(a,b){switch(a){case "html":this.t.wrapper.html(b,true);break;default:a=this.t.layout||this.t;if(this.reader)typeof this.reader==="string"?a.fromArray(CC.util.DataTranslator.get(this.reader).read(b,this.t)):a.fromArray(this.reader.read(b,this.t));else a.fromArray(b);break}},_setConnectorMsg:function(a){this.caller.getIndicator().setTitle(a)},
getIndicator:function(a){if(this.indicator&&this.indicator.cacheId)return this.indicator;return this.createIndicator(a)},connect:function(a,b){var g=this.ajaxCfg;if(g){if(a)g.url=a}else g={url:a||this.url};g.caller=this;b&&CC.extend(g,b);if(!g.success){if(g.caller!==this)throw"\u5982\u679c\u4f7f\u7528\u9ed8\u8ba4\u5904\u7406,ajaxCfg\u7684caller\u987b\u4e3a\u5f53\u524d\u7684connection provider";g.success=this.defaultLoadSuccess}!this.indicatorDisabled&&!this.indicator&&this.getIndicator();return this.bindConnector(g)},
getConnectionQueue:function(){return this.syncQueue},createIndicator:function(a){var b=this.indicator||this.t.indicator;a||(a={});a.target=this.t;a.targetLoadCS=this.loadCS;if(typeof b=="function")a=new b(a);else{if(typeof b==="string"){if(!a.ctype)a.ctype=b}else typeof b==="object"&&CC.extendIf(a,b);if(!a.ctype)a.ctype="loading";a=CC.ui.instance(a)}this.indicator=a;this.t.follow(a);return a},bindConnector:function(a){var b=this.createConnector(a),g=this.syncQueue.join(b);this.subscribe&&b.to(this.t);
b.url=CC.templ(this.t,a.url);b.connect();return g},createConnector:function(a){return new CC.Ajax(a)},onConnectorsFinish:function(a){this.t.fire("connection:connectorsfinish",this,a);this.indicatorDisabled||this.getIndicator().stopIndicator()},onConnectorFirstOpen:function(a){this.t.fire("connection:connectorsopen",this,a);this.indicatorDisabled||this.getIndicator().markIndicator()}});
CC.util.ProviderFactory.create("Selection",null,function(a){var b=CC.Event,g={isValid:function(f){return!f.hidden&&!f.disabled}};return{mode:1,tracker:false,UP:b.UP,DOWN:b.DOWN,selectedIndex:-1,autoscroll:true,autoFocus:true,selectedCS:"selected",unselectable:false,initialize:function(){a.initialize.apply(this,arguments);if(this.tracker===true)this.tracker=new CC.util.Tracker(g)},setMode:function(f){this.selectAll(false);this.mode=f;return this},setTarget:function(f){f.keyEvent===undefined&&f.bindKeyInstaller();
a.setTarget.apply(this,arguments);f.on("itemclick",this.itemSelectionTrigger,this).on("keydown",this.navigateKey,this).on("remove",this.onItemRemoved,this);if(this.selected!==undefined){var d=this.selected;delete this.selected;this.select(d)}},setSelected:function(f,d,h,k){d?this.select(f,h,k):this.unselect(f);return this},itemSelectionTrigger:function(f,d){this.unselectable||(this.mode?this.select(f,false,d):this.setSelected(f,!this.isSelected(f),false,d))},onItemRemoved:function(f){if(f===this.selected){this.decorateSelected(f,
false);this.select(null)}else if(f===this.previous)this.previous=null;this.tracker&&this.tracker.remove(f)},navigateKey:function(f){var d=f.keyCode;if(d===this.UP){this.pre();b.stop(f)}else if(d===this.DOWN){this.next();b.stop(f)}else return this.defKeyNav(f)},defKeyNav:fGo,getSelection:function(){var f=this,d=[];f.t.each(function(){f.isSelected(this)&&d.push(this)});return d},decorateSelected:function(f,d){var h=this.selectedCS;h&&f.checkClass(h,d)},select:function(f,d,h){if(this.unselectable||this.disabled)return this;
var k=this.t;if(!k.rendered){k.on("rendered",function(){k.selectionProvider.select(f)});return this}f=this.t.$(f);if(!f)return this.selectAll(false);if(f.disabled)return this;if((this.forceSelect||!this.isSelected(f))&&this.t.fire("select",f,this,h)!==false){this.onSelectChanged(f,true,h);this.onSelect(f,d,h);this.t.fire("selected",f,this,h)}return this},unselect:function(f){f=this.t.$(f);this.onSelectChanged(f,false);return this},onSelect:function(f,d){this.autoFocus&&this.t.wrapper.focus();!d&&
this.autoscroll&&f.scrollIntoView(this.t.getScrollor());f.onselect&&f.onselect()},onSelectChanged:function(f,d){if(this.hasChanged(f,d)){var h=this.selected,k=this.previous;f&&this.decorateSelected(f,d);if(this.mode)if(d){h&&this.decorateSelected(h,false);this.previous=h;this.selected=f;this.selectedIndex=this.t.indexOf(f)}else{if(f===h){this.selected=null;this.selectedIndex=-1}}else if(d){this.previous=h;this.selected=f}else if(h===f){this.previous=null;this.selected=k}else if(f===k&&k)this.previous=
null;this.tracker&&h&&d&&this.tracker.track(h);this.t.fire("selectchange",f,h,this);if(__debug){console.group("selectchanged data");console.log("\u5f53\u524d\u9009\u62e9:",this.selected);console.log("\u524d\u4e00\u4e2a\u9009\u62e9:",this.previous);console.groupEnd()}}},hasChanged:function(f,d){return!(f===this.selected&&d)||!(f&&this.isSelected(f)===d)},isSelected:function(f){return!f.hidden&&f.hasClass(this.selectedCS)},isSelectable:function(){return!this.unselectable},setSelectable:function(f){this.unselectable=
!f},canNext:function(f){return!f.disabled&&!f.hidden},canPre:function(f){return!f.disabled&&!f.hidden},getStartIndex:function(){return this.selectedIndex},getNext:function(){for(var f=this.getStartIndex()+1,d=this.t.children,h=d.length;f<=h-1&&!this.canNext(d[f]);)f++;if(f>=0&&f<=h-1)return d[f];return null},getPre:function(){for(var f=this.getStartIndex()-1,d=this.t.children,h=d.length;f>=0&&!this.canPre(d[f]);)f--;if(f>=0&&f<=h-1)return d[f];return null},next:function(){var f=this.getNext();f&&
this.select(f);return f},pre:function(){var f=this.getPre();f&&this.select(f);return f},selectAllInner:function(f){var d=this;this.t.each(function(){d.setSelected(this,f,true)})},selectAll:function(f){if(this.mode&&!f){this.selected&&this.unselect(this.selected);return this}this.selectAllInner(f);return this},selectOpp:function(){var f=this;this.t.each(function(){f.setSelected(this,!f.isSelected(this),false)})}}});
CC.util.ProviderFactory.create("Validation",null,{errorCS:"g-form-error",focusOnError:true,decorateValidation:function(a,b){if(b)b.checkClass(b.errorCS||this.errorCS,!a)},validator:fGo,validateAll:function(a){var b=this,g=[],f;this.each(function(){f=b.validate(this,g,a);if(f!==true){if(g.length===1&&b.focusOnError)try{this.focus()}catch(d){}if(f===null)return false}});return g.length?g:true},validate:function(a,b,g){b||(b=[]);var f;f=this.validator(a,b,g);if(this.t.fire("validation:start",a,b,g)===
false)f=null;if(b.length>0){if(f!==null)f=false}else f=true;this.notifyValidation(!!f,a,b,g);return f},notifyValidation:function(a,b,g,f){this.decorateValidation(a,b,g,f);this.t.fire(a?"validation:success":"validation:failed",b,g,f,this);return this},isInvalid:function(a,b){var g=[];return this.validate(a,g,b)===true?false:g}});
CC.util.ProviderFactory.create("Store",null,{enableIndicator:true,modifyUrl:false,addUrl:false,delUrl:false,updateIdOnAdd:true,shareParams:false,setupUrlFromItem:true,submitModify:true,isResponseOk:function(a){return CC.util.StoreProvider.isResponseOk&&CC.util.StoreProvider.isResponseOk(a)||true},mappingUrl:function(a,b){if(a){if(this.shareParams)a=CC.templ(this.shareParams,a,2,true);if(b&&this.setupUrlFromItem)a=CC.templ(b,a,2,true)}return a},getDelUrl:function(a){return this.mappingUrl(this.delUrl,
a)},getDelQuery:function(a){var b="";if(a){b=this.itemQueryTempl||"";if(this.shareParams)b=CC.templ(this.shareParams,b,2,true);if(b)b=CC.templ(a,b)}if(this.shareParams){if(b)b+="&";b+=CC.queryString(this.shareParams)}return b},getSaveUrl:function(a,b){return this.mappingUrl(b?this.addUrl:this.modifyUrl,a)},onSaveFail:fGo,beforeDel:function(a){return this.t.getValidationProvider().isInvalid(a,"del")===false},del:function(a){if(a&&this.isNew(a)){a.pCt.remove(a);a.destroy()}else this.beforeDel(a)!==
false&&this.t.fire("store:beforedel",a,this)!==false&&this.onDel(a);return this},delAll:function(){var a=this;this.each(function(){a.del(this)})},delSelection:function(){var a=this;CC.each(this.t.getSelectionProvider().getSelection(),function(){a.del(this)})},onDel:function(a){this.t.getConnectionProvider().connect(this.getDelUrl(a),{method:"POST",data:this.getDelQuery(a),caller:this,success:function(b){if(this.isResponseOk(b)){this.afterDel(a);this.t.fire("store:afterdel",a,b,this)}else b.failure.call(b.caller,
b)},failure:function(b){this.onDelFail(a,b);this.t.fire("store:delfail",a,b,this)}})},onDelFail:fGo,afterDel:function(a){if(a){a.pCt.remove(a);a.destroy()}},save:function(a){var b=this.isNew(a);this.isModified(a)&&this.beforeSave(a,b)!==false&&this.t.fire("store:beforesave",a,b,this)!==false&&this.onSave(a,b);return this},each:function(a){var b=this;this.filterChanged?this.t.each(function(){if(b.isNew(this)||b.isModified(this))a.apply(this,arguments)}):CC.util.StoreProvider.prototype.each.apply(this,
arguments)},saveAll:function(a){if(!a)if(this.t.getValidationProvider().validateAll()!==true)return this;var b=this;this.each(function(){b.save(this,true)});return this},createNew:function(a,b){a=this.t.instanceItem(a);this.decorateNew(a,true);(this.t.layout||this.t).add(a);b&&a.scrollIntoView(this.t.getScrollor());return a},beforeSave:function(a){return this.t.getValidationProvider().isInvalid(a,"save")===false},onSave:function(a,b){this.t.getConnectionProvider().connect(this.getSaveUrl(a,b),{method:"POST",
caller:this,data:this.queryString(a,this.shareParams),success:function(g){if(this.isResponseOk(g)){this.decorateModified(a,false);b&&this.decorateNew(a,false);this.afterSave(a,b,g);this.t.fire("store:aftersave",a,b,g,this)}else g.failure.call(g.caller,g)},failure:function(g){this.onSaveFail(a,b,g);this.t.fire("store:savefail",a,b,g,this)}})},afterSave:function(a,b,g){if(b&&this.updateIdOnAdd)a.id=this.getCreationId(g)},getCreationId:function(a){return(a.getText()||"").trim()},decorateNew:function(a,
b){if(a)a.newed=b;return this},decorateModified:function(a,b){if(a)a.modified=b;return this},isModified:function(a){return a?a.modified:false},isModifiedAll:function(){var a=this,b=false;this.each(function(){if(a.isModified(this)){b=true;return false}});return b},isNew:function(a){return a?a.newed:false},itemQueryTempl:false,queryString:function(a,b){var g="";if(a){g=this.itemQueryTempl||"";if(b)g=CC.templ(b,g,2,true);if(g)g=CC.templ(a,g,2,true);g=this.getItemQuery(a,g)}if(b){if(g)g+="&";g+=CC.queryString(b)}return g},
getItemQuery:fGo});CC.util.Validators={NoEmpty:function(a){if(!a||a.trim()=="")return"\u8be5\u9879\u4e0d\u80fd\u4e3a\u7a7a";return true},Mail:function(a){return!CC.isMail(a)?"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e":true}};
(function(){var a=CC.Event,b=CC.util.dd.Mgr;CC.create("CC.util.dd.AbstractCtMonitor",null,{initialize:function(g){g&&CC.extend(this,g);(g=this.zoom)||(g={ctype:"ctzoom"});if(g.ctype!==undefined)g=this.zoom=CC.ui.instance(g);this.pZoom&&this.pZoom.add(g)},trigger:"_dragger",dragCS:false,indicator:false,mgrIndicator:true,beforedrag:function(g){var f=a.element(g);if(f.id!==this.trigger)return false;b.setSource(this.ct.$(f));a.stop(g)},dragstart:function(g,f){b.setZoom(this.pZoom||this.zoom,true);this.dragCS&&
f.addClass(this.dragCS);this.mgrIndicator&&b.getIndicator().prepare()},getIndicator:function(){var g=this.indicator;if(g&&!g.cacheId){if(!g.showTo)g.showTo=document.body;this.indicator=g=CC.ui.instance(g)}return g},drag:function(){this.mgrIndicator&&b.getIndicator().reanchor()},dragend:function(g,f){this.indicator&&this.getIndicator().hide();this.dragCS&&f.delClass(this.dragCS);this.mgrIndicator&&b.getIndicator().end()},sbover:fGo,sbout:fGo,sbdrop:fGo,afterdrag:fGo})})();
CC.util.DataTranslator={trans:{array:{read:function(a){for(var b=0,g=a.length;b<g;b++)a[b]={title:a[b]};return a}},gridmaptranslator:{read:function(a,b){var g=b.grid.header.children,f={},d=0,h;b=0;for(h=g.length;b<h;b++)if(g[b].dataCol){f[g[b].id]=d;d++}g=a.shift();d=[];var k;if(g){b=0;for(h=g.length;b<h;b++){k=g[b];if(CC.isArray(k)){k[0]=f[k[0]];k._isa=true}else if(f[k]!==undefined)g[b]=f[k]}var n,l,o,q,t,x;for(b=0;b<h;b++){o=g[b];l=typeof o==="number";k=0;for(f=a.length;k<f;k++){(n=d[k])||(n=d[k]=
{array:[]});if(l)n.array[o]={title:a[k][b]};else if(o._isa){q=a[k][b];x=n.array[o[0]]={title:q[0]};n=1;for(t=q.length;n<t;n++)x[o[n]]=q[n]}else n[o]=a[k][b]}}}return d}},gridcolmaptranslator:{read:function(a,b){var g=[],f=[g],d=a[0],h;if(d){for(var k in d)g[g.length]=k;for(var n=0,l=a.length;n<l;n++){d=a[n];h=[];k=0;for(len=g.length;k<len;k++)h[k]=d[g[k]];f[f.length]=h}}return CC.util.DataTranslator.get("gridmaptranslator").read(f,b)}},gridarraytranslator:{read:function(a){for(var b=CC.util.DataTranslator.get("array"),
g=0,f=a.length;g<f;g++)a[g]={array:b.read(a[g])};return a}}},reg:function(a,b){this.trans[a]=b;return this},get:function(a){return this.trans[a]}};
(function(){var a=window.CC,b=a.ui,g=b.ContainerBase,f=a.layout.Layout.prototype,d=window.Math,h=a.util.dd.Mgr,k;a.Tpl.def("CC.ui.BorderLayoutSpliter",'<div class="g-layout-split"></div>').def("CCollapseBarH",'<table cellspacing="0" cellpadding="0" border="0" class="g-layout-split"><tr><td class="cb-l"></td><td class="cb-c"><div class="expander" id="_expander"><a class="nav" id="_navblock" href="javascript:fGo()"></a></div></td><td class="cb-r"></td></tr></table>').def("CCollapseBarV",'<table cellspacing="0" cellpadding="0" border="0" class="g-layout-split"><tr><td class="cb-l"></td></tr><tr><td class="cb-c"><div class="expander" id="_expander"><a class="nav" id="_navblock" href="javascript:fGo()"></a></div></td></tr><tr><td class="cb-r"></td></tr></table>');
b.BorderLayoutSpliter=a.create(a.Base,function(n){var l;return{type:"CC.ui.BorderLayoutSpliter",ghostCS:"g-layout-sp-ghost",initComponent:function(){this.ct=this.layout.ct.wrapper;if(this.dir=="north"||this.dir=="south")this.dxDisd=true;n.initComponent.call(this);h.installDrag(this,true)},getRestrict:function(){var o=this.layout,q=this.ct,t,x,B=this.dir,A=o[B],E=A.lyInf,F=o.vgap,u=o.hgap,w=E.gap==k?F:E.gap,y=E.gap==k?u:E.gap;E=o.cgap;var m=q.height;q=q.width;switch(B){case "north":x=-1*A.height;t=
m+x-w;if(o=o.south){w=o.lyInf;if(w.cbar&&!w.cbar.hidden){E=w.cgap===k?E:w.cgap;t-=E}if(!o.hidden&&!o.contexted)t-=o.height+(w.gap==k?F:w.gap)}if(t>A.maxH-A.height)t=A.maxH-A.height;if(d.abs(x)>A.height-A.minH)x=-1*(A.height-A.minH);break;case "south":t=A.height;x=-1*m+t+w;if(o=o.north){w=o.lyInf;if(w.cbar&&!w.cbar.hidden){E=w.cgap===k?E:w.cgap;x+=E}if(!o.hidden&&!o.contexted)x+=o.height+(w.gap==k?F:w.gap)}if(t>A.height-A.minH)t=A.height-A.minH;if(d.abs(x)>A.maxH-A.height)x=-1*(A.maxH-A.height);break;
case "west":x=-1*A.width;t=q+x-y;if(o=o.east){w=o.lyInf;if(w.cbar&&!w.cbar.hidden){E=w.cgap===k?E:w.cgap;t-=E}if(!o.hidden&&!o.contexted)t-=o.width+(w.gap==k?u:w.gap)}if(t>A.maxW-A.width)t=A.maxW-A.width;if(d.abs(x)>A.width-A.minW)x=-1*(A.width-A.minW);break;case "east":t=A.width;x=-1*q+t+y;if(o=o.west){w=o.lyInf;if(w.cbar&&!w.cbar.hidden){E=w.cgap===k?E:w.cgap;x+=E}if(!o.hidden&&!o.contexted)x+=o.width+(w.gap===k?u:w.gap)}if(t>A.width-A.minW)t=A.width-A.minW;if(d.abs(x)>A.maxW-A.width)x=-1*(A.maxW-
A.width);break}return B==="west"||B==="east"?[t,x,0,0]:[0,0,t,x]},applyGhost:function(o){var q=this.splitGhost;if(!q)q=this.splitGhost=this.$$(a.$C({tagName:"DIV",className:this.ghostCS}));if(o){this.copyViewport(q);l=[q.left,q.top];q.appendTo(this.ct)}else q.del();return q},beforedrag:function(){this.applyGhost(true);h.setBounds(this.getRestrict());h.resizeHelper.applyMasker(true);h.resizeHelper.masker.fastStyleSet("cursor",this.fastStyle("cursor"))},drag:function(){var o=h.getDXY();h.getIEXY();
this.dxDisd?this.splitGhost.setTop(l[1]+o[1]):this.splitGhost.setLeft(l[0]+o[0])},dragend:function(){var o=this.layout[this.dir],q=h.getDXY(),t=o.lyInf;q=this.dxDisd?this.dir==="north"?o.height+q[1]:o.height-q[1]:this.dir==="west"?o.width+q[0]:o.width-q[0];if(t.autoCollapseWidth!==false&&q<=(t.autoCollapseWidth||40))this.layout.collapse(o,true);else{this.dxDisd?o.setHeight(q):o.setWidth(q);this.layout.doLayout()}},afterdrag:function(){this.applyGhost(false);h.resizeHelper.applyMasker(false);h.resizeHelper.masker.fastStyleSet("cursor",
"")}}});b.BorderLayoutCollapseBar=a.create(g,{type:"CC.ui.BorderLayoutCollapseBar",hidden:true,innerCS:"g-layout-cbar",ct:"_expander",compContextedCS:"g-layout-contexted",sliperCS:"g-layout-sliper g-f1",navBlockCS:{east:"g-nav-block-l",west:"g-nav-block-r",south:"g-nav-block-u",north:"g-nav-block-d"},initComponent:function(){this.template=this.dir==="south"||this.dir==="north"?"CCollapseBarH":"CCollapseBarV";g.prototype.initComponent.call(this);if(this.dir==="west"||this.dir==="east")this.addClass(this.innerCS+
"-v");this.centerExpander=this.dom("_expander");this.navBlock=this.dom("_navblock");a.fly(this.navBlock).addClass(this.navBlockCS[this.dir]).unfly();this.domEvent("mousedown",this.onBarClick,true).domEvent("mousedown",this.onNavBlockClick,true,null,this.navBlock);this.sliperEl=a.$C({tagName:"A",className:this.sliperCS,href:"javascript:fGo()"});this.comp.append(this.sliperEl);this.comp.domEvent("click",this.sliperAction,false,null,this.sliperEl).on("contexted",this.onCompContexted)},destroy:function(){this.sliperEl=
this.navBlock=this.centerExpander=null;this.compShadow&&this.compShadow.destroy();g.prototype.destroy.call(this)},sliperAction:function(){this.pCt.layout.collapse(this,true)},onNavBlockClick:function(){var n=this.comp;n.setXY(1E4,1E4);this.remain();this.itsLayout.collapse(n,false)},getShadow:function(){var n=this.compShadow;if(!n)n=this.compShadow=b.instance("shadow",{inpactH:9,inpactY:-2,inpactX:-4,inpactW:10});return n},onTimeout:function(){this.remain()},setAutoHideTimer:function(n){var l=this.comp.lyInf,
o=l.autoHideTimer;if(n){if(!o)l.autoHideTimer=this.onTimeout.bind(this).timeout(l.autoHideTimeout||5E3)}else if(o){clearTimeout(o);delete l.autoHideTimer}},popup:function(){var n=this.comp,l=n.lyInf;if(!l.popuped){l.popuped=true;this.setCompContextedBounds();n.show().setContexted(true);var o=n.absoluteXY();n.appendTo(document.body).setXY(o);n.collapse&&n.collapsed&&n.collapse(false);this.getShadow().attach(n).display(true);l.cancelAutoHide||this.setAutoHideTimer(true)}},remain:function(n){var l=this.comp,
o=l.lyInf;if(o.popuped){o.popuped=false;this.setAutoHideTimer(false);l.setContexted(false);l.display(!!n);l.pCt._addNode(l.view);l.delClass(this.compContextedCS);this.getShadow().detach()}},onCompContexted:function(n,l){var o=this.pCt.layout.cfgFrom(this).cbar;if(l&&o.ancestorOf(a.Event.element(l)))return false;n?o.popup():o.remain();a.fly(o.navBlock).checkClass(o.navBlockCS[o.dir]+"-on",n).unfly();this.checkClass(o.compContextedCS,n)},onBarClick:function(){this.comp.contexted?this.remain():this.popup()},
setCompContextedBounds:function(){var n=this.comp,l=this.dir;if(l==="west")n.setBounds(this.left+this.width+1,this.top,false,this.height);else if(l==="east")n.setBounds(this.left-n.width-1,this.top,false,this.height);else l==="north"?n.setBounds(this.left,this.top+this.height+1,this.width,false):n.setBounds(this.left,this.top-n.height-1,this.width,false)},setSize:function(){g.prototype.setSize.apply(this,arguments);var n;if(this.dir==="north"||this.dir==="south"){n=d.max(0,this.width-6)+"px";this.centerExpander.style.width=
n;if(a.ie)this.centerExpander.parentNode.style.width=n}else{n=d.max(0,this.height-6)+"px";this.centerExpander.style.height=n;if(a.ie)this.centerExpander.parentNode.style.height=n}}});a.create("CC.layout.BorderLayout",a.layout.Layout,{hgap:5,vgap:5,cgap:32,cpgap:5,wrCS:"g-borderlayout-ct",itemCS:"g-borderlayout-item",separatorVCS:"g-ly-split-v",separatorHCS:"g-ly-split-h",add:function(n,l){f.add.call(this,n,l);var o,q;if(!l)l=n.lyInf;o=l.dir;q=l.split;o||(o="center");this[o]=n;if(q&&o!=="center"){q=
l.separator=new b.BorderLayoutSpliter({dir:o,layout:this});q.addClass(o==="west"||o==="east"?this.separatorVCS:this.separatorHCS);q.appendTo(this.ct.ct).show()}n.addClass(this.itemCS+"-"+(o||"center"));l.collapsed===k?this.doLayout():this.collapse(n,l.collapsed);return this},getCollapseBar:function(n){var l,o;l=n.lyInf;o=l.cbar;if(!o&&!l.noSidebar){o=l.cbar=new b.BorderLayoutCollapseBar({dir:l.dir,comp:n,itsLayout:this,autoRender:true});o.addClass(o.innerCS+"-"+l.dir).appendTo(this.ct.ct)}return o},
collapse:function(n,l){var o=this.getCollapseBar(n),q=n.lyInf;q.collapsed=l;q.separator&&q.separator.display(!l);n.collapse&&n.collapse(l);o&&o.display(l);n.display(!l);this.doLayout()},onLayout:function(){f.onLayout.call(this);var n=this.ct.wrapper,l=n.getWidth(true);n=n.getHeight(true);var o=0,q=0,t=this.north,x,B,A=this.vgap,E=this.cgap,F=this.cpgap,u=F+F,w=this.hgap,y,m;if(t){y=t.lyInf;if((x=y.cbar)&&!x.hidden){m=y.cgap===k?E:y.cgap;x.setBounds(o+F,q+F,l-u,m-u);m=y.cgap===k?E:y.cgap;q+=m}if(!t.hidden&&
!t.contexted){x=t.getHeight(true);t.setBounds(o,q,l,t.height);q+=x;m=y.gap===k?A:y.gap;(B=y.separator)&&B.setBounds(o,q,l,m);q+=m}t.contexted&&t.setContexted(false)}if(t=this.south){y=t.lyInf;if((x=y.cbar)&&!x.hidden){m=y.cgap===k?E:y.cgap;n-=m;x.setBounds(o+F,n+F,l-u,m-u)}if(!t.hidden&&!t.contexted){x=t.getHeight(true);n-=x;t.setBounds(o,n,l,t.height);m=y.gap===k?A:y.gap;B=y.separator;n-=m;B&&B.setBounds(o,n,l,m)}t.contexted&&t.setContexted(false)}n-=q;if(t=this.east){y=t.lyInf;if((x=y.cbar)&&!x.hidden){m=
y.cgap===k?E:y.cgap;l-=m;x.setBounds(l+F,q,m-u,n)}if(!t.hidden&&!t.contexted){x=t.getWidth(true);l-=x;t.setBounds(l,q,t.width,n);B=y.separator;m=y.gap===k?w:y.gap;l-=m;B&&B.setBounds(l,q,m,n)}t.contexted&&t.setContexted(false)}if(t=this.west){y=t.lyInf;if((x=y.cbar)&&!x.hidden){m=y.cgap===k?E:y.cgap;x.setBounds(o+F,q,m-u,n);o+=m;l-=m}if(!t.hidden&&!t.contexted){x=t.getWidth(true);t.setBounds(o,q,t.width,n);o+=x;m=y.gap===k?w:y.gap;B=y.separator;l-=x+m;B&&B.setBounds(o,q,m,n);o+=m}t.contexted&&t.setContexted(false)}(t=
this.center)&&t.setBounds(o,q,l,n)},remove:function(n){var l=n.lyInf;delete this[l.dir];var o=l.separator;if(o){o.destroy();delete l.separator}if(o=l.cbar){o.destroy();delete l.cbar}f.remove.apply(this,arguments)},detach:function(){var n=this;this.invalidated=true;a.each(["east","south","west","north","center"],function(){n[this]&&n.remove(n[this])});f.detach.call(this)}});a.layout.def("border",a.layout.BorderLayout)})();
(function(){var a=CC.layout,b=a.Layout,g=b.prototype,f=window.Math,d=CC.Base;CC.create("CC.layout.CardLayout",b,{wrCS:"g-card-ly-ct",layoutChild:function(h){var k=this.ct.wrapper.getContentSize(true);h.rendered?h.setSize(k[0],k[1]):d.prototype.setSize.apply(h,k)}});a.def("card",a.CardLayout);CC.create("CC.layout.QQLayout",b,{wrCS:"g-card-ly-ct",beforeAdd:function(h,k){h.fastStyleSet("position","absolute").setLeft(0);if(k&&k.collapsed===false){h.collapse(false);this.frontOne=h}else h.collapse(true);
g.beforeAdd.apply(this,arguments)},onLayout:function(){g.onLayout.apply(this,arguments);var h=this.frontOne,k=this.ct,n=k.wrapper.height,l=k.wrapper.width,o,q,t,x,B=k.children;x=k.size();for(t=o=0;o<x;o++){q=B[o];if(!q.hidden){if(q==h)break;q.setBounds(false,t,l,q.minH);n-=q.height;t+=q.height}}h&&h.setTop(t);x=x-1;for(t=k.wrapper.height;x>o;x--){q=B[x];t-=q.minH;q.setBounds(false,t,l,q.minH);n-=q.height}h&&h.setSize(l,n)},collapse:function(h,k){var n=h.lyInf,l=this.frontOne;if(n.collapsed!==k){if(l&&
l!==h){l.collapse&&l.collapse(true);l.lyInf.collapsed=true}h.collapse&&h.collapse(k);this.frontOne=(n.collapsed=k)?null:h;this.doLayout();this.ct.fire("collapsed",h,k)}}});a.def("qq",a.QQLayout);CC.create("CC.layout.RowLayout",b,{wrCS:"g-row-ly",onLayout:function(){var h=this.ct.wrapper,k=h.getWidth(true);h=h.getHeight(true);var n,l,o,q=this.ct.children,t,x,B=[];n=0;for(l=q.length;n<l;n++){o=q[n];if(!o.hidden){t=o.lyInf;switch(t.h){case "auto":case undefined:o.rendered||o.render();h-=o.getHeight();
break;case "lead":B[B.length]=o;break;default:x=t.h;if(CC.isNumber(x))if(x>=1){o.setHeight(x);h-=o.height}else if(x>=0){x=f.floor(x*h);o.setHeight(x);h-=o.height}}t=t.w;if(t===undefined)o.setWidth(k);else t<1&&o.setWidth(f.floor(t*k))}}n=0;for(l=B.length;n<l;n++){o=B[n];t=o.lyInf;x=t.len;x=CC.isNumber(x)?f.floor(x*h):f.floor(h/(l-n));o.setHeight(x);h-=o.height}n=0;for(l=q.length;n<l;n++){o=q[n];o.rendered||o.render()}}});a.RowLayout.prototype.layoutChild=a.RowLayout.prototype.onLayout;a.def("row",
a.RowLayout);CC.create("CC.layout.TableLayout",b,{attach:function(h){this._items=h.lyCfg&&h.lyCfg.items;h._addNode=h._removeNode=fGo;g.attach.apply(this,arguments)},fromArray:function(h){var k=h.length,n,l,o,q=[];for(n=0;n<k;n++){o=h[n];if(CC.isArray(o))for(l=0;l<o.length;l++)o[l]&&o[l].ctype&&q.push(o[l]);else o&&o.ctype&&q.push(o)}g.fromArray.call(this,q)},onLayout:function(){if(!this.layouted){g.onLayout.apply(this,arguments);this.layouted=true;var h=this.tableEl,k=this.tableEl=CC.$C("TABLE"),
n=this.ct;k.className="g-ly-tbl";if(this.tblCs){CC.fly(k).addClass(this.tblCs).unfly();delete this.tblCs}h&&d.applyOption(k,h);if(this.group){var l=this.group,o=CC.$C("COLGROUP"),q=l.cols,t;for(h=0;h<q;h++){t=CC.$C("COL");t.className="g"+(h+1);l[h]&&d.applyOption(t,l[h]);o.appendChild(t)}delete this.group;k.appendChild(o)}l=CC.$C("TBODY");if(o=this._items){q=o.length;t=n.children;var x,B,A,E,F,u,w,y,m;for(B=h=0;h<q;h++){r=o[h];F=CC.$C("TR");F.className="r"+(h+1);if(CC.isArray(r)){x=0;m=1;for(E=r.length;x<
E;x++)if(A=r[x]){w=A.td;y=A.ctype;if(!w&&!y)d.applyOption(F,A);else{u=CC.$C("TD");u.className="tbl-td c"+m++;A.tdcs&&CC.fly(u).addClass(A.tdcs).unfly();if(w){if(w.cols){u.colSpan=w.cols;delete w.cols}d.applyOption(u,w)}if(y){A=t[B++];u.appendChild(A.view)}F.appendChild(u)}}else{u=CC.$C("TD");u.className="tbl-td c"+m++;F.appendChild(u)}}else{u=CC.$C("TD");u.className="tbl-td c"+m++;if(r.td){w=r.td;if(w.cols){u.colSpan=w.cols;delete u.cols}d.applyOption(u,w)}r.tr&&d.applyOption(F,r.tr);if(r.ctype){A=
t[B++];u.appendChild(A.view)}F.appendChild(u)}l.appendChild(F)}}k.appendChild(l);n.wrapper.append(k);delete this._items}}});CC.layout.def("table",CC.layout.TableLayout)})();
CC.create("CC.layout.TablizeLayout",CC.layout.Layout,{attach:function(a){var b=this;this.tableEl=CC.Tpl.forNode('<table class="g-ly-tablize"><tr id="_tr"></tr></table>');this.trEl=CC.$("_tr",this.tableEl);a._addNode=function(g){var f=CC.$C("TD");f.className="tblly-td";f.appendChild(g);b.trEl.appendChild(f)};a.wrapper.append(this.tableEl);CC.layout.Layout.prototype.attach.apply(this,arguments)},add:function(a){CC.layout.Layout.prototype.add.apply(this,arguments);if(a.lyInf&&a.lyInf.separator){this.addSeparator();
delete a.lyInf.separator}},onLayout:function(){if(!this.layouted){this.layouted=true;CC.layout.Layout.prototype.onLayout.apply(this,arguments)}},addSeparator:function(){this.trEl.appendChild(CC.$C({tagName:"TD",innerHTML:'<span class="tblly-sep"> | </span>',className:"tblly-td"}))}});CC.layout.def("tablize",CC.layout.TablizeLayout);
CC.create("CC.layout.Portal",CC.layout.Layout,{initialize:function(a){this.portable=new CC.util.dd.Portable(this.portable);this.portable.createZoom=this.createZoom.bindRaw(this);CC.layout.Layout.prototype.initialize.call(this,a)},beforeAdd:function(a){if(!a._portalAddedBnd){__debug&&console.log("check ct child dd binded",a);a.on("add",this.bindModule,this);a._portalAddedBnd=true}var b=this;a.each(function(){this.portalDDBinded||b.bindModule(this)})},bindModule:function(a){a.portalDDBinded||this.portable.bind(a)},
createZoom:function(a){function b(n){return n!==a}var g=this.ct,f,d=new CC.util.d2d.RectZoom,h=0;g=g.children;for(var k=g.length;h<k;h++){f=g[h];if(f.size())d.add(new CC.util.d2d.ContainerDragZoom({ct:f,filter:b}));else{f=new CC.util.d2d.ComponentRect(this.portable.createPlaceholdForCt(f));d.add(f)}}return d}});CC.layout.def("portal",CC.layout.Portal);CC.Tpl.def("CC.ui.TabItemLayout",'<div class="g-panel"><div class="auto-margin" id="_margin"><a href="javascript:fGo()" id="_rigmov" class="auto-rigmov" style="right:0px;"></a><a href="javascript:fGo()" style="left:0px;" id="_lefmov" class="auto-lefmov"></a><div class="auto-scrollor" id="_scrollor" tabindex="1" hidefocus="on"><div class="auto-offset" id="_wrap"></div></div></div></div>');
CC.create("CC.layout.TabItemLayout",CC.layout.Layout,function(a){return{layoutOnChange:true,horizonMargin:5,navLeftWidth:24,navRightWidth:24,ctCS:"g-autoscroll-ly",disabledLeftNavCS:"g-disabled auto-lefmov-disabled",disabledRightNavCS:"g-disabled auto-rigmov-disabled",navPanelCS:"g-mov-tab",getMargins:function(){return[this.marginLeft||this.horizonMargin,this.marginRight||this.horizonMargin]},attach:function(b){a.attach.call(this,b);var g=b.dom("_margin").style,f=this.getMargins();g.marginLeft=f[0]+
"px";g.marginRight=f[1]+"px";this.scrollor=b.$$("_scrollor");g=this.lefNav=b.$$("_lefmov");b=this.rigNav=b.$$("_rigmov");g.disabledCS=this.disabledLeftNavCS;b.disabledCS=this.disabledRightNavCS;this.attachEvent()},attachEvent:function(){var b=this.lefNav,g=this.rigNav;this.ct.on("remove",this.onStructureChange,this).on("closed",this.onStructureChange,this).domEvent("mousedown",this.onNavMousedown,true,this,b.view).domEvent("mouseup",this.onNavMouseup,true,this,b.view).domEvent("mousedown",this.onNavMousedown,
true,this,g.view).domEvent("mouseup",this.onNavMouseup,true,this,g.view)},onStructureChange:function(){this.hasLeft()&&!this.hasRight()&&this.requireMoreSpace();this.doLayout()},getDirFromEvent:function(b){return this.lefNav.view.id===CC.Event.element(b).id?"l":"r"},scrollToNext:function(b,g){var f=this.getNextHiddenItem(b);if(f){this.scrollItemIntoView(f);if(!g)this.mousedownTimer=arguments.callee.bind(this,b).timeout(300)}else{clearTimeout(this.mousedownTimer);this.mousedownTimer=null}},scrollItemIntoView:function(b){if(b)b.view||
(b=this.ct.$(b));else b=this.ct.selectionProvider.selected;if(b){b=this.getScrollIntoViewDelta(b);if(b!==0){__debug&&console.log("scroll delta:"+b);this.setScrollLeft(this.getScrollLeft()+b)}this.checkStatus()}},onNavMousedown:function(b){this.mousedownTimer=this.scrollToNext.bind(this,this.getDirFromEvent(b)).timeout(300)},onNavMouseup:function(b){if(this.mousedownTimer){clearTimeout(this.mousedownTimer);this.mousedownTimer=null}this.scrollToNext(this.getDirFromEvent(b),true)},add:function(b){b.scrollIntoView=
this.scrollItemIntoView.bind(this);a.add.apply(this,arguments)},getScrollViewWidth:function(){return this.scrollor.view.clientWidth},getScrollLeft:function(){return parseInt(this.scrollor.view.scrollLeft,10)||0},setScrollLeft:function(b){this.scrollor.view.scrollLeft=b},hasLeft:function(){return this.scrollor.view.scrollLeft>0},hasRight:function(){return this.ct.size()>0&&this.getScrollRigthLength(this.ct.children[this.ct.size()-1])>0},getScrollLeftLength:function(b){return this.getScrollLeft()-b.view.offsetLeft},
getScrollRigthLength:function(b){var g=this.getScrollViewWidth(),f=this.getScrollLeft();return b.view.offsetLeft+b.view.offsetWidth-f-g},getScrollIntoViewDelta:function(b){var g=this.getScrollLeftLength(b);__debug&&console.log("scroll left dx:",g);if(g>0)return-1*g;g=this.getScrollRigthLength(b);__debug&&console.log("scroll right dx:",g);return g>0?g:0},requireMoreSpace:function(){var b=this.getNextHiddenItem("l");b&&this.scrollItemIntoView(b)},getLastVisibleItem:function(){var b=this.ct.children,
g=0;for(g=b.length-1;g>=0;g--)if(!b[g].hidden&&this.getScrollRigthLength(b[g])<=0)return b[g]},getNextHiddenItem:function(b){var g=this.ct.children,f=0,d=g.length;if(b==="l")for(;f<d;f++){b=g[f];if(!b.hidden)if(this.getScrollLeftLength(b)<=0)return g[f-1]}else for(f=d-1;f>=0;f--){b=g[f];if(!b.hidden)if(this.getScrollRigthLength(b)<=0)return g[f+1]}},fixIEOnLayout:function(b){var g=this.ct,f=this.getMargins();b=(b||g.getWidth(true))-f[0]-f[1];g.fly("_margin").setWidth(b).unfly();b-=this.navLeftWidth+
this.navRightWidth;this.scrollor.setWidth(b)},onLayout:function(b){__debug&&console.group("TabItem\u5e03\u5c40("+this.ct+")");a.onLayout.apply(this,arguments);var g=this.ct.selectionProvider.selected;CC.ie&&this.fixIEOnLayout(b);if(b!==undefined){var f=false;if(this.preWidth===undefined)this.preWidth=b;else f=b-this.preWidth;this.preWidth=b;if(f)if(f>0)this.hasRight()||this.setScrollLeft(this.getScrollLeft()-f)}g?this.scrollItemIntoView(g):this.checkStatus();__debug&&console.groupEnd()},checkStatus:function(){var b=
this.ct,g=!this.hasLeft(),f=!this.hasRight();__debug&&console.log("checking nav disabled,","hasL:",!g,"hasR:",!f);this.lefNav.disable(g);this.rigNav.disable(f);b.checkClass(this.navPanelCS,!g||!f)}}});CC.layout.def("tabitem",CC.layout.TabItemLayout);
CC.create("CC.layout.Portal",CC.layout.Layout,{initialize:function(a){this.portable=new CC.util.dd.Portable(this.portable);this.portable.createZoom=this.createZoom.bindRaw(this);CC.layout.Layout.prototype.initialize.call(this,a)},beforeAdd:function(a){if(!a._portalAddedBnd){__debug&&console.log("check ct child dd binded",a);a.on("add",this.bindModule,this);a._portalAddedBnd=true}var b=this;a.each(function(){this.portalDDBinded||b.bindModule(this)})},bindModule:function(a){a.portalDDBinded||this.portable.bind(a)},
createZoom:function(a){function b(n){return n!==a}var g=this.ct,f,d=new CC.util.d2d.RectZoom,h=0;g=g.children;for(var k=g.length;h<k;h++){f=g[h];if(f.size())d.add(new CC.util.d2d.ContainerDragZoom({ct:f,filter:b}));else{f=new CC.util.d2d.ComponentRect(this.portable.createPlaceholdForCt(f));d.add(f)}}return d}});CC.layout.def("portal",CC.layout.Portal);
(function(){var a=window.CC,b=a.Base.prototype;a.Tpl.def("CC.ui.Shadow",a.ie6?'<div class="g-dxshadow"></div>':'<div class="g-shadow" style="display:none;"><div class="g-shadow-t" id="_t"></div><div class="g-shadow-lt" id="_lt"></div><div class="g-shadow-rt" id="_rt"></div><div class="g-shadow-l" id="_l"></div><div class="g-shadow-lb" id="_lb"></div><div class="g-shadow-r" id="_r"></div><div class="g-shadow-rb" id="_rb"></div><div class="g-shadow-b" id="_b"></div></div>');a.create("CC.ui.Shadow",
a.Base,{inpactW:8,inpactH:0,inpactX:-4,inpactY:4,shadowWidth:6,offset:4,hidden:true,target:false,initComponent:function(){b.initComponent.call(this);this.target&&this.attach(this.target);if(a.ie&&!a.ie6){this.shadowR=this.dom("_r");this.shadowB=this.dom("_b");this.shadowL=this.dom("_l");this.shadowT=this.dom("_t")}},attach:function(g){this.target=g;this.target.eventable&&this.target.on("resized",this.reanchor,this).on("reposed",this.reanchor,this);this.setZ((this.target.fastStyle("zIndex")||1)-1);
if(a.ie6){this._ie6OffDt=Math.floor(this.offset/2);this.view.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"}return this},detach:function(){if(this.target.eventable){this.target.un("resized",this.reanchor,this);this.target.un("reposed",this.reanchor,this)}this.target=null;this.display(false);return this},setRightSize:a.ie6?function(g,f){g!==false&&this.setWidth(g-this.offset-this._ie6OffDt+this.inpactW-1);f!==false&&
this.setHeight(f-this.offset-this._ie6OffDt+this.inpactH)}:function(g,f){if(g!==false){g+=this.inpactW;g!=this.width&&this.setWidth(g)}if(f!==false){f+=this.inpactH;f!=this.height&&this.setHeight(f)}if(a.ie){var d=a.fly(this.shadowR),h=this.shadowWidth*2;if(f!==false){f=f-h;d.setHeight(f);d.view=this.shadowL;d.setHeight(f)}if(g!==false){f=g-h;d.view=this.shadowB;d.setWidth(f);d.view=this.shadowT;d.setWidth(f)}d.unfly()}},setRightPos:a.ie6?function(g){g[0]+=this.inpactX-this._ie6OffDt+1;g[1]+=this.inpactY-
this._ie6OffDt;this.setXY(g)}:function(g){this.setXY(g[0]+this.inpactX,g[1]+this.inpactY-1)},resize:function(){var g=this.target.getSize(true);this.setRightSize(g.width,g.height)},repos:function(){this.setRightPos(this.target.absoluteXY())},reanchor:function(){var g=!this.hidden;this.resize();this.repos();g&&b.display.call(this,true);return this},display:function(g){if(g===undefined)return b.display.call(this);if(g=g&&this.target&&!this.target.hidden){this.reanchor();this.appendTo(document.body)}else this.del();
return b.display.call(this,g)}});a.ui.def("shadow",a.ui.Shadow)})();
(function(){var a=window.CC,b=a.Base.prototype;a.Tpl.def("CC.ui.Loading",'<div class="g-loading"><div class="g-loading-indicator"><span id="_tle">\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019...</span></div></div>');a.create("CC.ui.Loading",a.Base,{loadMaskCS:"g-loading-mask",monitor:false,initComponent:function(){b.initComponent.call(this);this.monitor&&this.setMonitor(a.delAttr("monitor",this))},attach:function(g){this.target=g},setMonitor:function(g){this.monitor&&this.monitor.un("open",this.whenOpen,
this).un("send",this.whenSend,this).un("success",this.whenSuccess,this).un("final",this.whenFinal,this);g&&g.on("open",this.whenOpen,this).on("send",this.whenSend,this).on("success",this.whenSuccess,this).on("final",this.whenFinal,this);this.monitor=g},whenSend:fGo,whenSuccess:function(){this.loaded=true},whenOpen:function(){this.markIndicator()},whenFinal:function(){this.stopIndicator();this.target.shadow&&this.target.shadow.reanchor()},targetLoadCS:false,maskDisabled:false,loadMsgDisabled:false,
markIndicator:function(){if(!this.disabled){this.busy=true;this.targetLoadCS&&a.fly(this.target).addClass(this.targetLoadCS).unfly();if((!this.mask||!this.mask.tagName)&&!this.maskDisabled)this.mask=a.$C({tagName:"DIV",className:this.loadMaskCS});this.mask&&!this.maskDisabled&&this.target.wrapper.append(this.mask).unfly();this.loadMsgDisabled||this.target.wrapper.append(this)}},stopIndicator:function(){this.targetLoadCS&&a.fly(this.target).delClass(this.targetLoadCS).unfly();if(!this.maskDisabled){this.mask&&
this.mask.parentNode&&this.mask.parentNode.removeChild(this.mask);this.del()}this.busy=false;this.loaded=true},isBusy:function(){return this.busy},isLoaded:function(){return this.loaded},destroy:function(){this.setMonitor(null);a.Base.prototype.destroy.call(this)}});a.ui.def("loading",a.ui.Loading)})();
CC.create("CC.ui.Mask",CC.Base,{template:'<div class="g-modal-mask"></div>',onactive:null,initComponent:function(){CC.Base.prototype.initComponent.call(this);this.target&&this.attach(this.target);this.opacity&&this.setOpacity(this.opacity);this.domEvent("mousedown",this.onMaskResponsed,true)},onMaskResponsed:function(){this.fire("active",this);this.onactive&&this.onactive()},attach:function(a){this.target=a=a||CC.$body;a.eventable&&a.on("resized",this.onTargetResized,this);var b=CC.fly(a);if(a===
CC.$body||a===document.body){CC.$body.domEvent("resize",this.onWindowResize,false,this,window);this.onWindowResize()}else this.setSize(b.getSize());this.setXY(0,0);b.unfly();this.appendTo(a);return this},detach:function(){var a=this.target;if(a===CC.$body||a===document.body)CC.$body.unEvent("resize",this.onWindowResize,window);a.eventable&&a.un("resized",this.onTargetResized);this.del();this.target=null;return this},onTargetResized:function(a,b,g,f){this.setSize(g,f)},onWindowResize:function(){this.setSize(CC.getViewport())},
destroy:function(){this.target&&this.detach();CC.Base.prototype.destroy.call(this)}});
CC.create("CC.ui.Viewport",CC.ui.Panel,{bodyCS:"g-viewport-body",cs:"g-viewport",mg:[0,0,0,0],initComponent:function(){this.showTo=document.body;if(!this.view)this.view=CC.$C("DIV");CC.Event.on(window,"resize",this.onWindowResize.bind(this));CC.ui.Panel.prototype.initComponent.call(this);CC.$body.addClass(this.bodyCS);this.onWindowResize()},onWindowResize:function(){var a=CC.getViewport(),b=0,g=0,f=this.mg;b=f[1];g=f[2];a.width-=f[1]+f[3];a.height-=f[0]+f[2];if(this.maxW<a.width){f=a.width-this.maxW;
b+=Math.floor(f/2);a.width-=f}if(this.maxH<a.height){f=a.height-this.height;g+=Math.floor(f/2);a.height-=f}this.setBounds(b,g,a.width,a.height)}});CC.ui.def("viewport",CC.ui.Viewport);CC.Tpl.def("CC.ui.FolderItem",'<li class="g-unsel"><b id="_ico" class="icos"></b><a id="_tle" class="g-tle"></a></li>').def("CC.ui.Folder",'<div class="g-folder g-grp-bdy"><div class="g-grp-bdy" id="_scrollor"><ul id="_bdy" tabindex="1" hidefocus="on"></ul></div></div>');
CC.create("CC.ui.Folder",CC.ui.ContainerBase,{itemCfg:{template:"CC.ui.FolderItem",hoverCS:"on",icon:"icoNote",blockMode:2},keyEvent:true,ct:"_bdy",clickEvent:true,useContainerMonitor:true,template:"CC.ui.Folder",selectionProvider:true});CC.ui.def("folder",CC.ui.Folder);CC.Tpl.def("CC.ui.Button",'<table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="g-btn-l"><i>&nbsp;</i></td><td class="g-btn-c"><em unselectable="on"><button type="button" class="g-btn-text" id="_tle"></button></em></td><td class="g-btn-r"><i>&nbsp;</i></td></tr></tbody></table>');
CC.create("CC.ui.Button",CC.Base,function(a){return{iconNode:"_tle",focusNode:"_tle",hoverCS:"g-btn-over",clickCS:"g-btn-click",iconCS:"g-btn-icon",focusCS:"g-btn-focus",tip:false,disableNode:"_tle",innerCS:"g-btn",blockMode:"",_onclick:function(){this.onclick&&this.onclick.call(this)},initComponent:function(){a.initComponent.call(this);if(!this.title||this.title=="")this.addClass(this.noTxtCS||"g-btn-notxt");this.element=this.dom("_tle");this.domEvent("mousedown",this._gotFocus);this.domEvent("click",
this._onclick);this.focusCS&&this.bindFocusStyle(this.focusCS);this.dockable&&this.docked&&this.setDocked(true)},setDocked:function(b){this.docked=b;this.checkClass(this.clickCS,b);return this},_gotFocus:function(){try{this.element.focus()}catch(b){}},mouseupCallback:function(){if(this.dockable)return this.docked=!this.docked}}});
CC.create("CC.ui.DropButton",CC.ui.Button,{downCS:"g-btn-dwn",_onclick:function(a){this.array&&this.createMenu();if(this.menu){CC.Event.stop(a);this.showMenu(!!this.menu.hidden)}CC.ui.DropButton.superclass._onclick.apply(this,arguments)},showMenu:function(a){if(a){this.menu.at(this,true);this.menu.focus(0)}else this.menu.hide()},decorateDown:function(a){this.checkClass(this.downCS,a)},createMenu:function(a){var b=this;a=CC.extendIf(a||this.menuCfg,{ctype:"menu",array:this.array,width:120,showTo:document.body,
onDisplay:function(g){b.decorateDown(g)}});delete this.array;this.menu=CC.ui.instance(a);this.menu.render()}});CC.ui.def("button",CC.ui.Button);CC.ui.def("dropbutton",CC.ui.DropButton);CC.Tpl["CC.ui.BarItem"]='<table class="g-baritem" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="g-btn-l"><i>&nbsp;</i></td><td class="g-btn-c"><em unselectable="on"><button type="button" class="g-btn-text" id="_tle"></button></em></td><td class="g-btn-r"><i>&nbsp;</i></td></tr></tbody></table>';
CC.Tpl["CC.ui.Toolbar"]='<div class="g-tbar"><div class="g-tbar-wr" id="_wrap"></div></div>';CC.create("CC.ui.Bigbar",CC.ui.Panel,{keyEvent:false,clickEvent:true,syncWrapper:false,itemCfg:{template:"CC.ui.BarItem",hoverCS:"g-baritem-over",downCS:"g-baritem-dwn",innerCS:"g-baritem",clickCS:"g-baritem-click",focusCS:false,title:false},selectionProvider:{autoscroll:false,forceSelect:true},maxH:38,innerCS:"g-bigbar",itemCls:CC.ui.Button,template:"CC.ui.Toolbar"});CC.ui.def("bigbar",CC.ui.Bigbar);
CC.create("CC.ui.BigbarDropButton",CC.ui.DropButton,{template:"CC.ui.BarItem",hoverCS:"g-baritem-over",downCS:"g-baritem-dwn",innerCS:"g-baritem",clickCS:"g-baritem-click",focusCS:false,title:false});CC.ui.def("bigbardropbtn",CC.ui.BigbarDropButton);
CC.create("CC.ui.Smallbar",CC.ui.Panel,{syncWrapper:false,selectionProvider:{autoscroll:false,forceSelect:true},clickEvent:true,itemCfg:{template:"CC.ui.BarItem",hoverCS:"g-smallbar-item-over",downCS:"g-smallbar-item-dwn",clickCS:"g-smallbar-item-click",innerCS:"g-smallbar-item",focusCS:false},maxH:26,innerCS:"g-smallbar",itemCls:CC.ui.Button,template:"CC.ui.Toolbar"});CC.ui.def("smallbar",CC.ui.Smallbar);
CC.create("CC.ui.SmallbarDropButton",CC.ui.DropButton,{template:"CC.ui.BarItem",hoverCS:"g-smallbar-item-over",downCS:"g-smallbar-item-dwn",clickCS:"g-smallbar-item-click",innerCS:"g-smallbar-item",focusCS:false});CC.ui.def("smallbardropbtn",CC.ui.SmallbarDropButton);
(function(){var a=CC.ui.ContainerBase.prototype,b=CC.ui.Panel.prototype;CC.Tpl.def("CC.ui.TabItem",'<table unselectable="on" class="g-unsel g-tab-item"><tbody><tr id="_ctx"><td class="tLe" id="_tLe"></td><td class="bdy"><nobr id="_tle" class="g-tle">\u9009\u53611</nobr></td><td class="btn" id="_btnC"><a href="javascript:fGo()" title="\u5173\u95ed" id="_trigger" class="g-ti-btn"></a></td><td class="tRi" id="_tRi"></td></tr></tbody></table>');CC.create("CC.ui.TabItem",CC.ui.ContainerBase,{hoverCS:false,
autoReload:false,closeable:true,unselectable:true,ct:"_ctx",blockMode:2,loadCS:"g-tabitem-loading",initComponent:function(){a.initComponent.call(this);var g=this.cacheBtnNode=this.dom("_btnC");g&&g.parentNode.removeChild(g);this.bindClsEvent();this.closeable!==undefined&&this.setCloseable(this.closeable);this.panel&&this.setContentPanel(this.panel)},addButton:function(g){var f=this.cacheBtnNode.cloneNode(true);g.view=f;f.id=g.id;g.iconNode="_trigger";f=CC.Base.create(g);this.add(f);return f},syncPaneldestroy:undefined,
getContentPanel:function(g){var f=this.panel,d;if(!f&&g){f=this.src?new CC.ui.IFramePanel:new CC.ui.Panel;this.setContentPanel(f)}if(f&&!f.pCt){if((ct=this.pCt)&&(d=ct.getContentPanel()))d.layout.add(f);if(this.syncPaneldestroy===undefined)this.syncPaneldestroy=true}return f},setContentPanel:function(g){this.panel&&delete this.panel.bindingTabItem;g.cacheId||(g=CC.ui.instance(g));this.panel=g;g.bindingTabItem=this;return this},_addNode:function(g){this.buttonOrient!="l"?this.fly("_tRi").insertBefore(g).unfly():
this.fly("_tLe").insertAfter(g).unfly()},onClsClick:function(){this.closeable&&this.pCt.getDisc()>1&&this.pCt.close(this)},bindClsEvent:function(){var g=this.$$(this.closeNode);g||(g=this.addButton({id:"_clsBtn",blockMode:2,icon:"g-ti-clsbtn"}));this.domEvent("click",this.onClsClick,true,null,g.view).domEvent("dblclick",this.onClsClick,true);g.view.onmousedown=CC.Event.noUp},setCloseable:function(g){if(this.cacheBtnNode){this.closeable=g;this.$("_clsBtn").display(g)}else a.setCloseable.call(this,
g);return this},loadType:"html",loadContent:function(g){var f=this.getContentPanel(true);f.getConnectionProvider().loadType=this.loadType||"html";f=f.getConnectionProvider();if(!f.indicator){f.indicatorDisabled=false;f.getIndicator({markIndicator:this.onIndicatorStart,stopIndicator:this.onIndicatorStop})}if(g||(this.autoReload||!this.isContentLoaded())&&!this.isContentBusy())this._dataConnectorId=f.connect(g||this.src||this.url);return this},isContentLoaded:function(){return this._dataConnectorId&&
this.getContentPanel(true).getConnectionProvider().getConnectionQueue().isConnectorLoaded(this._dataConnectorId)},isContentBusy:function(){return this._dataConnectorId&&this.getContentPanel(true).getConnectionProvider().getConnectionQueue().isConnectorBusy(this._dataConnectorId)},onIndicatorStart:function(){var g=this.target.bindingTabItem;g.addClass(g.loadCS)},onIndicatorStop:function(){var g=this.target.bindingTabItem;g&&g.delClass(g.loadCS)},destroy:function(){this.syncPaneldestroy&&this.panel&&
this.panel.destroy();a.destroy.call(this)}});CC.ui.def("tabitem",CC.ui.TabItem);CC.create("CC.ui.Tab",CC.ui.Panel,{keyEvent:true,clickEvent:true,template:"CC.ui.TabItemLayout",innerCS:"g-tab",keyEventNode:"_scrollor",vcs:"g-vtab",vtab:false,selectionProvider:{UP:CC.Event.LEFT,DOWN:CC.Event.RIGHT,tracker:true,selectedCS:"g-tab-selectitem"},syncWrapper:false,maxH:33,itemCls:CC.ui.TabItem,floatCS:"g-tab-float",autoLoad:true,destroyItemOnclose:false,lyCfg:{navPanelCS:"g-mov-tab",horizonMargin:5,navLeftWidth:24,
navRightWidth:24},initComponent:function(){b.initComponent.call(this);this.on("selected",this.onItemSelected);if(this.vtab){this.addClass(this.vcs);delete this.vtab}if(this["float"]){this.addClass(this.floatCS+(this["float"]===true?"":this["float"]));delete this["float"]}},onItemSelected:function(g){if((g.url||g.src)&&this.autoLoad)g.loadContent();var f=this;(function(){var d=f.selectionProvider.previous;d&&d.getContentPanel()&&!d.panel.hidden&&d.panel.hide();f.displayItem(g,true);g.getContentPanel()&&
g.panel.show()}).timeout(0)},close:function(g){g=this.$(g);if(g.closeable)if(this.fire("close",g)!==false){this.displayItem(g,false);this.fire("closed",g);if(g.destroyOnClose===true||this.destroyItemOnclose||g.destoryOnClose===true)g.destroy()}},getContentPanel:function(){var g=this.contentPanel;if(typeof g==="string")g=this.contentPanel=CC.Base.find(g);return g},displayItem:function(g,f){g=this.$(g);if(!g.closeable&&!f)return false;g.display(f);var d=this.selectionProvider;if(!f&&d.selected===g){if(d.tracker.size())if(f=
d.tracker.pop()){d.select(f);d.tracker.pop();return}g=this.indexOf(g);f=g-1;for(var h=this.children;f>=0&&(h[f].hidden||h[f].disabled);)f--;if(f>=0)d.select(h[f]);else{f=h.length;for(g+=1;g<f&&(h[g].hidden||h[g].disabled);)g++;g<f&&d.select(h[g])}}},getDisc:function(){for(var g=0,f=this.children,d=0,h=f.length;d<h;d++)f[d].hidden||g++;return g}});CC.ui.def("tab",CC.ui.Tab)})();
CC.ie?CC.Tpl.def("CC.ui.FloatTip",'<table class="g-float-tip g-clear"><tr><td><table class="tipbdy"><tr><td id="_tle" class="important_txt"></td></tr><tr><td id="_msg" class="important_subtxt"></td></tr></table></td></tr><tr><td class="btm_cap" id="_cap"></td></tr></table>'):CC.Tpl.def("CC.ui.FloatTip",'<div class="g-float-tip g-clear"><div class="tipbdy"><div id="_tle" class="important_txt"></div><div id="_msg" class="important_subtxt"></div></div><div class="btm_cap" id="_cap"></div></div>');
CC.create("CC.ui.FloatTip",CC.ui.Panel,function(a){function b(n){h=d.pageXY(n||window.event)}var g=window.CC,f,d=g.Event,h=[-10000,-10000],k=false;g.Util.ftip=function(n,l,o,q,t,x){f||(f=g.ui.instance({ctype:"tip",showTo:document.body,autoRender:true}));g.fly(f.tail).show().unfly();f.show(n,l,o,q,t,x);return f};g.Util.qtip=function(n,l){f||(f=new g.ui.FloatTip({showTo:document.body,autoRender:true}));f.tipFor(n,l)};return{timeout:2500,delay:500,reuseable:true,shadow:true,qmode:false,zIndex:10002,
hoverTipCS:"g-small-tip",initComponent:function(){a.initComponent.call(this);this.msg&&this.setMsg(this.msg);this.tail=this.dom("_cap");this.setXY(-10000,-10000).setZ(this.zIndex);this.qmode?this.createQtip():this.createFtip()},display:function(n){n&&this.timerId&&this.killTimer();return a.display.apply(this,arguments)},onShow:function(){a.onShow.call(this);if(this.timeout)this.timerId=this._timeoutCall.bind(this).timeout(this.timeout)},onHide:function(){this.killTimer();a.onHide.call(this);this.setXY(-10000,
-10000)},setRightPosForTarget:function(n,l){n=g.fly(n);var o=n.absoluteXY();if(l){o[0]+=l[0];o[1]+=l[1]}this.anchorPos([o[0],o[1],0,0],"lt","hr",false,true,true);n.unfly()},setRightPosForHover:function(n){this.anchorPos([n[0],n[1],0,0],"lb","hr",[5,24],true,true)},_timeoutCall:function(){a.display.call(this,false);this.killTimer(true);this.ontimeout&&this.ontimeout()},killPretimer:function(){if(this.pretimerId){clearTimeout(this.pretimerId);this.pretimerId=false}},killTimer:function(n){if(this.timerId){clearTimeout(this.timerId);
this.timerId=false}!this.reuseable&&n&&this.destroy()},setMsg:function(n,l){this.fly("_msg").html(n).unfly();l&&this.setTitle(l);this.shadow&&!this.shadow.hidden&&this.shadow.reanchor();return this},show:function(n,l,o,q,t,x){if(arguments.length==0)return a.show.call(this);this.setMsg(n,l);if(t!==undefined)this.timeout=t;this.qmode&&this.createFtip();this.display(true);if(o){this.setRightPosForTarget(o,x);q&&g.fly(o).focus(true).unfly()}return this},createFtip:function(){this.qmode=false;this.delClass(this.hoverTipCS);
if(this.shadow){this.shadow.inpactY=-1;this.shadow.inpactH=-12}},createQtip:function(){this.qmode=true;this.addClassIf(this.hoverTipCS);if(this.shadow){this.shadow.inpactY=g.ui.Shadow.prototype.inpactY;this.shadow.inpactH=g.ui.Shadow.prototype.inpactH}},tipFor:function(n,l,o){g.fly(n).domEvent("mouseover",function(){var q=this;if(!k){d.on(document,"mousemove",b);k=true}this.pretimerId&&this.killPretimer();this.pretimerId=function(){q.killTimer();q.setMsg(n.qtip||n.tip||n.title||l,o);g.fly(q.tail).hide().unfly();
q.qmode||q.createQtip();q.display(true).setRightPosForHover(h)}.timeout(this.delay)},true,this).domEvent("mouseout",this.onTargetMouseout,true,this).unfly()},onTargetMouseout:function(){this.qmode&&this.display(false);if(k){d.un(document,"mousemove",b);k=false}this.killPretimer()}}});CC.ui.def("tip",CC.ui.FloatTip);CC.Tpl.def("CC.ui.TitlePanel",'<div class="g-panel g-titlepanel"><h3 class="g-titlepanel-hd" id="_tleBar"><a id="_btnFN" class="g-icoFld" href="javascript:fGo()"></a><a id="_tle" class="g-tle" href="javascript:fGo()"></a></h3><div id="_scrollor" class="g-panel-wrap g-titlepanel-wrap"></div></div>');
CC.create("CC.ui.TitlePanel",CC.ui.Panel,function(a){return{unselectable:"_tleBar",ct:"_scrollor",minH:22,openCS:"g-icoOpn",clsCS:"g-icoFld",foldNode:"_btnFN",initComponent:function(){a.initComponent.call(this);this.domEvent("mousedown",this.onTriggerClick,true,null,this.foldNode).domEvent("mousedown",this.onTitleClick,true,null,this.titleNode||"_tle");this.header=this.$$("_tleBar");this.collapsed&&this.collapse(this.collapsed,true)},getWrapperInsets:function(){return[this.minH,0,0,0,this.minH,0]},
onTriggerClick:function(){this.collapse(!this.wrapper.hidden,true)},onTitleClick:function(){this.onTriggerClick()},collapse:function(b,g){this.attr(this.foldNode,"className",b?this.openCS:this.clsCS);this.wrapper.display(!b);this.collapsed=b;this.fire("collapsed",b);if(g&&this.pCt)this.pCt.layout.collapse?this.pCt.layout.collapse(this,b):this.pCt.layout.doLayout();return this}}});CC.ui.def("titlepanel",CC.ui.TitlePanel);CC.Tpl.def("CC.ui.Foldable",'<div class="g-foldable"><div class="g-foldablewrap"><b title="\u9690\u85cf" id="_trigger" class="icos icoCls"></b><div><strong id="_tle"></strong></div></div></div>');
CC.create("CC.ui.Foldable",CC.Base,{clsGroupCS:"g-gridview-clsview",unselectable:true,initComponent:function(){CC.Base.prototype.initComponent.call(this);this.domEvent("click",this.onTrigClick,true,null)},getTarget:function(){if(!this.target.cacheId)this.target=CC.Base.find(this.target);return this.target},onTrigClick:function(){this.fold(!this.getTarget().hidden)},fold:function(a){var b=this.getTarget();if(this.fire("expand",this,a)!==false){b.display(!a);this.dom("_trigger").title=a?"\u9690\u85cf":
"\u5c55\u5f00";this.checkClass(this.clsGroupCS,a);this.expanded=a;this.fire("expanded",this,a)}return this}});CC.ui.def("foldable",CC.ui.Foldable);
CC.create("CC.util.IFrameConnectionProvider",CC.util.ConnectionProvider,{traceLoad:true,indicatorDisabled:true,defaultLoadSuccess:fGo,setTarget:function(a){CC.util.ConnectionProvider.prototype.setTarget.apply(this,arguments);if(a.src||a.url)this.connect(a.src||a.url)},initConnection:function(){if(this.traceLoad)this.t.domEvent(CC.ie?"readystatechange":"load",this.traceFrameLoad,false,this,this.t.getFrameEl());CC.util.ConnectionProvider.prototype.initConnection.apply(this,arguments)},createSyncQueue:function(){CC.util.ConnectionProvider.prototype.createSyncQueue.call(this);
this.syncQueue.openEvt="connection:open";this.syncQueue.finalEvt="connection:final"},onFrameLoad:function(a){this.t.loaded=true;try{this.t.fire("connection:success",this.t,this);this.success&&this.success(this,a)}catch(b){console.warn(b)}this.onFinal()},traceFrameLoad:function(a){var b=this.t;switch(CC.Event.element(a).readyState||a.type){case "loading":this.syncQueue.isConnectorBusy(this.connectorKey)||b.fire("connection:open",this.t,this);break;case "load":case "complete":b.getFrameEl().src&&b.getFrameEl().src!==
"about:blank"&&this.onFrameLoad(a);break}},abort:function(){this.t.getFrameEl().src=CC.ie?"about:blank":"";this.onFinal()},onFinal:function(){this.t.fire("connection:final",this.t,this)},bindConnector:function(a){this.connectorKey&&this.syncQueue.isConnectorBusy(this.connectorKey)&&this.abort();this.connectorKey=this.syncQueue.join(this.t);CC.extend(this,a);this.connectInner();return this.connectorKey},connectInner:function(){this.t.fire("connection:open",this.t,this);(function(){try{this.t.getFrameEl().src=
this.url}catch(a){__debug&&console.warn(a)}}).bind(this).timeout(0)}});CC.Tpl.def("CC.ui.IFramePanel",'<iframe class="g-framepanel" frameBorder="no" scrolling="auto" hideFocus=""></iframe>');
CC.create("CC.ui.IFramePanel",CC.ui.Panel,{traceResize:false,connectionProvider:CC.util.IFrameConnectionProvider,ct:undefined,onRender:function(){CC.ui.Panel.prototype.onRender.call(this);var a=this.pCt;if(this.traceResize){a.on("resized",this.onContainerResize,this);this.onContainerResize(false,false,a.wrapper.getWidth(true),a.wrapper.getHeight(true))}},getFrameEl:function(){return this.view},getWin:function(){return CC.frameWin(this.getFrameEl())},onContainerResize:function(a,b){this.setSize(a,
b)},$:function(a){return CC.frameDoc(this.view).getElementById(a)},connect:function(a){this.getConnectionProvider().connect(a)}});CC.ui.def("iframe",CC.ui.IFramePanel);CC.Tpl.def("CC.ui.Resizer",'<div class="g-panel g-resizer"><div class="g-win-e" id="_xe"></div><div class="g-win-s" id="_xs"></div><div class="g-win-w" id="_xw"></div><div class="g-win-n" id="_xn"></div><div class="g-win-sw" id="_xsw"></div><div class="g-win-es" id="_xes"></div><div class="g-win-wn" id="_xwn"></div><div class="g-win-ne" id="_xne"></div><div class="g-panel-wrap g-resizer-wrap" id="_wrap"></div></div>');
CC.create("CC.ui.Resizer",CC.ui.Panel,function(a){var b=window.CC,g=b.util.dd.Mgr,f=g.resizeHelper;return{resizeable:true,enableH:true,enableW:true,unresizeCS:"g-win-unresize",width:500,height:250,minW:12,minH:6,onResizeStart:function(d){if(this.resizeable){var h=this.absoluteXY(),k=this.getSize(true);if(!b.borderBox){k.width-=1;k.height-=1}this.initPS={pos:h,size:k};f.applyResize(true,d.fastStyle("cursor"));f.layer.setXY(h).setSize(k);this.fire("resizestart")}},onResizeEnd:function(){var d=g.getDXY();
if(d[0]===0&&d[1]===0){f.applyResize(false);f.masker.fastStyleSet("cursor","")}else if(this.initPS){var h=f.layer.getSize(true);if(!b.borderBox){if(h.width!==0)h.width+=1;if(h.height!==0)h.height+=1}var k=f.layer.xy(),n=this.initPS.pos;d=this.initPS.size;d=[h.width-d.width,h.height-d.height];var l=this.shadow,o=l&&!l.hidden;k[0]-=n[0];k[1]-=n[1];l&&o&&l.hide();this.setXY(this.getLeft(true)+k[0],this.getTop(true)+k[1]).setSize(h);l&&o&&l.show();this.fire("resizeend",k,d);f.applyResize(false,"");delete this.initPS}},
initComponent:function(){a.initComponent.call(this);this.cornerSprites=[];this.resizeable?this.bindRezBehavior():this.setResizable(false)},bindRezBehavior:function(){var d=this.onResizeEnd.bind(this),h=this.createRezBehavior(8),k=this.createRezBehavior(4),n=this.createRezBehavior(2),l=this.createRezBehavior(1),o=this.createRezBehavior("",n,k),q=this.createRezBehavior("",k,l),t=this.createRezBehavior("",h,n),x=this.createRezBehavior("",h,l);this.bindRezTrigger("_xn",h,d).bindRezTrigger("_xs",k,d).bindRezTrigger("_xw",
n,d).bindRezTrigger("_xe",l,d).bindRezTrigger("_xes",q,d).bindRezTrigger("_xsw",o,d).bindRezTrigger("_xwn",t,d).bindRezTrigger("_xne",x,d)},bindRezTrigger:function(d,h,k){var n=this,l=this.cornerSprites[this.cornerSprites.length]=this.$$(d);l.beforedrag=function(){n.onResizeStart(l)};l.drag=h;l.afterdrag=k;g.installDrag(l,true);return this},createRezBehavior:function(d,h,k){var n=this;return d==4||d==8?function(){if(n.enableH){var l=g.getDXY();n._zoom(d,l[1])}}:d==1||d==2?function(){if(n.enableW){var l=
g.getDXY();n._zoom(d,l[0])}}:function(){h.call(this);k.call(this)}},_zoom:function(d,h){var k=f.layer;if((d&1)!==0){off=this.initPS.size.width+h;off>=this.minW&&k.setWidth(off)}else if((d&2)!==0){off=this.initPS.size.width-h;if(off>=this.minW){k.setWidth(off);off=this.initPS.pos[0]+h;k.setLeft(off)}}if((d&4)!=0){off=this.initPS.size.height+h;off>=this.minH&&k.setHeight(off)}else if((d&8)!=0){off=this.initPS.size.height-h;if(off>=this.minH){k.setHeight(off);off=this.initPS.pos[1]+h;k.setTop(off)}}},
setResizable:function(d){this.checkClass(this.unresizeCS,!d);this.resizeable=d},getWrapperInsets:function(){return[6,1,1,1,7,2]}}});CC.ui.def("resizer",CC.ui.Resizer);
CC.create("CC.ui.Win",CC.ui.Resizer,function(a){var b=window.CC;b.Tpl.def("CC.ui.win.Titlebar",'<div id="_g-win-hd" class="g-win-hd"><div class="fLe"></div><b class="icoSw" id="_ico"></b><span id="_tle" class="g-tle">\u63d0\u793a</span><div class="fRi"></div><div class="g-win-hd-ct" style="position:absolute;right:5px;top:7px;" id="_ctx"></div></div>');b.Tpl.def("CC.ui.win.TitlebarButton",'<a class="g-hd-btn" href="javascript:fGo();"></a>');var g=b.util.dd.Mgr,f=g.resizeHelper,d=b.Base.prototype.setXY,
h,k={ctype:"ct",autoRender:true,clickEvent:true,unselectable:true,cancelClickBubble:true,itemCfg:{template:"CC.ui.win.TitlebarButton"},ct:"_ctx",template:"CC.ui.win.Titlebar",selectionProvider:{forceSelect:true,selectedCS:false}},n={ctype:"item",cs:"g-win-clsbtn",template:"CC.ui.win.TitlebarButton",tip:"\u5173\u95ed",id:"_cls"};return{unmoveable:false,closeable:true,shadow:{ctype:"shadow",inpactY:-1,inpactH:5},innerCS:"g-win g-tbar-win",minCS:"g-win-min",maxCS:"g-win-max",minH:30,overflow:false,minW:80,
dragOpacity:0.6,initComponent:function(){var l=b.delAttr(this,"title");a.initComponent.call(this);var o=b.extendIf(this.titlebar,k);o.title=l;var q=true;if((l=o.view)&&typeof l==="string"){o.view=this.dom(l);q=false}this.titlebar=b.ui.instance(o.ctype,o);o.view=l;o=this.titlebar;q&&this.addTitlebarNode(o);this.follow(o);delete this.title;this.overflow&&this.wrapper.fastStyleSet("overflow",this.overflow);if(this.closeable===true){q=o.$("close");if(!q){q=b.extendIf(o.clsBtn,n);if((l=q.view)&&typeof l===
"string")q.view=this.dom(l);q=this.clsBtn=b.ui.instance(q);o.layout.add(q)}q.onselect=this.onClsBtnClick}if(this.destroyOnClose||this.destoryOnClose)this.on("closed",this.destroy);this.domEvent("mousedown",this.trackZIndex).domEvent("mousedown",this.trackZIndex,true,null,this.titlebar.view).domEvent("dblclick",this.switchState,true,null,this.titlebar.view);this.unmoveable||g.installDrag(this,true,o.view);this.trackZIndex()},addTitlebarNode:function(l){this.wrapper.insertBefore(l)},beforedrag:function(){if(this.unmoveable)return false},
dragstart:function(){if(this.unmoveable||this.fire("movestart")===false)return false;this.shadow&&this.shadow.hide();f.applyMasker(true);this.decorateDrag(true);h=this.xy()},drag:function(){var l=g.getDXY();d.call(this,h[0]+l[0],h[1]+l[1])},dragend:function(){f.applyMasker(false);if(this.fire("moveend")===false){this.setXY(h);this.decorateDrag(false);return false}var l=g.getDXY(),o=h;this.left=this.top=false;this.setXY(o[0]+l[0],o[1]+l[1]);this.decorateDrag(false);h=null},decorateDrag:function(l){l?
this.setOpacity(this.dragOpacity).wrapper.hide():this.setOpacity(1).wrapper.show();this.shadow&&this.shadow.display(!l)},onClsBtnClick:function(){this.pCt.pCt.close()},setTitle:function(l){this.titlebar.setTitle(l);return this},switchState:function(){this.win_s!="max"?this.max():this.normalize()},getWrapperInsets:function(){return[29,1,1,1,30,2]},setTitle:function(l){if(this.titlebar){this.titlebar.setTitle(l);this.title=l}return this},close:function(){if(this.fire("close")===false)return false;this.onClose();
this.fire("closed");return this},onClose:function(){this.display(0)},_markStated:function(l){if(l){if(l=b.delAttr(this,"_normalBounds")){this.setXY(l[0]);this.setSize(l[1])}}else this._normalBounds=[this.xy(),this.getSize(true)]},min:function(){this.setState("min");return this},normalize:function(){return this.setState("normal")},max:function(){return this.setState("max")},setState:function(l){var o=this.win_s;if(this.win_s==l)return this;this.fire("statechange",l,o);switch(o){case "min":this.delClass(this.minCS);
break;case "max":this.delClass(this.maxCS);break;default:this._markStated()}switch(l){case "min":this.shadow&&this.shadow.show();this.addClass(this.minCS);this.setHeight(this.minH);break;case "max":this.shadow&&this.shadow.hide();this.addClass(this.maxCS);var q,t=this.pCt?this.pCt.view:this.view.parentNode;if(t===document.body)q=b.getViewport();else{t=b.fly(t);q=t.getSize();t.unfly()}this.setXY(0,0).setSize(q);break;default:this._markStated(true);this.shadow&&this.shadow.show()}this.win_s=l;this.fire("statechanged",
l,o);return this}}});CC.ui.def("win",CC.ui.Win);CC.Tpl.def("CC.ui.Dialog.Bottom",'<div class="g-win-bottom"><div class="bottom-wrap"></div></div>');
CC.create("CC.ui.Dialog",CC.ui.Win,function(a){var b=window.CC,g=b.Event,f;b.ui.Dialog.getOpenning=function(){return b.Base.byCid(f)};b.ui.def("dlg",b.ui.Dialog);return{bottomHeight:51,returnCode:false,defaultButton:false,initComponent:function(){this.createView();this.keyEventNode=this.view;if(this.bottomer===false)this.bottomHeight=0;else this.createBottom();a.initComponent.call(this);if(this.buttons&&this.bottomer!==false){this.bottomer.fromArray(this.buttons);delete this.buttons}this.keyEvent&&
this.on("keydown",this.onKeydownEvent,null,true)},onBottomItemSelected:function(d){if(d.returnCode!==false&&d.id){this.pCt.returnCode=d.id;var h=this.pCt["on"+d.id];if(!h||h.call(this.pCt,d)!==false)this.pCt.close()}},onKeydownEvent:function(d){if(g.ESC==d.keyCode)this.onCancel();else g.isEnterKey(d)&&this.onOk()},onOk:function(){this.bottomer&&this.defaultButton&&this.bottomer.selectionProvider.select(this.defaultButton,true)},onClsBtnClick:function(){this.pCt.pCt.returnCode=false;a.onClsBtnClick.apply(this,
arguments)},onCancel:function(){this.returnCode=false;this.close()},show:function(d,h,k){if(h!==undefined)this.modal=h;if(d!==undefined)this.modalParent=d;if(k!==undefined)this.modalCallback=k;return a.show.call(this)},trackZIndex:function(){a.trackZIndex.call(this);this.masker&&this.masker.setZ(this.getZ()-2);return this},onShow:function(){a.onShow.call(this);if(this.modal){var d=this.masker;if(!d)d=this.masker=new b.ui.Mask;d.target||d.attach(this.modalParent||b.$body)}this.center(this.modalParent);
this.trackZIndex.bind(this).timeout(0);this.focusDefButton();f=this.cacheId},onHide:function(){if(this.modal){if(this.modalCallback&&this.modalCallback(this.returnCode)===false)return this;this.masker&&this.masker.detach();delete this.modal;delete this.modalParent;delete this.modalCallback}a.onHide.call(this)},focusDefButton:function(){if(this.bottomer){var d=this.bottomer.$(this.defaultButton);d&&d.focus(22)}},createBottom:function(){var d=this.bottomer=b.ui.instance(b.extendIf(this.bottomer,{ctype:"ct",
pCt:this,itemCls:b.ui.Button,template:"CC.ui.Dialog.Bottom",ct:"_wrap",clickEvent:"click",keyEvent:true,selectionProvider:{forceSelect:true}}));this.follow(d);d.on("selected",this.onBottomItemSelected);this.addBottomNode(d)},addBottomNode:function(d){this.view.appendChild(d.view)},getWrapperInsets:function(){var d=a.getWrapperInsets.call(this),h=this.bottomHeight-1;d[2]+=h;d[4]+=h;return d}}});CC.Tpl.def("Util.alert.input",'<div class="msgbox-input"><table class="swTb"><tbody><tr><td valign="top"><b class="icoIfo" id="_ico"></b></td><td><span id="_msg" class="swTit"></span>&nbsp;<input type="text" style="" class="gIpt" id="_input"/><p class="swEroMsg"><span id="_err"></span></p></span></td></tr></tbody></table></div>');
CC.extendIf(CC.Util,function(){function a(b){return this.indexOf(b.id)>=0}return{_sysWin:null,getSystemWin:function(){var b=this._sysWin;if(!b){b=this._sysWin=new CC.ui.Dialog({id:"sysWin",setState:fGo,cs:"sysWin bot",resizeable:false,width:400,hidden:true,autoRender:true,keyEvent:true,showTo:document.body,setZ:fGo,buttons:[{title:"\u53d6&nbsp;\u6d88",id:"cancel"},{title:"\u786e&nbsp;\u5b9a",id:"ok"},{title:"&nbsp;\u5426&nbsp;",id:"no"},{title:"&nbsp;\u662f&nbsp;",id:"yes"},{title:"\u5173&nbsp;\u95ed",
id:"close"}]});b.getInputEl=function(){return this.wrapper.dom("_input")}}return b},alert:function(b,g,f,d,h,k){g=g||"\u63d0\u793a";var n=this.getSystemWin();n.setTitle(g).setSize(400,153).wrapper.html('<div class="msgbox-dlg">'+(b||"")+"</div>");if(!d)k=d="ok";n.bottomer.filter(a,d);if(k)n.defaultButton=k;n.fastStyleSet("visibility","hidden");n.show(h||document.body,true,f);(function(){n.autoHeight().center(h);n.fastStyleSet("visibility","")}).timeout(0)},inputBox:function(b,g,f,d,h,k){g=g||"\u63d0\u793a";
var n=this.getSystemWin();n.setTitle(g).setSize(400,175).wrapper.html(CC.Tpl["Util.alert.input"]).dom("_msg").innerHTML=b;n.wrapper.dom("_input");if(!d){d="ok|cancel";k="ok"}n.bottomer.filter(a,d);if(k)n.defaultButton=k;n.show(h||document.body,true,f);(function(){n.getInputEl().focus()}).timeout(80)}}}());
(function(){var a=window.CC,b=a.Event,g=a.util.SelectionProvider.prototype;a.Tpl.def("CC.ui.Menu",'<div class="g-panel g-menu"><div id="_wrap" class="g-panel-wrap"><ul class="g-menu-opt" id="_bdy"  tabindex="1" hidefocus="on"></ul></div></div>').def("CC.ui.MenuItem",'<li class="g-menu-item"><span id="_tle" class="item-title"></span></li>');a.create("CC.util.MenuSelectionProvider",a.util.SelectionProvider,{forceSelect:true,selectedCS:false,onSelect:function(f,d){f.handleClick(d);g.onSelect.call(this,
f)},navigateKey:function(f){switch(f.keyCode){case b.UP:this.t.menubar?this.tryActive(this.t,true):this.pre();b.stop(f);break;case b.DOWN:this.t.menubar?this.tryActive(this.t,true):this.next();b.stop(f);break;case b.LEFT:this.t.menubar?this.pre():this.left();b.stop(f);break;case b.RIGHT:this.t.menubar?this.next():this.right();b.stop(f);break;case b.ENTER:this.enter();b.stop(f);break;case b.ESC:this.esc();b.stop(f);break;default:return this.defKeyNav(f)}},tryActive:function(f,d){var h=f.onItem;if(h&&
h.subMenu){h.showMenu(true);this.tryActive(h.subMenu)}else(h=f.getSelectionProvider().getNext())&&h.active(d)},getStartIndex:function(){var f=this.t,d=f.onItem;return d?f.indexOf(d):-1},next:function(){var f=this.t,d=this.getNext();d||(d=f.$(0));d&&d.active(f.menubar)},pre:function(){var f=this.t,d=this.getPre();d||(d=f.$(f.size()-1));d&&d.active(f.menubar)},left:function(){var f=this.t;if(f.menubar)this.pre();else if(f=f.pItem){f.showMenu(false);f.pCt.menubar?f.pCt.getSelectionProvider().pre():f.active()}},
right:function(){var f=this.t;if(f.menubar)this.next();else{var d=f.onItem;if(d&&d.subMenu){d.showMenu(true);this.tryActive(d.subMenu)}else f.getRoot().getSelectionProvider().next()}},esc:function(){var f=this.t,d=f.onItem;if(f.menubar){if(d){d.deactive(true);f.setAutoExpand(false)}}else{var h=d&&d.subMenu;if(h&&!h.hidden)d.active(false);else f.pItem?f.pItem.active(false):f.hide()}},enter:function(){var f=this.t.onItem;f&&this.select(f)}});a.create("CC.ui.MenuItem",a.Base,function(f){return{subMenu:null,
subCS:"sub-x",initComponent:function(){f.initComponent.call(this);if(this.array){this.bindMenu(new a.ui.Menu({array:this.array,showTo:document.body}));delete this.array}},active:function(d){if(!this.disabled){var h=this.pCt,k=h.onItem;if(k!==this){k&&k.deactive(true);this.deactiveTimer&&this.clearDefer();h.onItem=this;(k=h.pItem)&&!k.isActive()&&k.active(d);this.decorateActive(true)}h.focus();this.subMenu&&this.showMenu(d)}},isActive:function(){return this.pCt.onItem===this},decorateActive:function(d){this.checkClass(this.pCt.activeCS,
d)},deactive:function(d){var h=this.subMenu;this.pCt.onItem=null;this.deactiveTimer&&this.clearDefer();this.decorateActive(false);h&&d&&!h.hidden&&this.showMenu(false)},deferDeactive:function(d){this.deactiveTimer=this.deactive.bind(this,d).timeout(100)},clearDefer:function(){clearTimeout(this.deactiveTimer);this.deactiveTimer=false},decorateExpand:function(d){this.checkClass(this.pCt.expandCS,d)},handleClick:function(d){var h=this.pCt;if(h.menubar){this.active(true);h.setContexted(true).setAutoExpand(true)}else if(this.subMenu){this.active(true);
d&&b.stop(d)}else h.hideAll()},showMenu:function(d){var h=this.subMenu;if(h)if(h.hidden!==!d){var k=this.pCt;h.rendered||h.render();if(d){this.decorateExpand(true);h.setZ((k.getZ()||8888)+2);k.menubar?h.anchorPos(this,"lb","hr",null,true,true):h.anchorPos(this,"rt","vd",null,true,true);h.focus(0)}else{this.decorateExpand(false);h.onItem&&h.onItem.deactive(true)}h.display(d)}},bindMenu:function(d){d.pItem=this;this.subMenu=d;this.decorateSub(true)},decorateSub:function(d){this.checkClass(this.subCS,
d)},unbind:function(){var d=this.subMenu;if(d){this.decorateSub(false);delete d.pItem;delete this.subMenu}},onRender:function(){f.onRender.call(this);if(this.subMenu)this.subMenu.rendered||this.subMenu.render()},destroy:function(){if(this.subMenu){this.subMenu.destroy();this.unbind()}f.destroy.call(this)}}});a.create("CC.ui.Menu",a.ui.Panel,function(f){return{hidden:true,width:115,pItem:null,activeCS:"itemOn",expandCS:"subHover",clickEvent:"mousedown",shadow:true,onItem:null,selectionProvider:a.util.MenuSelectionProvider,
itemCls:a.ui.MenuItem,ct:"_bdy",menubarCS:"g-menu-bar",separatorCS:"g-menu-separator",initComponent:function(){if(this.shadow===true)this.shadow=new a.ui.Shadow({inpactH:6,inpactY:-2,inpactX:-5,inpactW:9});f.initComponent.call(this);this.menubar&&this.addClass(this.menubarCS);if(this.array){this.fromArray(this.array);delete this.array}this.noUp();this.domEvent("mouseover",this.mouseoverCallback,true).domEvent("mouseout",this.mouseoutCallback,true)},mouseoverCallback:function(d){this.pItem&&this.pItem.pCt.setAutoHideTimer(false);
this.setAutoHideTimer(false);if(d=this.getChildFromEvent(d)){var h=this.pItem,k=this.onItem;if(k!==d){k&&k.deactive(true);h&&h.deactiveTimer&&h.clearDefer();this.menubar&&!this.autoExpand?d.active():d.active(true)}else k&&k.clearDefer()}},mouseoutCallback:function(){this.setAutoHideTimer(true)},autoHideTimeout:100,setAutoHideTimer:function(d){if(d){this._autoHideTimer&&clearTimeout(this._autoHideTimer);this._autoHideTimer=setTimeout(this._getAutoHideCallback(),this.autoHideTimeout)}else if(this._autoHideTimer){clearTimeout(this._autoHideTimer);
this._autoHideTimer=false}},_getAutoHideCallback:function(){if(!this._autoHideCallback)this._autoHideCallback=function(){var d=this.onItem;if(d)if(this.menubar)this.autoExpand||d.deferDeactive();else d.deferDeactive(true)}.bindRaw(this);return this._autoHideCallback},attach:function(d,h){h=this.$(h);h.bindMenu(d);this.menubar&&h.decorateSub(false)},beforeAdd:function(d){f.beforeAdd.apply(this,arguments);if(d.separator){this.addSeparator();delete d.separator}this.menubar&&d.subMenu&&d.decorateSub(false)},
beforeRemove:function(d){d===this.onItem&&this.onItem.deactive();return f.beforeRemove.call(this,d)},detach:function(d){d=this.$(d);d.unbind()},getRoot:function(){var d=this.pItem;if(!d)return this;return d.pCt.getRoot()},hideAll:function(){var d=this.getRoot();if(d.menubar&&d.onItem){d.onItem.deactive(true);d.setAutoExpand(false)}else d.display(false)},onHide:function(){f.onHide.call(this);this.onItem&&this.onItem.deactive(true);this.onDisplay(false)},onShow:function(){f.onShow.call(this);this.onDisplay(true)},
onDisplay:fGo,setAutoExpand:function(d){this.autoExpand=d},addSeparator:function(){this._addNode(a.ui.Menu.Separator.view.cloneNode(true))},at:function(d,h,k){this.display(true);if(typeof d==="number"){this.anchorPos([d,h,0,0],"lb","hr",null,true,true);k!==false&&!this.menubar&&this.setContexted(true)}else{this.anchorPos(d,"lb","hr",null,true,true);h!==false&&!this.menubar&&this.setContexted(true)}},destroy:function(){this.each(function(){if(this.subMenu&&!this.disabledCascadeDel){var d=this.subMenu;
this.pCt.detach(this);d.destroy()}});f.destroy.call(this)},onContextRelease:function(d){if(d&&this.isEventFromSubMenu(d))return false;this.hide()},isEventFromSubMenu:function(d){d=b.element(d);var h=this;return a.Base.byDom(d,function(k){return h.isChildMenu(k)})},isChildMenu:function(d){var h;return this.each(function(){if(h=this.subMenu){if(h===d)return false;return h.isChildMenu(d)!==true}})!==undefined}}});a.ui.Menu.Separator=a.$$(a.$C({tagName:"LI",className:a.ui.Menu.prototype.separatorCS}));
a.create("CC.ui.Menubar",a.ui.Menu,{menubar:true,hidden:false,shadow:false,onContextRelease:function(f){if(f&&this.isEventFromSubMenu(f))return false;this.onItem&&this.onItem.deactive(true);this.getSelectionProvider().select(null);this.setAutoExpand(false)}});a.ui.def("menu",a.ui.Menu).def("menuitem",a.ui.MenuItem).def("menubar",a.ui.Menubar)})();
(function(){var a=window.CC;a.Tpl.def("CC.ui.Tree",'<div class="g-tree"><div class="g-panel-body g-panel-body-noheader" id="_scrollor"><ul id="_ctx" class="g-tree-nd-ct  g-tree-arrows" tabindex="1" hidefocus="on"></ul></div></div>').def("CC.ui.TreeItem",'<li class="g-tree-nd"><div class="g-tree-nd-el g-unsel" unselectable="on" id="_head"><span class="g-tree-nd-indent" id="_ident"></span><img class="g-tree-ec-icon" id="_elbow" src="'+a.Tpl.BLANK_IMG+'"/><img unselectable="on" class="g-tree-nd-icon" src="'+
a.Tpl.BLANK_IMG+'" id="_ico" /><a class="g-tree-nd-anchor" unselectable="on" hidefocus="on" id="_tle"></a></div><ul class="g-tree-nd-ct" id="_bdy" style="display:none;" tabindex="1" hidefocus="on"></ul></li>').def("CC.ui.TreeItemSpacer",'<img class="g-tree-icon" src="'+a.Tpl.BLANK_IMG+'"/>');var b=a.ui.ContainerBase,g=b.prototype;a.create("CC.ui.TreeItem",b,{root:null,ct:"_bdy",expandEvent:"dblclick",dragNode:"_head",hoverCS:"g-tree-nd-over g-tree-ec-over",splitEndPlusCS:"g-tree-split-end-plus",splitEndMinCS:"g-tree-split-end-minus",
splitPlusCS:"g-tree-split-plus",splitMinCS:"g-tree-split-minus",splitCS:"g-tree-split",splitEndCS:"g-tree-split-end",nodeOpenCS:"g-tree-nd-opn",nodeClsCS:"g-tree-nd-cls",nodeLeafCS:"g-tree-nd-leaf",loadCS:"g-tree-nd-loading",elbowLineCS:"g-tree-elbow-line",springCS:"spring",mouseoverNode:"_head",mouseoverTarget:"_head",nodes:false,clickEvent:"click",clickEventNode:"_head",initComponent:function(){if(!this.root)this.root=this;if(this.array&&!this.nodes)this.nodes=true;g.initComponent.call(this);this._ident=
this.$$("_ident");this._elbow=this.$$("_elbow");this._head=this.$$("_head");if(this.nodes){this.expandEvent&&this.domEvent(this.expandEvent,this.expand,true,null,this._head.view);this.domEvent("mousedown",this.expand,true,null,this._elbow.view).domEvent("click",a.Event.noUp,true,null,this._elbow.view)}else this._head.addClass(this.nodeLeafCS);this._decElbowSt(false)},addIcon:function(k,n){var l=a.Tpl.$("CC.ui.TreeItemSpacer");n&&a.extend(l,n);a.fly(l).addClass(k).unfly();this.fly(this.titleNode).insertBefore(l).unfly();
return this},addSpring:function(k){k.view&&this.follow(k);this.fly(this.titleNode).insertBefore(k).unfly();a.fly(k).addClass(this.springCS).unfly()},expand:function(k){if(k!==true&&k!==false)k=!a.display(this.ct);if(this.root.tree.fire("expand",this,k)===false)return false;this._decElbowSt(k);a.display(this.ct,k);this.expanded=k;return this.root.tree.fire("expanded",this,k)},_decElbowSt:function(k){if(arguments.length==0)k=a.display(this.ct);var n=this.pCt;n=!n||n.ct.lastChild==this.view;var l=this._elbow,
o=this.splitEndPlusCS,q=this.splitEndMinCS,t=this.splitPlusCS,x=this.splitMinCS;if(this.nodes){if(n)if(l.hasClass(t))l.delClass(t);else l.hasClass(x)&&l.delClass(x);else if(l.hasClass(o))l.delClass(o);else l.hasClass(q)&&l.delClass(q);if(k){n?l.switchClass(o,q):l.switchClass(t,x);this._head.switchClass(this.nodeClsCS,this.nodeOpenCS)}else{n?l.switchClass(q,o):l.switchClass(x,t);this._head.switchClass(this.nodeOpenCS,this.nodeClsCS)}}else n?l.switchClass(this.splitCS,this.splitEndCS):l.switchClass(this.splitEndCS,
this.splitCS)},add:function(k){g.add.call(this,k);k._decElbowSt();k._applyChange(this);if(k=k.previous){k._decElbowSt();k._applyChange(this)}},_applyChange:function(k){this._applyRoot(k.root);this._applySibling();this._fixSpacer(k);if(this.nodes)this.itemCls=k.root.itemCls},_applyRoot:function(k){if(this.root!==k){this.root=k;if(this.nodes)for(var n=this.children,l=n.length-1;l>=0;l--)if(n[l].nodes)n[l]._applyRoot(k);else n[l].root=k}},_applySibling:function(k){if(k){if(this.previous)this.previous.next=
this.next;if(this.next)this.next.previous=this.previous;this.next=this.previous=null}else if(k=this.pCt){c=k.children;idx=c.indexOf(this);if(this.next=c[idx+1])this.next.previous=this;if(this.previous=c[idx-1])this.previous.next=this}else this.previous=this.next=null},clickEventTrigger:function(k){this.root.tree.fire("itemclick",this,k)},eachH:function(k,n){var l=this.children,o;if(n===d)n=0;for(var q=0,t=l.length;q<t;q++){o=l[q];if(k.call(o,o,++n)===false)return false;if(o.nodes)if(o.eachH(k,n)===
false)return false}},remove:function(k){k=this.$(k);var n=this.children[this.children.length-1]==k,l=k.previous;k._applySibling(true);g.remove.call(this,k);this.root.tree.getSelectionProvider().onItemRemoved(k);n&&this.size()>0&&this.children[this.children.length-1]._decElbowSt();l&&l._applyChange(this);return this},onRender:function(){this.root=this.pCt.root;this._applySibling();g.onRender.call(this);if(this.expanded){delete this.expanded;this.expand(true)}},insert:function(k,n){g.insert.call(this,
k,n);n._applyChange(this);n._decElbowSt()},getSpacerNodes:function(){var k=a.Tpl.forNode(a.Tpl["CC.ui.TreeItemSpacer"]);if(this.root===this)return k;for(var n=this._ident.view.childNodes,l=document.createDocumentFragment(),o=0,q=n.length;o<q;o++)l.appendChild(n[o].cloneNode(true));l.appendChild(k);return l},_fixSpacer:function(k){var n=this._ident.view;n.innerHTML="";n.appendChild(k.getSpacerNodes());k.next&&a.addClassIf(n.lastChild,k.elbowLineCS);if(this.nodes){k=0;for(n=this.size();k<n;k++)this.children[k]._fixSpacer(this)}}});
a.ui.TreeItem.prototype.itemCls=a.ui.TreeItem;a.ui.def("treeitem",a.ui.TreeItem);var f=a.ui.ContainerBase.prototype,d=window.undefined;a.create("CC.ui.tree.TreeSelectionProvider",a.util.SelectionProvider,{selectedCS:"g-tree-selected",decorateSelected:function(k,n){k._head.checkClass(this.selectedCS,n)},isSelected:function(k){return k._head.hasClass(this.selectedCS)},getNext:function(){var k=this.selected,n=this.t.root,l;if(k){k=k;for((l=!(k.nodes&&k.expanded&&k.children.length>0))||(k=k.children[0]);;)if(l)if(k.next){k=
k.next;if(this.canNext(k))break}else{if(k===n){k=null;break}k=k.pCt}else if(this.canNext(k))break;else l=true}else k=n;return k},getPre:function(){var k=this.selected,n=this.t.root,l;if(k){for(l=k.previous;(!l||!this.canPre(l)||l.nodes&&l.expanded&&l.children.length>0)&&l!=n;)if(l)l=l.nodes&&this.canPre(l)?l.children[l.children.length-1]:l.previous;else{l=k===n?null:k.pCt;break}if(l===k)l=null}else l=n;return l}});a.create("CC.ui.tree.TreeItemLoadingIndicator",a.ui.Loading,{markIndicator:function(){this.target._head.addClass(this.target.loadCS)},
stopIndicator:function(){var k=this.target;k._head.delClass(k.loadCS);k.getConnectionProvider().getConnectionQueue().isConnectorLoaded(k._dataConnectorId)&&k.expand(true)}});a.ui.TreeItem.prototype.indicator=a.ui.tree.TreeItemLoadingIndicator;var h={nodes:true,draggable:false,itemCls:a.ui.TreeItem,ctype:"treeitem"};a.create("CC.ui.Tree",a.ui.ContainerBase,{ct:"_ctx",url:false,autoLoad:false,parentParamName:"pid",keyEvent:true,clickEventTrigger:a.ui.TreeItem.prototype.clickEventTrigger,clickEventNode:"_head",
clickEvent:true,selectionProvider:a.ui.tree.TreeSelectionProvider,initComponent:function(){a.delAttr(this,"array");f.initComponent.call(this);if(!this.root||this.root.cacheId===d){var k=this.root||this.rootCfg;k&&delete this.rootCfg;this.root=this.instanceItem(a.extendIf(k,h))}if(this.hideRoot){this.root._head.hide();delete this.hideRoot}this.root.tree=this;this.add(this.root);this.on("expand",this.onExpand,this)},onExpand:function(k,n){if(this.autoLoad&&n)if(!this.isItemRequested(k)){this.loadItem(k);
return k.children.length>0}},loadItem:function(k){var n=this.getItemUrl(k);if(n){var l=k.getConnectionProvider();l.getIndicator();if(!this.isItemRequested(k))k._dataConnectorId=l.connect(n)}},isItemRequested:function(k){return!!k._dataConnectorId},getItemUrl:function(k){var n=a.templ(this,this.url);if(n)n+=(n.indexOf("?")>0?"&":"?")+encodeURIComponent(this.parentParamName)+"="+encodeURIComponent(k.id);return n},$:function(k){return k},each:function(k){var n=this.root;if(k.call(n,n,0)!==false)return n.eachH(k,
1)},setSize:function(k){f.setSize.apply(this,arguments);if(k!==false&&a.ie){var n=this.getScrollor();n!==this&&a.fly(n).setWidth(this.width).unfly()}}});a.ui.def("tree",a.ui.Tree)})();
(function(){function a(t){return!!((t&3)==0&&(t%100||t%400==0&&t))}function b(t,x){return x!=2?l[x-1]:a(t)?29:28}function g(t){t=(t.getDay()-(t.getDate()-1))%7;return t<0?t+7:t}function f(t){(function(){q.hide();q.bindingEditor.value=t;q.bindingEditor=null}).timeout(200)}function d(){var t=q,x=h.fly(t.bindingEditor);t.display(true).setValue(t.bindingEditor.value.trim(),true);t.anchorPos(x,"lb","hr",null,true,true);x.unfly();t.setContexted(true)}var h=window.CC,k=h.ui.Panel.prototype,n,l=[31,28,31,
30,31,30,31,31,30,31,30,31],o=h.Event;h.Tpl.def("CC.ui.Datepicker",'<div class="g-datepicker" ><div style="position: relative;"><table cellspacing="0" cellpadding="0" class="entbox"><tbody><tr><td class="headline"><table width="100%" cellspacing="0" cellpadding="1" align="center" class="dxcalmonth"><tbody><tr><td align="left" class="month_btn_left"><span></span></td><td align="center"><table cellspacing="0" cellpadding="0" align="center"><tbody><tr><td><div id="_seltor" class="g-datepicker-selecor" style="display:none;"></div><div id="_planeY" class="planeYear" style="cursor: pointer;">1955</div></td><td class="comma">,</td><td><div id="_planeM" class="planeMonth" title="\u70b9\u51fb\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u5e74\u4efd\u503c"></div></td></tr></tbody></table></td><td align="right" class="month_btn_right"><span></span></td></tr></tbody></table></td></tr><tr><td><table width="100%" cellspacing="0" cellpadding="0" class="g-datepicker-body"><tbody><tr><th class="month_spr"><span>\u6708</span></th><th><span>\u65e5</span></th><th><span>\u4e00</span></th><th><span>\u4e8c</span></th><th><span>\u4e09</span></th><th><span>\u56db</span></th><th><span>\u4e94</span></th><th><span>\u516d</span></th><th class="month_spr"><span>\u6708</span></th></tr></tbody></table></td></tr><tr><td id="_monthWrap"></td></tr><tr><td style="text-align:center;padding-bottom:5px;" id="_tdytd"></td></tr></tbody></table><div class="leftsplit" id="_preBar" onmouseover="CC.addClass(this, \'leftsplitOn\')" onmouseout="CC.delClass(this, \'leftsplitOn\')" ></div><div class="rightsplit" onmouseover="CC.addClass(this, \'rightsplitOn\')" onmouseout="CC.delClass(this, \'rightsplitOn\')" id="_nxtBar"></div></div></div>');
h.create("CC.ui.Datepicker",h.ui.Panel,{shadow:true,unselectable:true,eventable:true,value:new Date,fmt:"yy/mm/dd",mm:null,yy:null,dd:null,keyEvent:true,initComponent:function(){k.initComponent.call(this);this.monthWrap=this.dom("_monthWrap");this.domEvent("click",this.onDayClick,true,null,this.monthWrap).domEvent("click",this.onYearList,true,null,"_planeY").domEvent("click",this.onNavBarMove,true,null,"_nxtBar").domEvent("click",this.onNavBarMove,true,null,"_preBar");h.Util.qtip&&h.Util.qtip(this.$$("_planeY"),
"\u70b9\u51fb\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u5e74\u4efd\u503c");this.value&&this.setValue(this.value,true);this.todayBtn=new h.ui.Button({showTo:this.dom("_tdytd"),title:"\u4eca\u5929"});this.follow(this.todayBtn).domEvent("click",this.toToday,true,null,this.todayBtn.view).selectCt=this.$$("_seltor")},_hideYearSel:function(){this.selectCt.display(false)},onNavBarMove:function(t){o.element(t).id=="_nxtBar"?this.selectYear(this.yy+1):this.selectYear(this.yy-1)},selectYear:function(t){this.setValue(new Date(t,
this.mm,1),true)},toToday:function(){this.setValue(new Date)},onYearList:function(){var t=this.selectCt.view;this.selectCt.setContexted(true).display(true);t.firstChild||this.createList();t.firstChild.value=this.yy;t.lastChild.value="";(function(){t.lastChild.focus()}).timeout(20)},createList:function(){var t=this.selectCt.view,x=this.fly("_planeY");x.getSize();t.innerHTML=this.getSelectListHtml();var B=t.firstChild,A=t.lastChild;x.unfly();h.fly(A).fastStyleSet("width",B.offsetWidth).fastStyleSet("height",
B.offsetHeight).unfly();this.domEvent("change",function(){this.selectYear(B.value);this._hideYearSel()},false,null,B);this.noUp("click",t).bindEnter(function(){var E=parseInt(A.value.trim());isNaN(E)||this.selectYear(E);this._hideYearSel()},true,null,A)},getSelectListHtml:function(){for(var t=["<select>"],x=this.selectYearEnd||2100,B=this.selectYearStart||1900;B<=x;B++)t.push('<option value="'+B+'">'+B+"</option>");t.push('<input type="text" class="g-corner" />');return t.join("")},onDayClick:function(t){t=
o.element(t);if(t!=this.monthWrap){t=h.tagUp(t,"TD").id;t.indexOf("/")>0?this.setValue(new Date(t)):this.setValue(new Date(this.yy,parseInt(t),1),true)}},setValue:function(t,x){var B=this.currentDate;h.isDate(t)||(t=h.dateParse(t,this.fmt));var A=t.getFullYear();if(isNaN(A))__debug&&console.log("invalid date :"+t);else{var E=t.getMonth(),F=t.getDate();this.yy=A;this.mm=E;this.dd=F;this.currentDate=t;this.update(B);if(!x&&(!this.disableFilter||!this.disableFilter(A,E,F)))this.fire("select",h.dateFormat(t,
this.fmt),t)}},update:function(t){var x=this.mm+1,B=this.yy,A=this.dd;this.dom("_planeM").innerHTML=x+"\u6708";this.dom("_planeY").innerHTML=B+"\u5e74";var E=h.fly(this.monthWrap);if(t&&B==t.getFullYear()&&x==t.getMonth()+1){t=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear();h.delClass(E.dom(t),"selday")}else this.monthWrap.innerHTML=this.getMonthHtml(this.currentDate);t=x+"/"+A+"/"+B;(x=E.dom(t))&&h.addClass(x,"selday");E.unfly()},getMonthHtml:function(t){var x=[],B=new Date,A=B.getFullYear(),
E=t.getMonth()+1,F=t.getFullYear(),u=b(F,E),w=E-1,y=F,m=y,p=w==0?12:w;if(p==12)y-=1;w=E+1;w=w>12?1:w;if(w==1)m+=1;var v=g(t);t=b(y,p);var z=t-v+1;if(v==0)z=t-6;x.push('<table class="g-datepicker-days"  width="100%" cellspacing="0" cellpadding="0"><tbody>');v=0;var D="preday";p=p;y=y;for(var J=this.disableFilter,G=0;G<6;G++){x.push('<tr><td class="month_sep');G+1===E&&x.push(" selmonth");x.push('" id="'+G+'"><a href="javascript:fGo()" hidefocus="on">'+(G+1)+"</a></td>");for(var I=0;I<7;I++){x.push('<td class="'+
D);if(I==6)x.push(" sateday");else I==0&&x.push(" sunday");J&&J(y,p,z)&&x.push(" disabledday");x.push('" id="'+p+"/"+z+"/"+y+'"><a');A===y&&B.getMonth()+1===p&&B.getDate()===z&&x.push(' class="today" title="\u4eca\u5929:'+y+"\u5e74"+p+"\u6708"+z+'\u65e5"');x.push(' href="javascript:fGo()" hidefocus="on">'+z+"</a></td>");z++;if(z>t&&v==0){v=z=1;D="curday";p=E;y=F}else if(v==1&&z>u){v=2;z=1;D="nxtday";p=w;y=m}}x.push('<td class="month_sep month_r');G+7===E&&x.push(" selmonth");x.push('" id="'+(G+6)+
'"><a href="javascript:fGo()" hidefocus="on">'+(G+7)+"</a></td></tr>")}x.push("</tbody></table>");return x.join("")}});n=h.ui.Datepicker;n.dateFormat="yy/mm/dd";var q;n.getInstance=function(){if(!q){q=n.instance=new n({hidden:true,showTo:document.body,autoRender:true});q.on("select",f)}return q};n.show=function(t){n.getInstance();q.dateFormat=n.dateFormat;q.bindingEditor=t;d(true)}})();
(function(){var a=window.CC,b,g=a.Cache;a.create("CC.ui.grid.Column",a.Base,function(f){return{resizeDisabled:false,sortedCS:"sorted",ascCS:"asc",descCS:"desc",sortIndicatorCS:"sort-icon",createView:function(){this.view=a.$C({tagName:"TD",innerHTML:'<div class="hdrcell"></div>'});this.bdEl=this.view.firstChild;this.createViewBody(this.bdEl)},createViewBody:function(d){d.appendChild(a.$C({tagName:"span",id:"_tle"}))},onRender:function(){if(this.width!==false){var d=a.delAttr(this,"width");f.onRender.call(this);
this.width=d}else f.onRender.call(this)},cellBrush:function(d){return d},sortDecorator:function(d,h){this.addClassIf(this.sortedCS);if(h&&h!==this&&!h.order){h.checkClass(this.descCS,false);h.checkClass(this.ascCS,false)}d=d==="desc";this.switchClass(d?this.ascCS:this.descCS,d?this.descCS:this.ascCS);if(this.pCt){d=this.pCt._sortDecorateEl;if(!d)d=this.pCt._sortDecorateEl=a.Tpl.forNode('<span class="'+this.sortIndicatorCS+'"></span>');d.parentNode!==this.bdEl&&this.bdEl.appendChild(d)}},setWidth:function(d,
h){var k=this.pCt,n=this.preWidth,l;l=!n?false:d-n;if(k){h&&this.lock(true);k.fireUp("colwidthchange",this.pCt.indexOf(this),this,d,l);if(d!==this.width){d=this.width;if(l!==false)l=d-n}k.fireUp("aftercolwidthchange",this.pCt.indexOf(this),this,d,l);h&&this.lock(false)}else this.width=d;this.preWidth=d;return this},onShow:function(){this.pCt.fireUp("showcolumn",true,this,this.pCt.indexOf(this))},onHide:function(){this.pCt.fireUp("showcolumn",false,this,this.pCt.indexOf(this))},locked:0,lock:function(d){d?
this.locked++:this.locked--;if(this.locked<0){if(__debug)throw"lock operation failed: locked < 0";this.locked=0}}}});a.Tpl.def("CC.ui.Grid",'<div class="g-grid"></div>');a.create("CC.ui.Grid",a.ui.Panel,function(f){return{layout:"row",plugins:[{name:"header",ctype:"gridhd"},{name:"content",ctype:"gridcontent"}],initComponent:function(){f.initComponent.call(this);this.plugins=this.addPluginsInner(this.getInitPlugins())},onRender:function(){var d=false,h=false;if(this.width!==false)d=a.delAttr(this,
"width");if(this.height!==false)h=a.delAttr(this,"height");f.onRender.call(this);if(d!==false||h!==false)this.setSize(d,h)},extraRegisterEventMaps:function(d){for(var h=a.getObjectLinkedValues(d,"gridEventHandlers",true),k=0,n=h.length;k<n;k++)this.attachPluginEventHandlers(d,h[k])},attachPluginEventHandlers:function(d,h){if(typeof h==="function")h=h(d);for(var k in h)this.on(k,h[k],d)},pluginComparator:function(d,h){d=d.weight===b?d.ctype?a.ui.getCls(d.ctype).prototype.weight:0:d.weight;h=h.weight===
b?h.ctype?a.ui.getCls(h.ctype).prototype.weight:0:h.weight;if(d===h)return 0;return d<h?-1:1},getInitPlugins:function(){var d=a.getObjectLinkedValues(this,"plugins"),h;if(d.length===1)h=d[0];else if(d.length===0)return d;else{h=[];for(var k=0,n=d.length;k<n;k++)h=h.concat(d[k])}return h},addPluginsInner:function(d){d.sort(this.pluginComparator);var h,k,n,l,o,q=[];l=0;for(o=d.length;l<o;l++){k=d[l];h=k.name;h=k.cfgId||h;n={};a.extend(n,k);a.extend(n,a.delAttr(this,h));k=n.ctype;n.grid=this;__debug&&
tester.ok(!!k,true);n=a.ui.instance(k,n);this.extraRegisterEventMaps(n);q[l]=n;this[h]=n}d=[];l=0;for(o=q.length;l<o;l++){k=q[l];h=k.name;this.fireOnce("beforeinit"+h,k,this);if(k.initPlugin)if(n=k.initPlugin(this)){d.push(h);if(n===true)n=k;d.push(n);d.push(k)}this.fireOnce("afterinit"+h,k,this)}if(d.length){l=0;for(o=d.length;l<o;l+=3){this.fireOnce("beforeadd"+d[l],d[l+1],d[l+2]);this.layout.add(d[l+1]);this.fireOnce("afteradd"+d[l],d[l+1],d[l+2])}}return q},addPlugin:function(d){d=this.addPluginsInner([d]);
this.plugins.push(d[0])},destroyPlugins:function(){var d=this;a.each(this.plugins,function(){this.destroyPlugin&&this.destroyPlugin(d)})},destroy:function(){this.destroyPlugins();f.destroy.call(this)}}});a.ui.Grid.SCROLLBAR_WIDTH=17;a.ui.def("grid",a.ui.Grid);g.register("CC.ui.grid.Cell",function(){var f=a.$C({tagName:"TD",className:"grid-td"});f.appendChild(a.$C({tagName:"DIV",id:"_tle",className:"cell"}));return f});a.create("CC.ui.grid.Cell",a.Base,function(){return{brush:false,getTitleNode:function(){return this.view.firstChild},
setTitle:function(){return this}}});a.ui.grid.Column.prototype.colCls=a.ui.grid.Cell;g.register("CC.ui.grid.Row",function(){return a.$C({tagName:"TR",className:"grid-row"})});a.create("CC.ui.grid.Row",a.ui.ContainerBase,{eventable:false,brush:false,itemCls:a.ui.grid.Cell,hoverCS:"row-over",blockMode:0,displayMode:3,createView:function(){if(this.pCt)this.pCt.createRowView(this);else{this.view=g.get("CC.ui.grid.Row");a.ui.ContainerBase.prototype.createView.call(this)}},mouseoverCallback:function(f){this.pCt.onRowOver(this,
f)},mouseoutCallback:function(f){this.pCt.onRowOut(this,f)},fromArray:function(f){for(var d,h=this.pCt.grid.header.children,k=0,n=f.length;k<n;k++){cls=h[k].colCls;if(typeof cls==="string")cls=a.ui.ctypes[cls];d=f[k];if(!d.cacheId){d.ctype||(d=a.extendIf(d));d=this.instanceItem(d,cls,true)}this.add(d)}return this},getCell:function(f){var d=this.pCt.pCt.header;return this.$(d.indexOf(d.$(f)))},dataAt:function(f,d){if(d===b)return this.getCell(f).getValue();this.getCell(f).setValue(d)},textAt:function(f,
d,h){if(d===b)return this.$(f).getTitle();f=this.getCell(f);f.setTitle(d);h&&this.pCt.updateCell(f,d)},fire:fGo});a.ui.def("gridrow",a.ui.grid.Row)})();CC.Tpl.def("CC.ui.grid.Header",'<div class="g-grid-hd"><div class="hd-inner" id="_hd_inner"><table class="hd-tbl" id="_hd_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup><tbody><tr id="_ctx"></tr></tbody></table></div><div class="g-clear"></div></div>');
CC.create("CC.ui.grid.Header",CC.ui.ContainerBase,function(a){var b=CC.Base;return{itemCls:CC.ui.grid.Column,ct:"_ctx",peerCS:"peer",createView:function(){a.createView.call(this);this.grpEl=this.dom("_grp");this.hdTbl=this.$$("_hd_tbl")},onAdd:function(g){a.onAdd.apply(this,arguments);var f=CC.$C("COL");f.className=this.peerCS;this.grpEl.appendChild(f);g._colPeer=f},initPlugin:function(){return true},updateColWrapTblWidth:function(g,f){var d=this.hdTbl;if(d.width===false)d.setWidth(g);else f===false?
d.setWidth(d.width+g):d.setWidth(d.width+f)},gridEventHandlers:{colwidthchange:function(g,f,d){g=f.view;f.view=f._colPeer;b.prototype.setWidth.call(f,d);f.view=g},aftercolwidthchange:function(g,f,d,h){this.updateColWrapTblWidth(d,h)},contentscroll:function(g,f){if(parseInt(this.view.scrollLeft,10)!==f)this.view.scrollLeft=f},showcolumn:function(g,f){f._colPeer.style.width=g?f.width+"px":"0px";g||this.updateColWrapTblWidth(false,-f.width)}},fireUp:function(){var g=this.pCt;if(g)return g.fire.apply(g,
arguments)},getColumnCount:function(){return this.children.length}}});CC.ui.grid.Header.WEIGHT=CC.ui.grid.Header.prototype.weight=-100;CC.ui.def("gridhd",CC.ui.grid.Header);CC.Tpl.def("CC.ui.grid.Content",'<div class="g-grid-ct"><table class="ct-tbl" id="_ct_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup><tbody id="_ctx"></tbody></table></div>');
CC.create("CC.ui.grid.Content",CC.ui.Panel,function(a){var b,g=CC.Cache,f=CC.ui.ContainerBase.prototype;return{itemCls:CC.ui.grid.Row,ct:"_ctx",useContainerMonitor:true,syncWrapper:false,clickEvent:"click",selectionProvider:{selectedCS:"row-select"},lyInf:{h:"lead"},initPlugin:function(){this.ctTbl=this.$$("_ct_tbl");return true},setupColumnLever:function(){var d,h,k=this.levers=[],n=this.grid.header.children,l=n.length,o=this.dom("_grp");for(h=0;h<l;h++){d=this.$$(CC.$C("COL"));k[h]=d;n[h].hidden&&
this.setCellsVisible(false,h,d);o.appendChild(d.view)}if(d=this.cacheWidths){delete this.cacheWidths;h=0;for(l=d.length;h<l;h++)d[h]!==b&&k[h].setWidth(d[h])}},onRender:function(){this.setup();a.onRender.call(this);this.batchUpdating=true;this.updateView();this.batchUpdating=false},setup:function(){this.setupColumnLever();this.setupEvent()},setupEvent:function(){this.domEvent("scroll",this.onScroll);this.on("resized",this.onResized)},bindClickInstaller:function(){this.itemAction(this.clickEvent,this.onRowClick,
false,null,this.dom("_ct_tbl"));this.itemAction("dblclick",this.onRowDblClick,false,null,this.dom("_ct_tbl"))},updateContentWrapTblWidth:function(d,h){var k=this.ctTbl;if(k.width===false)k.setWidth(d);else h===false?k.setWidth(k.width+d):k.setWidth(k.width+h)},updateLeversWidth:function(d,h){if(this.levers)this.levers[d].setWidth(h);else{var k=this.cacheWidths;if(!k)k=this.cacheWidths=[];k[d]=h}},setCellsVisible:function(d,h,k){if(this.levers){h=k||this.levers[h];h.view.style.width=d?h.width+"px":
"0px"}},getScrollor:function(){return this.view},onAdd:function(d){this.altCS&&this.size()%2&&d.addClass(this.altCS);a.onAdd.apply(this,arguments);this.rendered&&!this.batchUpdating&&this.updateRow(d);d.rendered||d.render()},onInsert:function(d,h){a.onInsert.apply(this,arguments);this.rendered&&!this.batchUpdating&&this.updateRow(h);h.rendered||h.render()},onScroll:function(d){this.grid.fire("contentscroll",d,parseInt(this.view.scrollLeft,10)||0,this)},onRowClick:function(d,h){if(!this.clickDisabled&&
!d.ignoreClick){var k=d.$(h.srcElement||h.target),n;if(k){if(k.disabled)return;if(!d.clickDisabled&&!k.ignoreClick)n=this.grid.fire("cellclick",k,h)}if(n!==false){this.fire("itemclick",d,h);this.grid.fire("rowclick",d,h)}}},dblclickDisabled:false,onRowDblClick:function(d,h){if(!this.dblclickDisabled){var k=d.$(h.srcElement||h.target);if(!k||!k.disabled)this.grid.fire("rowdblclick",d,k,h)}},hoverEvent:false,onRowOver:function(d,h){this.hoverEvent===true&&this.grid.fire("rowover",d,h)},onRowOut:function(d,
h){this.hoverEvent===true&&this.grid.fire("rowout",d,h)},instanceItem:function(d){if(d&&!d.cacheId){var h=this.grid.header.children;if(d.array){if(d.array.length!==h.length){k=d.array;i=0;for(len=h.length;i<len;i++)h[i].dataCol||k.insert(i,{})}}else{var k=d.array=[];i=0;for(len=h.length;i<len;i++)k[k.length]={title:""}}}return a.instanceItem.apply(this,arguments)},onResized:function(d){if(d!==false)if(CC.ie)this.grid.fire("contentscroll",null,parseInt(this.view.scrollLeft,10)||0,this)},gridEventHandlers:{aftercolwidthchange:function(d,
h,k,n){this.updateContentWrapTblWidth(k,n);this.updateLeversWidth(d,k,n)},sortcol:function(){this.sortByCol.apply(this,arguments)},showcolumn:function(d,h,k){this.setCellsVisible(d,k);d||this.updateContentWrapTblWidth(false,-h.width)}},sortByCol:function(d,h,k,n){this.sort(function(l,o){l=l.children[h].getValue();o=o.children[h].getValue();return k==="asc"?n(l,o):n(o,l)})},updateView:function(){var d=this.grid.header.children,h=d.length,k,n=this.children,l=n.length,o=[];for(k=0;k<h;k++)o[k]=d[k].cellBrush;
for(k=0;k<l;k++)for(j=0;j<h;j++)this.updateCell(n[k].children[j],b,n[k].brush||o[j])},createRowView:function(d){d.view=g.get("CC.ui.grid.Row");f.createView.call(d)},updateRow:function(d){var h=this.grid.header.children,k=d.children,n=k.length;for(d=0;d<n;d++)this.updateCell(k[d],b,k[d].brush||h[d].cellBrush)},updateCell:function(d,h,k){k||(k=d.brush||this.grid.header.$(d.pCt.indexOf(d)).cellBrush);if(h===b)h=d.title===b?d.value:d.title;d.getTitleNode().innerHTML=k.call(d,h)},cellAt:function(d,h){return this.children[d].children[h]},
dataAt:function(d,h,k){if(k===b)return this.$(d).$(h).getValue();this.$(d).$(h).setValue(k)},textAt:function(d,h,k){if(k===b)return this.$(d).$(h).getTitle();this.$(d).$(h).setTitle(k)}}});CC.ui.grid.Column.prototype.dataCol=true;CC.ui.grid.Content.WEIGHT=CC.ui.grid.Content.prototype.weight=-80;CC.ui.def("gridcontent",CC.ui.grid.Content);CC.Tpl.def("CC.ui.grid.TreeCellBody",'<div class="g-tree-nd-el g-tree-nd-cls g-tree-nd g-tree-arrows"><div class="g-tree-nd-indent" id="_ident"><div class="g-tree-ec-icon" id="_pls"></div><div class="g-tree-nd-icon" id="_ico"></div></div><div class="g-tree-nd-anchor" id="_wr"><span id="_tle" class="g-unsel" unselectable="on"></span></div><div class="g-clear"></div></div>');
CC.create("CC.ui.grid.TreeCell",CC.ui.grid.Cell,function(a){return{splitPlusCS:"g-tree-split-plus",splitMinCS:"g-tree-split-minus",nodeOpenCS:"g-tree-nd-opn",nodeClsCS:"g-tree-nd-cls",nodeLeafCS:"g-tree-nd-leaf",rowHoverCS:"g-tree-nd-over g-tree-ec-over",identW:16,initComponent:function(){a.initComponent.call(this);this.domEvent("mousedown",this.onElbowClick,true,null,this._elbow.view).domEvent("click",CC.Event.noUp,true,null,this._elbow.view);this._checkIfNodes(false);this.pCt.treeCell=this},onElbowClick:function(){this.pCt.expand(!this.pCt.expanded)},
createView:function(){a.createView.call(this);var b=CC.Tpl.$("CC.ui.grid.TreeCellBody");this.titleNode=CC.$("_tle",b);this._elbow=this.$$(CC.$("_pls",b));this._icon=this.$$(CC.$("_ico",b));this._ident=this.$$(CC.$("_ident",b));this._head=this.$$(b);var g=this.view.firstChild;g.id="";g.appendChild(b);this.addClass("g-treegrid-cell")},getTitleNode:function(){return this.titleNode},_decElbowSt:function(b){if(b===undefined)b=this.pCt.expanded;if(this.pCt.nodes)if(b){this._elbow.switchClass(this.splitPlusCS,
this.splitMinCS);this._head.switchClass(this.nodeClsCS,this.nodeOpenCS)}else{this._elbow.switchClass(this.splitMinCS,this.splitPlusCS);this._head.switchClass(this.nodeOpenCS,this.nodeClsCS)}},_checkIfNodes:function(b){if(this.pCt.nodes)this._head.hasClass(this.nodeLeafCS)&&this._head.delClass(this.nodeLeafCS);else this._head.hasClass(this.nodeLeafCS)||this._head.addClass(this.nodeLeafCS);this._decElbowSt(b)}}});CC.ui.def("treecell",CC.ui.grid.TreeCell);
CC.create("CC.ui.grid.TreeRow",CC.ui.grid.Row,function(a){return{_curIdent:0,initComponent:function(){a.initComponent.call(this);if(this.nodes){nds=CC.delAttr(this,"nodes");for(var b=0,g=nds.length;b<g;b++)this.addItem(nds[b]);if(!nds.length)this.nodes=nds}},onRender:function(){a.onRender.call(this);if(this.expanded){delete this.expanded;this.expand(true)}},addItem:function(b){var g=this.nodes;if(!g)g=this.nodes=[];b.hidden=this.hidden||!this.expanded;b=this.pCt.instanceItem(b);b.pNode=this;this.view.parentNode===
this.pCt.ct&&this._addItemView(b);g.push(b);b._applyChange(this);this.rendered&&this.treeCell._checkIfNodes();(g=b.previous)&&g._applyChange(this);return b},removeItem:function(b,g){this.rendered&&b._removeFromView(g);b.pNode=null;g=b.previous;this.nodes.remove(b);b._applySibling(true);g&&g._applySibling();this.rendered&&this.treeCell._checkIfNodes()},insertItem:function(b,g){var f=this.nodes;g.pNode===this&&f.indexOf(g)<b&&b--;if(!f)f=this.nodes=[];if(g.pNode)g.pNode.removeItem(g);else{g.hidden=
this.hidden||!this.expanded;g=this.pCt.instanceItem(g)}g.pNode=this;f.insert(b,g);if(this.rendered){delete g.pCt;f[b+1]?this.pCt.insert(this.pCt.indexOf(f[b+1]),g):this.pCt.insert(this.pCt.indexOf(this)+1,g);g.pCt=this.pCt;this.treeCell._checkIfNodes()}g._applyChange(this);return g},expanded:false,expand:function(b){if(this.expanded!==b){if(this.pCt.grid.fire("expandtree",this,b)===false)return false;this.treeCell._decElbowSt(b);this._expandContent(b);this.expanded=b;return this.pCt.grid.fire("expandedtree",
this,b)}},onHide:function(){a.onHide.call(this);if(this.nodes)for(var b=0,g=this.nodes,f=g.length;b<f;b++)g.hidden||g[b].display(false)},onShow:function(){a.onShow.call(this);if(this.expanded&&this.nodes)for(var b=0,g=this.nodes,f=g.length;b<f;b++)g[b].hidden&&g[b].display(true)},_applySibling:function(b){if(b){if(this.previous)this.previous.next=this.next;if(this.next)this.next.previous=this.previous;this.next=this.previous=null}else if(b=this.pNode){c=b.nodes;idx=c.indexOf(this);if(this.next=c[idx+
1])this.next.previous=this;if(this.previous=c[idx-1])this.previous.next=this}else this.previous=this.next=null},_applyChange:function(){this._applySibling();this._fixSpacer()},_fixSpacer:function(b){if(b=b||this.pNode){var g=this.treeCell;b=b._curIdent+g.identW;g._head.view.style.paddingLeft=b+"px";this._curIdent=b;if(this.nodes){g=0;b=this.nodes;for(var f=b.length;g<f;g++)b[g]._fixSpacer(this)}}},_navInsertPlaceHold:function(){return this.nodes?!this.nodes[this.nodes.length-1]?this:this.nodes[this.nodes.length-
1]._navInsertPlaceHold():this},_addItemView:function(b){var g=this.pCt.indexOf(this._navInsertPlaceHold())+1;delete b.pCt;this.pCt.insert(g,b);b.pCt=this.pCt;if(b.nodes){g++;for(var f=b.nodes,d=f.length,h=0;h<d;h++)g=b._batchAddItemView(f[h],g)}},_batchAddItemView:function(b,g){delete b.pCt;this.pCt.insert(g,b);b.pCt=this.pCt;g++;if(b.nodes)for(var f=b.nodes,d=f.length,h=0;h<d;h++)g=b._batchAddItemView(f[h],g);return g},_removeFromView:function(b){if(this.nodes)for(var g=this.nodes,f=0,d=g.length;f<
d;f++)if(g[f].nodes)g[f]._removeFromView();else g[f].pCt&&g[f].pCt.remove(g[f],true);!b&&this.pCt&&this.pCt.remove(this,true)},_expandContent:function(b){if(this.nodes)for(var g=0,f=this.nodes,d=f.length;g<d;g++)f[g].display(b)},mouseoverCallback:function(){this.treeCell._ident.addClass(this.treeCell.rowHoverCS);a.mouseoverCallback.apply(this,arguments)},mouseoutCallback:function(){this.treeCell._ident.delClass(this.treeCell.rowHoverCS);a.mouseoutCallback.apply(this,arguments)},destroy:function(){if(this.nodes)for(var b=
0,g=this.nodes,f=g.length;b<f;b++)g[b].destroy();a.destroy.call(this)}}});CC.create("CC.ui.grid.TreeContent",CC.ui.grid.Content,function(a){return{itemCls:CC.ui.grid.TreeRow,onAdd:function(b){a.onAdd.apply(this,arguments);b._applyChange();if(b.nodes)for(var g=this.indexOf(b)+1,f=0,d=b.nodes,h=d.length;f<h;f++)g=b._batchAddItemView(d[f],g)},remove:function(b,g){a.remove.apply(this,arguments);!g&&b.pNode?b.pNode.removeItem(b,true):b._removeFromView(true)}}});CC.ui.def("treecontent",CC.ui.grid.TreeContent);
CC.create("CC.ui.grid.ContentStoreProvider",CC.util.StoreProvider,{modifyCS:"g-form-mdy",filterChanged:true,isModified:function(a){var b=false;a.each(function(){if(this.modified){b=true;return false}});return b},decorateModified:function(a,b){var g=this;a.each(function(){this.modified&&g.decorateCellModified(this,b)})},decorateCellModified:function(a,b){if(a.modified!==b){a.checkClass(a.modifyCS||this.modifyCS,b);a.modified=b}},createNew:function(a,b){if(!a){a={array:[]};this.t.pCt.header.each(function(){a.array.push({title:""})})}return CC.util.StoreProvider.prototype.createNew.call(this,
a,b)},getItemQuery:function(a,b){var g=[],f,d=a.children,h,k=this.submitModify;this.t.pCt.header.each(function(n,l){if(!k||d[l].modified){f=this.qid||this.id;h=d[l].getValue();if(f&&h!==undefined)g[g.length]=f+"="+encodeURIComponent(h)}});if(f=g.length?g.join("&"):"")if(b)b+="&"+f;else b=f;return b}});CC.ui.grid.Content.prototype.storeProvider=CC.ui.grid.ContentStoreProvider;
CC.create("CC.ui.grid.ContentValidation",CC.util.ValidationProvider,{decorateValidation:fGo,decorateCellValidation:function(a,b,g){a.checkClass(this.errorCS,!b);b?a.setTip(""):a.setTip(g)},validator:function(a,b){var g=0,f=this.t.pCt.header.children,d=true,h=this.t.getStoreProvider().isNew(a),k=this;a.each(function(){if(h||this.modified)if(k.validateCell(this,f[g].validator)===false&&d===true)d=false;g++});d||b.push(d);return d},validateCell:function(a,b){var g=true;if(!b)b=this.t.pCt.header.$(a.pCt.indexOf(a)).validator;
if(b){b=b.call(a,a.getValue());if(b!==true)g=false;this.decorateCellValidation(a,b===true,b)}return g},each:function(){var a=this.t.getStoreProvider();a.each.apply(a,arguments)}});CC.ui.grid.Content.prototype.validationProvider=CC.ui.grid.ContentValidation;CC.ui.Grid.prototype.autoFit=false;
CC.create("CC.ui.grid.plugins.ColumnWidthControler",null,function(){Math=window.Math;return{autoFitCS:"g-grid-fit",minColWidth:10,initialize:function(a){CC.extend(this,a)},initPlugin:function(a){a.autoFit&&a.addClass(this.autoFitCS)},gridEventHandlers:{resized:function(a){if(a!==false)if(this.hasInitColWidths){if(this.grid.autoFit){a=Math.max(0,a-CC.ui.Grid.SCROLLBAR_WIDTH);this.autoColWidths(a)}}else{a=Math.max(0,a-CC.ui.Grid.SCROLLBAR_WIDTH);this.initColWidths(a);this.hasInitColWidths=true}},aftercolwidthchange:function(a,
b){b._widthcontrolset||this.autoColWidths()},showcolumn:function(){this.autoColWidths()}},initColWidths:function(a){var b=a,g=this.grid.header,f=g.getColumnCount(),d,h=this.minColWidth,k=this;g.each(function(){if(!this.hidden){d=this.width;if(d!==false){if(d<1)d=Math.floor(a*d);f--;k.setColWidth0(this,Math.max(d,h));b-=this.width}}});d=Math.max(Math.floor(b/f),h);g.each(function(){this.width===false&&!this.hidden&&k.setColWidth0(this,d)})},getAutoWidthLen:function(a){return Math.max(0,(a||this.grid.width)-
CC.ui.Grid.SCROLLBAR_WIDTH)},setColWidth0:function(a,b){a._widthcontrolset=true;a.setWidth(b,true);delete a._widthcontrolset},deliverDelta:function(a){__debug&&console.log("auto dw:",a);var b=this.grid.header.children,g=b.length,f,d,h=this.minColWidth,k,n,l=[],o=[];for(k=0;k<g;k++)if(!b[k].locked&&!b[k].resizeDisabled&&!b[k].hidden)l[l.length]=b[k];for(;a!==0&&l.length;){b=Math.floor(a/l.length);k=0;for(g=l.length;k<g;k++){n=l[k];d=n.width;f=Math.max(n.width+b,h);if(f!==d){this.setColWidth0(n,f);
if(n.width!==d)a-=n.width-d;else o.push(n)}else o.push(n)}for(k=0;k<o.length;k++)l.remove(o[k]);o=[]}__debug&&console.log("remain dw:",a)},autoColWidths:function(a){if(this.grid.autoFit){a||(a=this.getAutoWidthLen());var b=0;this.grid.header.each(function(){this.hidden||(b+=this.width||0)});var g=a-b;__debug&&console.log("grid width:",a,",current width:",b,",dw:",g);g!=0&&this.deliverDelta(g)}},getConstrain:function(a){if(a.hidden)return[0,0];if(a.resizeDisabled)return[a.width,a.width];var b=a.width-
Math.max(this.minColWidth,a.minW,0);if(this.grid.autoFit){var g=this.grid.header;a=g.indexOf(a);g=g.children;minW=maxW=0;a=a+1;for(var f=g.length;a<f;a++)if(!g[a].hidden){maxW+=g[a].width;minW=Math.max(this.minColWidth,g[a].minW,0)}return[b,maxW-minW]}return[b,Math.MAX_VALUE]}}});CC.ui.def("colwidthctrl",CC.ui.grid.plugins.ColumnWidthControler);CC.ui.Grid.prototype.plugins.push({name:"colwidthctrl",ctype:"colwidthctrl"});
CC.create("CC.ui.grid.plugins.Editation",null,function(){var a=CC.Event,b=window.Math;CC.ui.grid.Column.prototype.editable=true;CC.ui.grid.Row.prototype.editable=true;CC.ui.grid.Cell.prototype.editable=true;CC.ui.grid.Cell.prototype.getValue=function(){return this.value===undefined?this.title:this.value};CC.ui.grid.Cell.prototype.setValue=function(g){this.value=g;return this};return{editable:true,trigMode:"cellclick",editorCS:"g-flot-editor",initialize:function(g){g&&CC.extend(this,g);var f=this;
switch(this.trigMode){case "cellclick":this.grid.on(this.trigMode,function(d){f.strictStartEdit(d)});break;case "rowdblclick":this.grid.on(this.trigMode,function(d,h){h&&f.strictStartEdit(h)})}g=null},isCellEditable:function(g,f){f||(f=this.grid.header.$(g.pCt.indexOf(g)));return this.editable&&f.editor&&f.editable&&g.pCt.editable&&!g.disabled&&g.editable},strictStartEdit:function(g){var f=g.pCt.indexOf(g),d=this.grid.header.$(f);this.isCellEditable(g,d)&&this.startEdit(g,f,d)},getEditor:function(g){var f=
g.editor;if(f&&(!f.cacheId||typeof f==="string")){if(typeof f==="string")f={ctype:f};CC.extendIf(f,{showTo:document.body,autoRender:true,shadow:true});if(f.shadow===true)f.shadow=CC.ui.instance({ctype:"shadow",inpactH:6,inpactY:-2,inpactX:-5,inpactW:9});f=g.editor=this.createEditor(f);f.addClass(this.editorCS)}return f},createEditor:function(g){g=CC.ui.instance(g);var f=this;g.on("contexted",function(d){!d&&this.bindingCell&&f.endEdit(this.bindingCell)});g.on("keydown",function(d){if(this.bindingCell){var h=
this.bindingCell;if(a.TAB===d.keyCode){f.endEdit(h);if(h=f.getNextEditableBlock(h.pCt,h.pCt.indexOf(h))){f.startEdit(h);a.stop(d);return false}}else if(a.ESC===d.keyCode){f.endEdit(h);a.stop(d);return false}}});return g},getNextEditableBlock:function(g,f){var d=g.children[f+1];if(d)this.isCellEditable(d)||(d=this.getNextEditableBlock(g,f+1));else if(g=g.pCt.children[g.pCt.indexOf(g)+1])d=this.getNextEditableBlock(g,-1);return d},startEdit:function(g,f,d){this.startEdit0.bind(this,g,f,d).timeout(0)},
startEdit0:function(g,f,d){g.scrollIntoView(this.grid.content.getScrollor(),true);if(f===undefined)f=g.pCt.indexOf(g);d||(d=this.grid.header.$(f));var h=this.getEditor(d);if(h){h.bindingCell=g;g.bindingEditor=h;this.setBoundsForEditor(g,h);h.setValue(g.getValue()).setText(g.getTitle()).trackZIndex().show().setContexted(true).focus();h.active();this.grid.fire("editstart",g,h,d,f,this)}},endEdit:function(g,f){var d=this.grid,h=g.pCt.indexOf(g),k=g.bindingEditor,n;if(f!==false&&d.fire("edit",g,k,h,this)!==
false){k.hide();f=k.getValue();n=g.getValue();if(f!=n){n=k.getText();d.content.updateCell(g,n);g.setValue(f);g.title=n;this.grid.content.getValidationProvider().validateCell(g);g.modified||d.content.getStoreProvider().decorateCellModified(g,true)}d.fire("editend",g,k,h,this);k.bindingCell=null;delete g.bindingEditor}},setBoundsForEditor:function(g,f){var d=g.getSize();g=g.absoluteXY();f.setSize(d);if(f.height<d.height)g[1]+=b.floor((d.height-f.height)/2);f.setXY(g)}}});CC.ui.def("grideditor",CC.ui.grid.plugins.Editation);
CC.create("CC.ui.grid.plugins.Toolbar",null,{installWhen:"afteraddcontent",defCType:"smallbar",tb:false,initialize:function(a){CC.extend(this,a);this.gridEventHandlers={};this.gridEventHandlers[this.installWhen]=this.installUI},initPlugin:function(){var a=this.tb||{};if(!a.ctype)a.ctype=this.defCType;a.layout="tablize";this.tb=CC.ui.instance(a)},installUI:function(){this.grid.fire("beforeadd"+this.name,this.tb,this);this.grid.layout.add(this.tb);this.grid.fire("afteradd"+this.name,this.tb,this)}});
CC.ui.def("gridtb",CC.ui.grid.plugins.Toolbar);
CC.create("CC.ui.grid.plugins.Pagenation",null,{current:false,count:0,size:10,autoLoad:true,params:false,customQuery:false,disabled:false,initialize:function(a){CC.extend(this,a)},initPlugin:function(a){a.content.on("statuschange",this._onConnectorStatusChange,this);this.autoLoad&&a.on("rendered",this.go,this)},gridEventHandlers:{afteraddtb:function(a){this.installUI(a);this.tb=a}},installUI:function(a){var b=this;a.layout.fromArray([{id:"first",tip:"\u7b2c\u4e00\u9875",icon:"g-icon-navfirst",onclick:b.go.bind(b,
1)},{id:"pre",lyInf:{separator:true},tip:"\u4e0a\u4e00\u9875",icon:"g-icon-navpre",onclick:b.pre.bind(b)},{lyInf:{separator:true},id:"current",template:'<span class="lbl">\u7b2c <span><input class="g-ipt-text g-corner" style="text-align:center;" id="_i" size="3"/></span> \u9875</span>',ctype:"base",clickDisabled:true},{id:"next",tip:"\u4e0b\u4e00\u9875",icon:"g-icon-navnxt",onclick:b.next.bind(b)},{lyInf:{separator:true},id:"last",tip:"\u6700\u540e\u4e00\u9875",icon:"g-icon-navlast",onclick:function(){b.go(b.count)}},
{lyInf:{separator:true},id:"total",template:'<span class="lbl">\u5171<span id="_t">0</span>\u9875</span>',ctype:"base",clickDisabled:true},{id:"refresh",tip:"\u5237\u65b0\u5f53\u524d\u9875",icon:"g-icon-ref",onclick:function(){b.refresh()}}]);this.currentEl=a.$("current").dom("_i");this.totalEl=a.$("total").dom("_t");a.bindEnter(function(){b.currentEl.value.trim()&&b.go(parseInt(b.currentEl.value))},true,null,this.currentEl)},refresh:function(){this.go(this.current,true)},setSize:function(a){this.size=
a;return this},disable:function(a){this.disabled=a;this.updateUIStatus();return this},go:function(a,b){if(!this.disabled){if(!a||typeof a==="number")a={current:a||1};var g=a.current;if((this.current!==g||b)&&g>0)this.grid.fire("page:beforechange",a,this)!==false&&this.onPageChange(a)}return this},isResponseOk:function(){return true},onPageChange:function(a){if(this.url){a||(a={});a=this.createQuery(a);this.grid.content.getConnectionProvider().connect(CC.templ(this,this.url,2),{success:this._onSuccess,
params:a})}},_onConnectorStatusChange:function(a){if(a==="open")this.tb.$("refresh").disable(true);else a==="final"&&this.tb.$("refresh").disable(false)},createQuery:function(a){CC.extendIf(a,{size:this.size,count:this.count,current:this.current});this.params&&CC.extend(a,this.params);this.customQuery&&this.customQuery(a);return a},_onSuccess:function(a){var b=this.t.pCt.pagenation;if(b.isResponseOk(a)){json=a.getJson();b.size=json.size;b.count=json.count;b.current=json.current||a.params.current;
if(b.current>b.count)b.current=b.count;this.t.destroyChildren();this.defaultDataProcessor("json",json.data);b.grid.fire("page:afterchange",b,json,a);b.updateUIStatus()}},updateUIStatus:function(){var a=this.tb,b=this.current,g=this.count,f=this.disabled||g===1||b<=1;a.$("first").disable(f);a.$("pre").disable(f);f=this.disabled||b===g||g===1;a.$("next").disable(f);a.$("last").disable(f);this.currentEl.value=b||"";this.totalEl.innerHTML=g;a.$("refresh").disable(this.disabled||g==0)},next:function(){this.current!==
this.count&&this.go(this.current+1)},pre:function(){this.current-1>=1&&this.go(this.current-1)}});CC.ui.def("gridpage",CC.ui.grid.plugins.Pagenation);
CC.create("CC.ui.grid.plugins.ColumnResizer",null,function(){var a=CC.util.dd.Mgr,b=a.resizeHelper,g=CC.Event,f=window.Math,d,h=[0,0,0,0],k=0;CC.ui.grid.Column.prototype.resizeDisabled=false;return{resizeDisabled:false,monitorLen:10,initialize:function(n){CC.extend(this,n)},install:function(n){n.itemAction("mousemove",this.onColMouseMove,false,this).itemAction("mousedown",this.onColMouseDown,false,this)},dragstart:function(){this.grid.fire("colresizestart",d,d.pCt.indexOf(d));var n=this.getIndicator(),
l=this.leftIndicator,o=d.absoluteXY(),q;k=o[0]+d.view.offsetWidth-f.floor(n.getWidth(true)/2);q=o[1]+d.view.offsetHeight;n.setXY(k,q).appendTo(document.body);l.setXY(o[0]-f.floor(n.getWidth(true)/2),q).appendTo(document.body)},drag:function(){this.rightIndicator.view.style.left=k+a.getDXY()[0]+"px"},dragend:function(){var n=a.getDXY()[0];n&&d.setWidth(d.getWidth(true)+n,true);this.leftIndicator.del();this.rightIndicator.del();this.grid.fire("colresizeend",this,d.pCt.indexOf(d))},afterdrag:function(){d=
null;b.applyMasker(false,"")},onColMouseMove:function(n,l){var o=n.view.style;if(n.resizeDisabled||a.isDragging()){if(o.cursor!="")o.cursor=""}else if(n.view.offsetWidth-g.pageX(l)+n.absoluteXY()[0]<this.monitorLen)o.cursor="col-resize";else if(o.cursor!="")o.cursor=""},onColMouseDown:function(n,l){if(n.view.style.cursor==="col-resize"&&!n.resizeDisabled&&!a.isDragging()){d=n;b.applyMasker(true,"col-resize");a.setHandler(this).setBounds(this.calColWidthConstrain(n)).startDrag(n,l);g.preventDefault(l)}},
calColWidthConstrain:function(n){if(this.grid.colwidthctrl){dx=this.grid.colwidthctrl.getConstrain(n);h[1]=-1*dx[0];h[0]=dx[1]}else{h[1]=f.max(n.minW,0);h[0]=f.MAX_VALUE}return h},gridEventHandlers:{afteraddheader:function(n){this.install(n)}},indicatorCS:"g-grid-cwidctor",getIndicator:function(){var n=this.rightIndicator;if(!n){var l={view:"div",ctype:"base",cs:this.indicatorCS};n=this.rightIndicator=CC.ui.instance(l);this.leftIndicator=CC.ui.instance(l);this.grid.header.follow(n).follow(this.leftIndicator)}return n}}});
CC.ui.def("colresizer",CC.ui.grid.plugins.ColumnResizer);CC.ui.Grid.prototype.plugins.push({name:"colresizer",ctype:"colresizer"});
CC.create("CC.ui.grid.plugins.RowChecker",null,{name:"rowchecker",cell:{title:"&nbsp;",maxW:20,minW:20,resizeDisabled:true,id:"rowCheckerCol",dataCol:false,checkedCS:"g-check-checked",cellBrush:function(){this.id="rowcheckercell";return'<span class="g-checkbox g-form-el"><img class="chkbk" src="'+CC.Tpl.BLANK_IMG+'"></span>'},brush:function(){return'<span class="g-checkbox g-form-el" title="\u5168\u9009/\u53cd\u9009"><img class="chkbk" src="'+CC.Tpl.BLANK_IMG+'"></span>'},onRender:function(){this.superclass.onRender.call(this);
this.domEvent("click",function(){var a=this.pCt.pCt.content.getSelectionProvider(),b=this.selected=!this.selected;this.checkClass(this.checkedCS,b);a.mode===0&&a.selectAll(b)})}},initialize:function(a){var b=CC.extend({},this.cell);if(a){a.cell&&CC.extend(b,CC.delAttr("cell",a));CC.extend(this,a)}this.grid.header.array&&this.grid.header.array.insert(0,b)},gridEventHandlers:{afteraddcontent:function(a){a.on("selectchange",function(b,g,f){var d=b.$("rowcheckercell"),h=a.grid.header.$("rowCheckerCol");
d.checkClass(h.checkedCS,f.isSelected(b));if(g)(b=g.$("rowcheckercell"))&&b.checkClass(h.checkedCS,f.isSelected(g))})}}});CC.ui.grid.plugins.RowChecker.WEIGHT=CC.ui.grid.plugins.RowChecker.prototype.weight=CC.ui.grid.Header.WEIGHT-2;CC.ui.def("gridrowchecker",CC.ui.grid.plugins.RowChecker);CC.ui.Grid.prototype.sortable=true;CC.ui.grid.Column.prototype.sortable=undefined;CC.ui.grid.Column.prototype.order=undefined;CC.ui.grid.Column.prototype.dt=undefined;
CC.create("CC.ui.grid.plugins.Sorter",null,{trigEvent:"click",order:"desc",dt:"string",initialize:function(a){CC.extend(this,a)},gridEventHandlers:{afteraddheader:function(a){this.grid.sortable&&a.itemAction(this.trigEvent,this.onColClick,false,this)}},onColClick:function(a){if(a.sortable||a.sortable===undefined&&a.dataCol)this.sort(a,a.order===undefined?this.order:a.order==="desc"?"asc":"desc")},sort:function(a,b){var g=a.pCt.indexOf(a),f=a.dt===undefined?this.dt:a.dt;f=a.comparator?a.comparator:
CC.util.TypeConverter.getComparator(f);if(this.grid.fire("sortcol",a,g,b,f)!==false){if(f=this.preSorted)f=CC.Base.byCid(f);if(f&&f!==a)f.order=undefined;this.preSorted=a.cacheId;a.order=b;a.sortDecorator(b,f);this.grid.fire("sortcolend",a,g,b,f)}}});CC.ui.def("gridsorter",CC.ui.grid.plugins.Sorter);CC.ui.Grid.prototype.plugins.push({name:"sorter",ctype:"gridsorter"});CC.ui.grid.Content.prototype.expandableRowContent=false;CC.ui.grid.Cell.prototype._isExpandTrig=false;
CC.create("CC.ui.grid.plugins.ExpandableRow",null,{initialize:function(a){var b=CC.extend({},this.cell);if(a){a.cell&&CC.extend(b,CC.delAttr("cell",a));CC.extend(this,a)}this.grid.header.array&&this.grid.header.array.insert(0,b);if(a=this.grid.content){a.template='<div class="g-grid-ct"><table class="ct-tbl" id="_ct_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup></table></div>';a.ct="_ct_tbl";a.createRowView=this._createRowViewProxy}},cell:{dataCol:false,title:"&nbsp;",
maxW:20,minW:20,resizeDisabled:true,sortable:false,cellBrush:function(){this.pCt._rowExpandind=false;this._isExpandTrig=true;this.addClass("exptrigcell");return'<a href="javascript:void(0)" class="trig"></a>'}},_createRowViewProxy:function(a){var b=this.grid.header.children.length,g=this.expandableRowContent;if(g)g=CC.templ(a,g);b=CC.Tpl.forNode(['<table><tbody><tr></tr><tr><td class="g-gridrow-expandtd0"></td>','<td class="g-gridrow-expandtd1" colspan="'+(b-1)+'"><div id="_expand_area" class="g-gridrow-expandarea hid">'+
(g?g:"")+"</div></td>","</tr></tbody></table>"].join(""),a);a.view=b.removeChild(b.firstChild);a.ct=a.view.firstChild;a.expandRowContentEl=a.dom("_expand_area")},gridEventHandlers:{cellclick:function(a,b){if(a._isExpandTrig){a=a.pCt;this.expandRow(a,!a._rowExpandind);CC.Event.stop(b)}}},getRowContentEl:function(a){return a.dom("_expand_area")},expandRow:function(a,b){if(a._rowExpandind!==b)if(this.grid.fire("expandablerow:beforeexpand",a,b)!==false){a._rowExpandind=b;CC.fly(a.expandRowContentEl).display(b).unfly();
a.checkClass("g-gridrow-expand",b);this.grid.fire("expandablerow:afterexpand",a,b)}}});CC.ui.grid.plugins.ExpandableRow.WEIGHT=CC.ui.grid.plugins.ExpandableRow.prototype.weight=CC.ui.grid.Header.WEIGHT-1;CC.ui.def("gridexpandablerow",CC.ui.grid.plugins.ExpandableRow);CC.ui.ContainerBase.prototype.isForm=false;
(function(){var a,b=window.CC,g=b.Base,f=b.Tpl;b.create("CC.ui.form.FormElement",g,{name:false,value:undefined,element:false,elementNode:"_el",eventable:true,validator:false,validateOnblur:true,elementCS:"g-form-el",initComponent:function(){var k=this.view;if(!k)this.view=f.$(this.template||this.type);k=this.element;if(!k){k=this.dom(this.elementNode);if(!k)k=this.view;this.element=k}this.focusNode=k;this.addClass(this.elementCS);g.prototype.initComponent.call(this);this.name&&this.setName(this.name);
if(this.value){k=b.delAttr(this,"value");this.setValue(k)}this.focusCS&&this.bindFocusCS()},bindFocusCS:function(k){if(k)this.focusCS=k;this.on("focus",this._switchFocusCS);this.on("blur",this._switchFocusCS)},_switchFocusCS:function(){if(this.focused){this.addClassIf(this.focusCS);this.focusCallback()}else this.delClass(this.focusCS)},focusCallback:fGo,onFocusTrigger:function(){if(!this.focused){this.focused=true;this.onfocus&&this.onfocus();this.fire("focus")}},onBlurTrigger:function(){if(this.focused){this.focused=
false;this.validateOnblur&&this.validator&&this.checkValid();this.onblur&&this.onblur();this.fire("blur")}},onKeydownTrigger:function(k){this.fire("keydown",k)},checkValid:function(){var k=this.validator?this.validator(this.getValue()):true;this.decorateValid(k);return k},decorateValid:function(k){var n=this.errorCS;n&&this.checkClass(n,k!==true)},setValue:function(k){this.value=this.element.value=k;return this},getValue:function(){return this.element.value},getText:function(){return this.getValue()},
setText:function(k){return this.setValue(k)},setName:function(k){this.name=this.element.name=k;return this},getForm:function(){for(var k=this.pCt;k;){if(k.isForm)return k;k=k.pCt}return null},active:fGo,deactive:fGo,mouseupCallback:function(k){this.onclick&&this.onclick(k,this.element)}});var d=b.ui.form.FormElement;a=d.prototype;var h=b.ui.form;f.def("Text",'<input type="{type}" class="g-ipt-text g-corner" />').def("Textarea",'<textarea class="g-textarea g-corner" />').def("Checkbox",'<span tabindex="0" class="g-checkbox"><input type="hidden" id="_el" /><img src="'+
f.BLANK_IMG+'" class="chkbk" /><label id="_tle"></label></span>').def("Select",'<select class="g-corner"/>').def("CC.ui.form.Label",'<span><label id="_tle" class="cap"></label></span>');b.create("CC.ui.form.Text",d,{type:"text",template:"Text",initComponent:function(){this.view=f.forNode(f[this.template],this);a.initComponent.call(this);var k=this.element;this.domEvent("focus",this.onFocusTrigger,false,null,k).domEvent("blur",this.onBlurTrigger,false,null,k).domEvent("keydown",this.onKeydownTrigger,
false,null,k)},maxH:20,focusCS:"g-ipt-text-hover",focusCallback:function(k){a.focusCallback.call(this,k);var n=this;(function(){n.view.select()}).timeout(20)},getSize:function(){var k=b.borderBox;b.borderBox=true;var n=g.prototype.getSize.apply(this,arguments);b.borderBox=k;return n},setSize:function(){var k=b.borderBox;b.borderBox=true;var n=g.prototype.setSize.apply(this,arguments);b.borderBox=k;return n}});b.ui.def("text",h.Text);b.create("CC.ui.form.Textarea",d,h.Text.constructors,{template:"Textarea",
focusCallback:d.prototype.focusCallback,maxH:g.prototype.maxH});b.ui.def("textarea",h.Textarea);b.create("CC.ui.form.Checkbox",d,{template:"Checkbox",hoverCS:"g-check-over",clickCS:"g-check-click",checkedCS:"g-check-checked",initComponent:function(){a.initComponent.call(this);if(this.checked){delete this.checked;this.setChecked(true)}this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger)},mouseupCallback:function(k){this.setChecked(!this.checked);
a.mouseupCallback.call(this,k)},setChecked:function(k){if(this.checked!==k){this.checked=k;this.element.checked=k;this.checkClass(this.checkedCS,k);this.oncheck&&this.oncheck(k)}return this}});b.ui.def("checkbox",h.Checkbox);b.create("CC.ui.form.Radio",d,h.Checkbox.constructors,{innerCS:"g-radio",template:"Checkbox",hoverCS:"g-radio-over",clickCS:"g-radio-click",checkedCS:"g-radio-checked",elementNode:false,mouseupCallback:function(k){this.checked||this.setChecked(true);a.mouseupCallback.call(this,
k)},getGroup:function(){var k=this.getForm();if(k){var n=k._RADIOGROUPS;if(!n)n=k._RADIOGROUPS={};var l=n[this.name];if(l)return g.byCid(l);else{l=b.ui.instance("radiogrp",{pCt:k,showTo:k.ct,name:this.name});k.follow(l);n[this.name]=l.cacheId;return l}}},setChecked:function(k){var n=this.checked;h.Checkbox.prototype.setChecked.apply(this,arguments);if(n!==k&&k&&this.name)(n=this.getGroup())&&n.setChecked(this,true);return this}});b.ui.def("radio",h.Radio);b.Tpl.def("CC.ui.form.RadioGroup",'<input type="hidden" />');
b.create("CC.ui.form.RadioGroup",d,{getChecked:function(){return this.currentRadio&&g.byCid(this.currentRadio)},setChecked:function(k,n){if(n){n=this.getChecked();if(!n||n!==k){n&&n.setChecked(false);this.currentRadio=k.cacheId;k=k.getValue();k!==undefined&&this.setValue(k)}}else{this.currentRadio=null;this.setValue("")}}});b.ui.def("radiogrp",b.ui.form.RadioGroup);b.create("CC.ui.form.Select",d,{template:"Select",initComponent:function(){a.initComponent.call(this);this.domEvent("focus",this.onFocusTrigger).domEvent("blur",
this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger).domEvent("change",this.onChangeTrigger);if(this.array){for(var k=0,n=this.array,l=n.length;k<l;k++)this.add(n[k]);delete this.array}if(this.selectedIndex){this.element.selectedIndex=this.selectedIndex;delete this.selectedIndex}},onChangeTrigger:function(){this.onchange&&this.onchange();this.fire("change")},getText:function(){var k=this.element,n=k.selectedIndex;return n==-1?"":k.options[n].text},add:function(k){var n=this.element.options,
l=document.createElement("OPTION");b.extend(l,k);n[n.length]=l},$:function(){return this.element.options[i]},getSelIdx:function(){return this.element.selectedIndex},setSelIdx:function(k){this.element.selectedIndex=k}});b.ui.def("select",h.Select);b.create("CC.ui.form.Label",b.Base);b.ui.def("label",b.ui.form.Label)})();
CC.Tpl.def("CC.ui.form.Line",'<li class="g-form-ln"><label class="desc" id="_lbl"><span id="_tle"></span><span class="req" id="_req">*</span></label><div id="_ctx" class="field-ct"></div></li>').def("CC.ui.form.Layer",'<ul class="g-formfields"></ul>').def("CC.ui.form.FormLayer",'<form><ul id="_ctx" class="g-formfields"></ul></form>').def("CC.ui.form.FieldsetUL",'<fieldset class="g-fieldset g-corner"><legend id="_tle"></legend><div id="_ctx" class="fieldset-ct"></div><div class="g-clear"></div></fieldset>');
CC.create("CC.ui.form.Line",CC.ui.ContainerBase,function(a){return{labelNode:"_lbl",hlabel:false,hlabelCS:"g-form-hln",reqNode:"_req",labelFor:0,ct:"_ctx",title:false,initComponent:function(){a.initComponent.call(this);this.hlabel&&this.addClass(this.hlabelCS);if(this.title===false&&this.labelNode!==false){var b=this.dom(this.labelNode);b.parentNode.removeChild(b)}this.required&&CC.fly(this.reqNode).show().unfly()},onAdd:function(b){a.onAdd.apply(this,arguments);if(this.labelFor!==false&&this.$(this.labelFor)===
b)if(b.element){var g=this.dom(this.labelNode);if(g)g.htmlFor=b.element.id}}}});CC.ui.def("fieldline",CC.ui.form.Line);CC.create("CC.ui.form.Layer",CC.ui.ContainerBase,{itemCls:CC.ui.form.Line,ct:"_ctx"});CC.ui.def("fieldlayer",CC.ui.form.Layer);CC.create("CC.ui.form.FormLayer",CC.ui.ContainerBase,{itemCls:CC.ui.form.Line,ct:"_ctx",getFormEl:function(){return this.view},byName:function(a,b){return this.byId(a,"name",b)}});CC.ui.def("form",CC.ui.form.FormLayer);
CC.ui.form.Fieldset=function(a){return new CC.ui.form.Layer(CC.extendIf(a,{template:"CC.ui.form.FieldsetUL",itemCls:CC.ui.form.Layer,ct:"_ctx"}))};CC.ui.form.Line.prototype.itemCls=CC.ui.form.Layer;CC.ui.def("fieldset",CC.ui.form.Fieldset);CC.Tpl.def("CC.ui.form.Combox",'<div class="g-panel g-combo" tabindex="1" hidefocus="on"><div class="g-panel-wrap g-combo-wrap" id="_wrap"><input type="hidden" id="_el" /><div class="unedit-txt" id="_uetxt"></div><span class="downIco" id="_trigger"></span></div></div>');
CC.create("CC.ui.form.Combox",CC.ui.form.FormElement,function(a){function b(){return true}var g=CC.Event;return{hoverCS:"g-combo-on",uneditCS:"g-combo-unedit",downCS:"g-combo-dwn",selectorCS:"g-combo-list",maxH:21,filterContent:true,selector:false,initComponent:function(){var f=CC.delAttr(this,"array");if(!this.editor)this.editor={name:this.name,ctype:"text"};this.editor=CC.ui.instance(this.editor);a.initComponent.call(this);this.uneditNode=this.dom("_uetxt");this.dom("_wrap").insertBefore(this.editor.view,
null);var d=this.selector;d=d?CC.ui.instance(d):this.createDefSelector();var h=this.getSelectioner(d);f&&h.fromArray(f);this.attach(d,h);this.setEditable(!CC.delAttr(this,"uneditable"));if(this.selected){h.getSelectionProvider().select(this.selected);delete this.selected}this.initEvents()},initEvents:function(){this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger).wheelEvent(this.onMouseWheel,true);this.on("blur",this.checkSelected);
this.domEvent("keydown",this._keyHandler,false,null,this.editor.view).domEvent("keyup",this._filtHandler,false,null,this.editor.view)},onHide:function(){this.selector.hidden||this.selector.hide();a.onHide.apply(this,arguments)},createDefSelector:function(){return CC.ui.instance({ctype:"folder",showTo:document.body,shadow:true})},getSelectioner:function(f){return this.selectioner||f},onMouseWheel:function(f){f=CC.Event.getWheel(f);if(f>0)this.selectioner.selectionProvider.pre();else f<0&&this.selectioner.selectionProvider.next()},
disable:function(f){a.disable.call(this,f);this.editor.disable(f)},setScrollorHeight:function(f){this.selector.fly("_scrollor").setHeight(f).unfly()},setEditable:function(f){if(this.uneditable!==undefined&&this.uneditable==f)return this;if(this.uneditable&&f)this.delClass(this.uneditCS).unEvent("click",this.onUneditableClick);else f?this.domEvent("click",this.onUneditableClick,true,null,"_trigger"):this.addClass(this.uneditCS).domEvent("click",this.onUneditableClick).unEvent("click",this.onUneditableClick,
"_trigger");this.uneditable=!f;this.focusNode=!f?this.view:this.editor.element;return this},onKeydownTrigger:function(f){if(this._keyHandler(f)===false){g.stop(f);return false}a.onKeydownTrigger.apply(this,arguments)},onUneditableClick:function(){var f=!this.selector.hidden;!f&&this.filterContent&&this.selectioner.filter(b);this.showBox(!f)},attach:function(f,d){this.selector=f;this.selectioner=d;this.follow(f);f.display(false);f.shadow&&f.shadow.setZ(999);f.addClass(this.selectorCS).on("contexted",
this.onBoxContexted,this);d.on("selected",this.onSelected,this).on("itemclick",this.onItemClick,this);this._savSelKeyHdr=f.defKeyNav;var h=this;d.getSelectionProvider().defKeyNav=function(k){h._keyHandler(k,true)}},onBoxContexted:function(f,d){if(!f){if(d)if(this.ancestorOf(g.element(d)))return false;this.showBox(false)}},onItemClick:function(){this.showBox(false)},_keyHandler:function(f,d){var h=f.keyCode;if(h==27||h==13)if(!this.selector.hidden){this.showBox(false);g.stop(f);return false}if(!d)return this.selectioner.selectionProvider.navigateKey(f)},
_filtHandler:function(f){f=f.keyCode;var d=this.selectioner,h=d.selectionProvider;if(!(f===h.UP||f===h.DOWN||this.noFilt||f===27||f===13||f===9)){var k=this.editor.element.value;k==""&&h.select(null);h.selected&&f!=g.LEFT&&f!=g.RIGHT&&h.select(null);if(this.filterContent&&k!=this.preValue){d.filter(this.matcher,this);this.preValue=k}this.showBox(true)}},showBox:function(f){var d=this.selector;if(!d.hidden!=f)if(f){d.fastStyleSet("visibility","hidden").display(true);this.preferPosition();d.fastStyleSet("visibility",
"");this.uneditable?this.focus(true):this.editor.focus(true);d.shadow&&d.shadow.reanchor();this.checkSelected();this.addClass(this.downCS).setContexted(true)}else{d.display(false);this.delClass(this.downCS)}},active:function(){this.showBox(true)},deactive:function(){this.showBox(false)},checkSelected:function(){var f=this.selectioner,d=f.getSelectionProvider(),h=this.getValue();if(h===""&&d.selected)d.select(null);else if(!(d.selected&&this.getItemValue(d.selected)==h)){d.select(null);var k=this;
f.each(function(n){if(!n.hidden&&!n.disabled&&k.getItemValue(n)===h){d.select(n);return false}})}},preferPosition:function(){var f=this.selector;this.noAutoWidth||f.setWidth(this.preferWidth());f.anchorPos(this,"lb","hr",null,true,true)},preferWidth:function(){return this.getWidth()},onSelected:function(f){this.setValueFromItem(f,true);this.uneditable||this.editor.focus(true)},getItemValue:function(f){if(f.getValue)return f.getValue();if(f.value!==undefined)return f.value;return f.getTitle()},getItemTitle:function(f){return f.title!==
undefined?f.title:f.value},setValue:function(f,d){a.setValue.call(this,f);this.selector&&!d&&this.checkSelected();return this},getText:function(){if(this.uneditable)return this.title||"";return this.editor.getValue()},setTitle:function(f){if(this.uneditable)this.uneditNode.innerHTML=f;else this.editor.setValue(f);this.title=f;return this},setValueFromItem:function(f,d){var h=this.getItemValue(f);f=this.getItemTitle(f);this.setValue(h,d);this.setTitle(f);return this},getValue:function(){return a.getValue.call(this)},
matcher:function(f){var d=this.getItemTitle(f),h=this.editor.element.value;if(h==""){f.setTitle(d);return true}if(d.indexOf(h)>=0){if(f=f.titleNode||f.dom("_tle"))f.innerHTML=d.replace(h,'<span class="g-match">'+h+"</span>");return true}f.setTitle(d);return false},select:function(f){this.selectioner.selectionProvider.select(f)},onContextRelease:function(f){if(f)if(this.selector.ancestorOf(g.element(f)))return false;this.selector.display(false)}}});CC.ui.def("combo",CC.ui.form.Combox);
CC.Tpl.def("CC.ui.form.Progressbar",'<table class="g-progressbar" cellspacing="0" cellpadding="0" border="0"><tr><td class="g-progress-l"><i>&nbsp;</i><input type="hidden" id="_el" /></td><td class="g-progress-c"><img id="_img" src="http://www.cicyui.com/s.gif" alt=""/></td><td class="g-progress-r"><i>&nbsp;</i></td></tr></table>');
CC.create("CC.ui.form.Progressbar",CC.ui.form.FormElement,function(a){if(!CC.ui.form.Progressbar.img)CC.ui.form.Progressbar.img="http://bgjs.googlecode.com/svn/trunk/cicy/default/ru/progressbar.gif";return{range:100,value:0,initComponent:function(){this.createView();if(CC.ui.form.Progressbar.img){this.img=this.dom("_img");this.img.src=CC.ui.form.Progressbar.img}a.initComponent.call(this)},setValue:function(b){if(b>=100){CC.fly(this.img).fastStyleSet("width","100%").unfly();this.onstop();this.fire("progressstop",
this);return a.setValue.call(this,100)}CC.fly(this.img).fastStyleSet("width",b+"%").unfly();return a.setValue.call(this,b)},onstop:fGo}});CC.ui.def("progressbar",CC.ui.form.Progressbar);
(function(){var a=CC.ui.form.FormElement.prototype,b=CC.Event;CC.Tpl.def("CC.ui.form.DatepickerField",'<div class="g-datepicker-field"><div class="field-wrap"><input type="text" class="g-corner" id="_el" /><a title="\u70b9\u51fb\u9009\u62e9\u65e5\u671f" tabindex="-1" class="trigger" id="_trigger" href="javascript:fGo();"></a></div></div>');CC.create("CC.ui.form.DatepickerField",CC.ui.form.FormElement,{focusCS:"g-datepicker-field-focus",triggerHoverCS:"triggerOn",contextCS:"g-datepicker-field-ctx",
maxH:20,applyTimeout:200,initComponent:function(){a.initComponent.call(this);this.bindHoverStyle(this.triggerHoverCS,true,null,null,null,"_trigger","_trigger").domEvent("click",this.onTriggerClick,false,null,"_trigger").domEvent("focus",this.onFocusTrigger,false,null,this.element).domEvent("blur",this.onBlurTrigger,false,null,this.element).domEvent("keydown",this.onKeydownTrigger,false,null,this.element)},active:function(){this.showDatepicker(true)},deactive:function(){this.showDatepicker(false)},
onHide:function(){this.getDatepicker().hidden||this.getDatepicker().hide();CC.ui.form.FormElement.prototype.onHide.apply(this,arguments)},onTriggerClick:function(){this.showDatepicker(!!this.getDatepicker().hidden)},showDatepicker:function(g){var f=this.getDatepicker();if(f.hidden===g){this.datepicker.display(g);if(g){this.getValue()&&f.setValue(this.getValue(),true);f.anchorPos(this,"rb","hl",null,true,true);f.focus(0);this.setContexted(true)}else this.focus()}},onContextRelease:function(g){if(g)if(this.getDatepicker().ancestorOf(CC.Event.element(g)))return false;
this.showDatepicker(false)},getDatepicker:function(){var g=this.datepicker;if(!g){g=this.datepicker=new CC.ui.Datepicker({showTo:document.body,autoRender:true,hidden:true});this.follow(g);g.on("select",this._onDateSelect).on("keydown",this.onKeydownTrigger,this)}return g},onKeydownTrigger:function(g){if(b.isEscKey(g)||b.isEnterKey(g)){if(!this.getDatepicker().hidden){b.stop(g);this.showDatepicker(false);return false}if(b.isEnterKey(g)){this.getDatepicker().toToday();return false}}a.onKeydownTrigger.apply(this,
arguments)},_onDateSelect:function(g){var f=this.pCt;(function(){f.showDatepicker(false);f.setValue(g)}).timeout(f.applyTimeout)},getText:function(){return this.getValue()}});CC.ui.def("datepicker",CC.ui.form.DatepickerField)})();
CC.create("CC.ui.form.ValidationProvider",CC.util.ValidationProvider,function(){return{validator:function(a,b){a=a.validator?a.validator(a.getValue()):this.htmlValidator.call(a);a!==true&&b.push(a);return a},htmlValidator:function(){return true},each:function(a){this.t.eachH(function(){if(this.element&&a.apply(this,arguments)===false)return false});this.eachHtml(a)},eachHtml:fGo}});CC.ui.def("formvalidation",CC.ui.form.ValidationProvider);CC.ui.form.FormLayer.prototype.validationProvider=CC.ui.form.ValidationProvider;
CC.Tpl.def("CC.ui.form.RichEditor",'<div><textarea id="_el" class="g-textarea g-corner" ></textarea></div>');
CC.create("CC.ui.form.RichEditor",CC.ui.form.Textarea,function(a){return{template:"CC.ui.form.RichEditor",editorUrl:"http://ckeditor.com/apps/ckeditor/3.4/ckeditor.js",lazyLoad:true,onRender:function(){a.onRender.call(this);this.lazyLoad||this.loadEditor()},onFocusTrigger:function(){a.onFocusTrigger.apply(this,arguments);this.lazyLoad&&!this.editor&&this.loadEditor(this.focus)},loadEditor:function(b,g){if(this.editor)b.call(this,this.editor);else{if(!this._loadCbList){this._loadCbList=[];__debug&&
console.assert(CC.ui.form.RichEditor.isLoading,undefined);this._replace(this.element,CC.extendIf(g,this.editorCfg),function(f){this._onEditorLoad(f);this.editorCfg&&delete this.editorCfg}.bindRaw(this))}b&&this._loadCbList.push(b)}},focus:function(){this.editor?this.editor.focus():this.loadEditor(function(b){b.focus()});return this},getValue:function(){return this.editor?this.editor.getData():this.value},getText:function(){return this.editor?this.editor.getData():this.value},setValue:function(b){this.editor&&
this.editor.setData(b);return a.setValue.call(this,b)},getEditor:function(b){!this.editor&&b&&this.loadEditor(b);return this.editor},isModified:function(){if(this.editor)return this.modified=this.checkDirty();return this.modified},setSize:function(){a.setSize.apply(this,arguments);if(this.editor)try{this.editor.resize(this.width,this.height)}catch(b){}else CC.fly(this.element).fastStyleSet("width",this.width+"px").fastStyleSet("height",this.height+"px");return this},destroy:function(){try{this.editor.destroy()}catch(b){}a.destroy.call(this)},
_onEditorLoad:function(b){this.editor=b;this.fire("editorload",b);this.value&&b.setData(this.value);if(this._loadCbList){for(var g=0,f=this._loadCbList,d=f.length;g<d;g++)f[g].call(this,b);delete this._loadCbList}if(this.width!==false||this.height!==false){var h=this;(function(){b.resize(h.width,h.height)}).timeout(100)}b.on("focus",this.onFocusTrigger.bind(this));b.on("blur",this.onBlurTrigger.bind(this));this.onEditorReady&&this.onEditorReady(b,e)},_replace:function(b,g,f){var d;if(window.CKEDITOR){d=
CKEDITOR.replace(b,g);f(d,g)}else this._loadAPI(function(){d=CKEDITOR.replace(b,g);f(d,g)})},_loadAPI:function(b){CC.ui.form.RichEditor.isLoading=true;CC.loadScript(this.editorUrl,function(){b();delete CC.ui.form.RichEditor.isLoading})}}});CC.ui.form.RichEditor.prototype.getText=CC.ui.form.RichEditor.prototype.getValue;CC.ui.def("rtext",CC.ui.form.RichEditor);
CC.create("CC.ui.form.StoreProvider",CC.util.StoreProvider,function(){CC.ui.def("formstore",CC.ui.form.StoreProvider);return{queryString:function(){return CC.formQuery(this.t.getFormEl())},save:function(){this.beforeSave()!==false&&this.t.fire("store:beforesave",this)!==false&&this.onSave()},getSaveUrl:function(){return this.mappingUrl(this.saveUrl)},beforeSave:function(){return this.t.getValidationProvider().validateAll()===true}}});CC.ui.form.FormLayer.prototype.storeProvider=CC.ui.form.StoreProvider;
